<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Notebook collections"><link href=https://abhaydgarg.github.io/Notebook/index.html/git/commands/ rel=canonical><meta name=author content="Abhay Garg"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.2"><title>Commands - Notebook</title><link rel=stylesheet href=../../assets/stylesheets/application.30686662.css><link rel=stylesheet href=../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#2196f3><script src=../../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono&display=fallback"><style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#commands tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Notebook </span> <span class=md-header-nav__topic> Commands </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-nav__button md-logo"> <i class=md-icon></i> </a> Notebook </label> <div class=md-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../computer-science/ title=CS class=md-nav__link> CS </a> </li> <li class=md-nav__item> <a href=../../parser/ title=Parser class=md-nav__link> Parser </a> </li> <li class=md-nav__item> <a href=../../data-structure-and-algorithms/ title="Data Structure and Algorithms" class=md-nav__link> Data Structure and Algorithms </a> </li> <li class=md-nav__item> <a href=../../oops/ title=OOPS class=md-nav__link> OOPS </a> </li> <li class=md-nav__item> <a href=../../design-patterns/ title="Design Patterns" class=md-nav__link> Design Patterns </a> </li> <li class=md-nav__item> <a href=../../regex/ title=Regex class=md-nav__link> Regex </a> </li> <li class=md-nav__item> <a href=../ title=GIT class=md-nav__link> GIT </a> </li> <li class=md-nav__item> <a href=../../css/ title=CSS class=md-nav__link> CSS </a> </li> <li class=md-nav__item> <a href=../../rest-api/ title="REST API" class=md-nav__link> REST API </a> </li> <li class=md-nav__item> <a href=../../javascript/ title=Javascript class=md-nav__link> Javascript </a> </li> <li class=md-nav__item> <a href=../../nodejs/ title=Node.js class=md-nav__link> Node.js </a> </li> <li class=md-nav__item> <a href=../../npm/ title=NPM class=md-nav__link> NPM </a> </li> <li class=md-nav__item> <a href=../../redux/ title=Redux class=md-nav__link> Redux </a> </li> <li class=md-nav__item> <a href=../../react/ title=React class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../react-native/ title="React Native" class=md-nav__link> React Native </a> </li> <li class=md-nav__item> <a href=../../mongodb/ title=MongoDB class=md-nav__link> MongoDB </a> </li> <li class=md-nav__item> <a href=../../web-security/ title="Web Security" class=md-nav__link> Web Security </a> </li> <li class=md-nav__item> <a href=../../rust/ title=Rust class=md-nav__link> Rust </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#squash-commits-into-one class=md-nav__link> Squash commits into one </a> </li> <li class=md-nav__item> <a href=#update-the-local-list-of-remote-branches class=md-nav__link> Update the local list of remote branches </a> </li> <li class=md-nav__item> <a href=#view-file-history class=md-nav__link> View file history </a> </li> <li class=md-nav__item> <a href=#filter-commits-by-file-content class=md-nav__link> Filter commits by file content </a> </li> <li class=md-nav__item> <a href=#remove-all-commits-and-start-fresh class=md-nav__link> Remove all commits and start fresh </a> </li> <li class=md-nav__item> <a href=#merge-squash class=md-nav__link> Merge [squash] </a> </li> <li class=md-nav__item> <a href=#undo-changes-in-working-directory class=md-nav__link> Undo changes in working directory </a> </li> <li class=md-nav__item> <a href=#undo-changes-in-staging-index-area class=md-nav__link> Undo changes in staging (Index area) </a> </li> <li class=md-nav__item> <a href=#undo-changes-after-commit-is-done-but-not-pushed class=md-nav__link> Undo changes after commit is done but not pushed </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reset-method-remove-commit-from-history class=md-nav__link> reset method (Remove commit from history) </a> </li> <li class=md-nav__item> <a href=#revert-method-does-not-remove-commit-from-history class=md-nav__link> revert method (does not remove commit from history) </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/abhaydgarg/Notebook/tree/master/src/git/commands.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=commands>Commands<a class=headerlink href=#commands title="Permanent link">&para;</a></h1> <h2 id=squash-commits-into-one>Squash commits into one<a class=headerlink href=#squash-commits-into-one title="Permanent link">&para;</a></h2> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1># FROM</span>
871adf OK, feature Z is fully implemented      --- newer commit --┐
0c3317 Whoops, not yet...                                         <span class=p>|</span>
87871a I<span class=err>&#39;</span>m ready!                                                 <span class=p>|</span>
643d0e Code cleanup                                               <span class=p>|</span>-- Join these into one
afb581 Fix this and that                                          <span class=p>|</span>
4e9baa Cool implementation                                        <span class=p>|</span>
d94e78 Prepare the workbench <span class=k>for</span> feature Z     -------------------┘
6394dc Feature Y                               --- older commit

<span class=c1># TO</span>
84d1f8 Feature Z                               --- newer commit <span class=o>(</span>result of rebase<span class=o>)</span>
6394dc Feature Y                               --- older commit
</pre></div> </td></tr></table> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1># [1]</span>
<span class=c1># Commit&#39;s hash just before the first one you want to rewrite from.</span>
<span class=c1># Merge all my commits on top of commit 6394dc.</span>
git rebase --interactive <span class=o>[</span>commit-hash<span class=o>]</span> <span class=c1># git rebase --interactive 6394dc</span>

<span class=c1># [2]</span>
<span class=c1># Picking and Squashing.</span>
<span class=c1># Note that it might be confusing at first, since they are displayed in a reverse order, where the older commit is on top.</span>

<span class=c1># Mark a commit as squashable by changing the word pick into squash (s) next to it.</span>
<span class=c1># Save and close the editor.</span>
pick d94e78 Prepare the workbench <span class=k>for</span> feature Z     --- older commit
s 4e9baa Cool implementation
s afb581 Fix this and that
s 643d0e Code cleanup
s 87871a I<span class=err>&#39;</span>m ready!
s 0c3317 Whoops, not yet...
s 871adf OK, feature Z is fully implemented      --- newer commit

<span class=c1># [3]</span>
<span class=c1># Create new commit at the end.</span>
</pre></div> </td></tr></table> <h2 id=update-the-local-list-of-remote-branches>Update the local list of remote branches<a class=headerlink href=#update-the-local-list-of-remote-branches title="Permanent link">&para;</a></h2> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>git remote update origin --prune
</pre></div> </td></tr></table> <h2 id=view-file-history>View file history<a class=headerlink href=#view-file-history title="Permanent link">&para;</a></h2> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>git log --oneline -M --stat --follow -- <span class=o>[</span>file<span class=o>]</span>
</pre></div> </td></tr></table> <h2 id=filter-commits-by-file-content>Filter commits by file content<a class=headerlink href=#filter-commits-by-file-content title="Permanent link">&para;</a></h2> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>git log -S<span class=s2>&quot;function login()&quot;</span>
</pre></div> </td></tr></table> <h2 id=remove-all-commits-and-start-fresh>Remove all commits and start fresh<a class=headerlink href=#remove-all-commits-and-start-fresh title="Permanent link">&para;</a></h2> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1># remove all history</span>
rm -rf .git

<span class=c1># reconstruct the Git repo with only the current content</span>
git init
git add .
git commit -m <span class=s2>&quot;Initial commit&quot;</span>

<span class=c1># push to GitHub.</span>
git remote add origin &lt;github-uri&gt;
git push -u --force origin master
</pre></div> </td></tr></table> <h2 id=merge-squash>Merge <em>[squash]</em><a class=headerlink href=#merge-squash title="Permanent link">&para;</a></h2> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1># Merge f1 into develop</span>
git checkout develop
git pull
git merge --squash f1
<span class=c1># If conflict then resolve and run - git add .</span>
<span class=c1># You have to run commit at the end either conflict or not.</span>
git commit -m <span class=s2>&quot;message&quot;</span>
</pre></div> </td></tr></table> <h2 id=undo-changes-in-working-directory>Undo changes in working directory<a class=headerlink href=#undo-changes-in-working-directory title="Permanent link">&para;</a></h2> <p><strong>Working directory</strong> - Changes that are not staged using <code>git add</code> yet.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1># undo all changes</span>
git checkout -- .

<span class=c1># Undo file or directory</span>
git checkout <span class=o>[</span>some_dir<span class=p>|</span>file.txt<span class=o>]</span>
</pre></div> </td></tr></table> <h2 id=undo-changes-in-staging-index-area>Undo changes in staging (Index area)<a class=headerlink href=#undo-changes-in-staging-index-area title="Permanent link">&para;</a></h2> <p><strong>Staging</strong> - Changes that are staged using <code>git add</code>.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1># undo all changes</span>
git reset HEAD *

<span class=c1># Undo file</span>
git reset <span class=o>[</span>file.txt<span class=o>]</span>
</pre></div> </td></tr></table> <h2 id=undo-changes-after-commit-is-done-but-not-pushed>Undo changes after commit is done but not pushed<a class=headerlink href=#undo-changes-after-commit-is-done-but-not-pushed title="Permanent link">&para;</a></h2> <p><strong>Commit</strong> - Changes that are commit using <code>git commit</code> but not pushed to remote yet.</p> <h3 id=reset-method-remove-commit-from-history>reset method (Remove commit from history)<a class=headerlink href=#reset-method-remove-commit-from-history title="Permanent link">&para;</a></h3> <blockquote> <p>You cannot mention commit hash but position of commit in commit history.</p> </blockquote> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class=code><div class=codehilite><pre><span></span>git reset HEAD~1 <span class=c1># reset to current (latest commit)</span>
git reset HEAD~3 <span class=c1># reset to 3rd commit in commit history</span>

<span class=c1># --mixed (default)</span>
<span class=c1># Changes made in commit move to working directory.</span>
<span class=c1># HEAD~1 means - Current commit removed from commit history but</span>
<span class=c1># changes made in current commit move to working directory.</span>
<span class=c1># You will have to add the individual files again to the stage/index</span>
<span class=c1># before you make commit.</span>
git reset HEAD~1

<span class=c1># --soft</span>
<span class=c1># Changes made in commit move to stage/index area.</span>
<span class=c1># HEAD~1 means - Current commit removed from commit history but</span>
<span class=c1># changes made in current commit move to stage area.</span>
<span class=c1># You can commit everything again and create a new commit with a new description.</span>
git reset --soft HEAD~1

<span class=c1># --hard</span>
<span class=c1># Changes made in commit deleted permanetly.</span>
<span class=c1># HEAD~1 means - Current commit removed from commit history and lost all changes.</span>
<span class=c1># You just lose all your changes up to the point you reset.</span>
git reset --hard HEAD~1
</pre></div> </td></tr></table> <h3 id=revert-method-does-not-remove-commit-from-history>revert method (does not remove commit from history)<a class=headerlink href=#revert-method-does-not-remove-commit-from-history title="Permanent link">&para;</a></h3> <p>It does not remove commit from commit's history but after reverting all changes it create new commit. It is like <code>git reset --soft</code> where changes are moved to index/stage area and then commit staged files with new commit.</p> <p>It is useful in the case when you have already pushed your changes to remote. Since removing commit from local also need to remove from remote which can become messy. So instead revert to certain commit locally, check files or make further changes if required, and then commit and pushed to remote with new commit. This way local and remote commit history remain intact.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1># revert and commit automatically</span>
git revert <span class=o>[</span>commit hash<span class=o>]</span>

<span class=c1># revert but commit manually</span>
git revert -n <span class=o>[</span>commit hash<span class=o>]</span>
</pre></div> </td></tr></table> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Abhay Garg </div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/application.c648116f.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>