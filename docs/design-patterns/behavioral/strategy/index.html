<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Notebook collections"><link href=https://abhaydgarg.github.io/Notebook/index.html/design-patterns/behavioral/strategy/ rel=canonical><meta name=author content="Abhay Garg"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.2"><title>Strategy - Notebook</title><link rel=stylesheet href=../../../assets/stylesheets/application.30686662.css><link rel=stylesheet href=../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#2196f3><script src=../../../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono&display=fallback"><style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#strategy tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Notebook </span> <span class=md-header-nav__topic> Strategy </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-nav__button md-logo"> <i class=md-icon></i> </a> Notebook </label> <div class=md-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../computer-science/ title=CS class=md-nav__link> CS </a> </li> <li class=md-nav__item> <a href=../../../parser/ title=Parser class=md-nav__link> Parser </a> </li> <li class=md-nav__item> <a href=../../../data-structure-and-algorithms/ title="Data structure and algorithms" class=md-nav__link> Data structure and algorithms </a> </li> <li class=md-nav__item> <a href=../../../oops/ title=OOPS class=md-nav__link> OOPS </a> </li> <li class=md-nav__item> <a href=../../ title="Design patterns" class=md-nav__link> Design patterns </a> </li> <li class=md-nav__item> <a href=../../../regex/ title=Regex class=md-nav__link> Regex </a> </li> <li class=md-nav__item> <a href=../../../git/ title=GIT class=md-nav__link> GIT </a> </li> <li class=md-nav__item> <a href=../../../css/ title=CSS class=md-nav__link> CSS </a> </li> <li class=md-nav__item> <a href=../../../mysql/ title=MySQL class=md-nav__link> MySQL </a> </li> <li class=md-nav__item> <a href=../../../mongodb/ title=MongoDB class=md-nav__link> MongoDB </a> </li> <li class=md-nav__item> <a href=../../../javascript/ title=Javascript class=md-nav__link> Javascript </a> </li> <li class=md-nav__item> <a href=../../../nodejs/ title=Node.js class=md-nav__link> Node.js </a> </li> <li class=md-nav__item> <a href=../../../expressjs/ title=Express.js class=md-nav__link> Express.js </a> </li> <li class=md-nav__item> <a href=../../../react/ title=React class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../../linters/ title=Linters class=md-nav__link> Linters </a> </li> <li class=md-nav__item> <a href=../../../graphql/ title=GraphQL class=md-nav__link> GraphQL </a> </li> <li class=md-nav__item> <a href=../../../redux-saga/ title="Redux saga" class=md-nav__link> Redux saga </a> </li> <li class=md-nav__item> <a href=../../../rxjs/ title=RxJS class=md-nav__link> RxJS </a> </li> <li class=md-nav__item> <a href=../../../typescript/ title=Typescript class=md-nav__link> Typescript </a> </li> <li class=md-nav__item> <a href=../../../web-security/ title="Web security" class=md-nav__link> Web security </a> </li> <li class=md-nav__item> <a href=../../../react-native/ title="React native" class=md-nav__link> React native </a> </li> <li class=md-nav__item> <a href=../../../rust/ title=Rust class=md-nav__link> Rust </a> </li> <li class=md-nav__item> <a href=../../../python/ title=Python class=md-nav__link> Python </a> </li> <li class=md-nav__item> <a href=../../../php/ title=PHP class=md-nav__link> PHP </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#problem class=md-nav__link> Problem </a> </li> <li class=md-nav__item> <a href=#solution class=md-nav__link> Solution </a> </li> <li class=md-nav__item> <a href=#applicability class=md-nav__link> Applicability </a> </li> <li class=md-nav__item> <a href=#code class=md-nav__link> Code </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/abhaydgarg/Notebook/tree/master/src/design-patterns/behavioral/strategy.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=strategy>Strategy<a class=headerlink href=#strategy title="Permanent link">&para;</a></h1> <p>It lets you <strong>define a family of algorithms</strong>, put each of them into a separate class.</p> <h2 id=problem>Problem<a class=headerlink href=#problem title="Permanent link">&para;</a></h2> <p>One day you decided to create a navigation app for casual travelers. The app was centered around a beautiful map which helped users quickly orient themselves in any city.</p> <p>One of the most requested features for the app was automatic route planning. A user should be able to enter an address and see the fastest route to that destination displayed on the map.</p> <p>The first version of the app could only build the routes over roads. People who traveled by car were bursting with joy. But apparently, not everybody likes to drive on their vacation. So with the next update, you added an option to build walking routes. Right after that, you added another option to let people use public transport in their routes.</p> <p>However, that was only the beginning. Later you planned to add route building for cyclists. And even later, another option for building routes through all of a city’s tourist attractions.</p> <p>While from a business perspective the app was a success, the technical part caused you many headaches. Each time you added a new routing algorithm, the main class of the navigator doubled in size. At some point, the beast became too hard to maintain.</p> <p>Any change to one of the algorithms, whether it was a simple bug fix or a slight adjustment of the street score, affected the whole class, increasing the chance of creating an error in already-working code.</p> <p>In addition, teamwork became inefficient. Your teammates, who had been hired right after the successful release, complain that they spend too much time resolving merge conflicts. Implementing a new feature requires you to change the same huge class, conflicting with the code produced by other people.</p> <h2 id=solution>Solution<a class=headerlink href=#solution title="Permanent link">&para;</a></h2> <p>The Strategy pattern suggests that you take a class that does something specific in a lot of different ways and extract all of these algorithms into separate classes called <em>strategies</em>.</p> <p>The original class, called <em>context</em>, must have a field for storing a reference to one of the strategies. The context delegates the work to a linked strategy object instead of executing it on its own.</p> <p>The context isn’t responsible for selecting an appropriate algorithm for the job. Instead, the client passes the desired strategy to the context. In fact, the context doesn’t know much about strategies. It works with all strategies through the same generic interface, which only exposes a single method for triggering the algorithm encapsulated within the selected strategy.</p> <p>This way the context becomes independent of concrete strategies, so you can add new algorithms or modify existing ones without changing the code of the context or other strategies.</p> <p>In our navigation app, each routing algorithm can be extracted to its own class with a single <code>buildRoute</code> method. The method accepts an origin and destination and returns a collection of the route’s checkpoints.</p> <p>Even though given the same arguments, each routing class might build a different route, the main navigator class doesn’t really care which algorithm is selected since its primary job is to render a set of checkpoints on the map. The class has a method for switching the active routing strategy, so its clients, such as the buttons in the user interface, can replace the currently selected routing behavior with another one.</p> <h2 id=applicability>Applicability<a class=headerlink href=#applicability title="Permanent link">&para;</a></h2> <p>Use the Strategy pattern when you want to use different variants of an algorithm within an object and be able to switch from one algorithm to another during runtime.</p> <h2 id=code>Code<a class=headerlink href=#code title="Permanent link">&para;</a></h2> <p>In this example we have a product order that needs to be shipped from a warehouse to a customer. Different shipping companies are evaluated to determine the best price. This can be useful with shopping carts where customers select their shipping preferences and the selected Strategy returns the estimated cost.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=cm>/**</span>
<span class=cm> * 1. Context</span>
<span class=cm> */</span>
<span class=kd>var</span> <span class=nx>Shipping</span> <span class=o>=</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>company</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span><span class=p>;</span>
<span class=p>};</span>

<span class=nx>Shipping</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>setStrategy</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>company</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>company</span> <span class=o>=</span> <span class=nx>company</span><span class=p>;</span>
  <span class=p>},</span>

  <span class=nx>calculate</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=kr>package</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>company</span><span class=p>.</span><span class=nx>calculate</span><span class=p>(</span><span class=kr>package</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>};</span>

<span class=cm>/**</span>
<span class=cm> * 2. Strategy - 3 strategies classes</span>
<span class=cm> */</span>
<span class=kd>var</span> <span class=nx>UPS</span> <span class=o>=</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>calculate</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=kr>package</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// calculations...</span>
    <span class=k>return</span> <span class=s2>&quot;$45.95&quot;</span><span class=p>;</span>
  <span class=p>};</span>
<span class=p>};</span>

<span class=kd>var</span> <span class=nx>USPS</span> <span class=o>=</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>calculate</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=kr>package</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// calculations...</span>
    <span class=k>return</span> <span class=s2>&quot;$39.40&quot;</span><span class=p>;</span>
  <span class=p>};</span>
<span class=p>};</span>

<span class=kd>var</span> <span class=nx>Fedex</span> <span class=o>=</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>calculate</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=kr>package</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// calculations...</span>
    <span class=k>return</span> <span class=s2>&quot;$43.20&quot;</span><span class=p>;</span>
  <span class=p>};</span>
<span class=p>};</span>

<span class=cm>/**</span>
<span class=cm> * 3. Client</span>
<span class=cm> */</span>
<span class=kd>function</span> <span class=nx>run</span><span class=p>()</span> <span class=p>{</span>
  <span class=kd>var</span> <span class=kr>package</span> <span class=o>=</span> <span class=p>{</span>
    <span class=nx>from</span><span class=o>:</span> <span class=s2>&quot;76712&quot;</span><span class=p>,</span>
    <span class=nx>to</span><span class=o>:</span> <span class=s2>&quot;10012&quot;</span><span class=p>,</span>
    <span class=nx>weigth</span><span class=o>:</span> <span class=s2>&quot;lkg&quot;</span>
  <span class=p>};</span>

  <span class=c1>// the 3 strategies</span>

  <span class=kd>var</span> <span class=nx>ups</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>UPS</span><span class=p>();</span>
  <span class=kd>var</span> <span class=nx>usps</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>USPS</span><span class=p>();</span>
  <span class=kd>var</span> <span class=nx>fedex</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Fedex</span><span class=p>();</span>

  <span class=kd>var</span> <span class=nx>shipping</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Shipping</span><span class=p>();</span>

  <span class=nx>shipping</span><span class=p>.</span><span class=nx>setStrategy</span><span class=p>(</span><span class=nx>ups</span><span class=p>);</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;UPS Strategy: &quot;</span> <span class=o>+</span> <span class=nx>shipping</span><span class=p>.</span><span class=nx>calculate</span><span class=p>(</span><span class=kr>package</span><span class=p>));</span>
  <span class=nx>shipping</span><span class=p>.</span><span class=nx>setStrategy</span><span class=p>(</span><span class=nx>usps</span><span class=p>);</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;USPS Strategy: &quot;</span> <span class=o>+</span> <span class=nx>shipping</span><span class=p>.</span><span class=nx>calculate</span><span class=p>(</span><span class=kr>package</span><span class=p>));</span>
  <span class=nx>shipping</span><span class=p>.</span><span class=nx>setStrategy</span><span class=p>(</span><span class=nx>fedex</span><span class=p>);</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;Fedex Strategy: &quot;</span> <span class=o>+</span> <span class=nx>shipping</span><span class=p>.</span><span class=nx>calculate</span><span class=p>(</span><span class=kr>package</span><span class=p>));</span>
<span class=p>}</span>

<span class=cm>/**</span>
<span class=cm> * 4. execute</span>
<span class=cm> */</span>
<span class=nx>run</span><span class=p>();</span>
</pre></div> </td></tr></table> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Abhay Garg </div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/application.c648116f.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>