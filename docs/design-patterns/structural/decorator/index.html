<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Notebook collections"><link href=https://abhaydgarg.github.io/Notebook/index.html/design-patterns/structural/decorator/ rel=canonical><meta name=author content="Abhay Garg"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.2"><title>Decorator - Notebook</title><link rel=stylesheet href=../../../assets/stylesheets/application.30686662.css><link rel=stylesheet href=../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#2196f3><script src=../../../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono&display=fallback"><style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#decorator tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Notebook </span> <span class=md-header-nav__topic> Decorator </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-nav__button md-logo"> <i class=md-icon></i> </a> Notebook </label> <div class=md-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../computer-science/ title=CS class=md-nav__link> CS </a> </li> <li class=md-nav__item> <a href=../../../parser/ title=Parser class=md-nav__link> Parser </a> </li> <li class=md-nav__item> <a href=../../../data-structure-and-algorithms/ title="Data Structure and Algorithms" class=md-nav__link> Data Structure and Algorithms </a> </li> <li class=md-nav__item> <a href=../../../oops/ title=OOPS class=md-nav__link> OOPS </a> </li> <li class=md-nav__item> <a href=../../ title="Design Patterns" class=md-nav__link> Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../regex/ title=Regex class=md-nav__link> Regex </a> </li> <li class=md-nav__item> <a href=../../../git/ title=GIT class=md-nav__link> GIT </a> </li> <li class=md-nav__item> <a href=../../../css/ title=CSS class=md-nav__link> CSS </a> </li> <li class=md-nav__item> <a href=../../../linters/ title=Linters class=md-nav__link> Linters </a> </li> <li class=md-nav__item> <a href=../../../javascript/ title=Javascript class=md-nav__link> Javascript </a> </li> <li class=md-nav__item> <a href=../../../typescript/ title=Typescript class=md-nav__link> Typescript </a> </li> <li class=md-nav__item> <a href=../../../nodejs/ title=Node.js class=md-nav__link> Node.js </a> </li> <li class=md-nav__item> <a href=../../../react/ title=React class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../../react-native/ title="React Native" class=md-nav__link> React Native </a> </li> <li class=md-nav__item> <a href=../../../redux-saga/ title="Redux Saga" class=md-nav__link> Redux Saga </a> </li> <li class=md-nav__item> <a href=../../../expressjs/ title=Express.js class=md-nav__link> Express.js </a> </li> <li class=md-nav__item> <a href=../../../graphql/ title=GraphQL class=md-nav__link> GraphQL </a> </li> <li class=md-nav__item> <a href=../../../rxjs/ title=RxJS class=md-nav__link> RxJS </a> </li> <li class=md-nav__item> <a href=../../../mysql/ title=MySQL class=md-nav__link> MySQL </a> </li> <li class=md-nav__item> <a href=../../../mongodb/ title=MongoDB class=md-nav__link> MongoDB </a> </li> <li class=md-nav__item> <a href=../../../web-security/ title="Web Security" class=md-nav__link> Web Security </a> </li> <li class=md-nav__item> <a href=../../../rust/ title=Rust class=md-nav__link> Rust </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#problem class=md-nav__link> Problem </a> </li> <li class=md-nav__item> <a href=#applicability class=md-nav__link> Applicability </a> </li> <li class=md-nav__item> <a href=#code class=md-nav__link> Code </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/abhaydgarg/Notebook/tree/master/src/design-patterns/structural/decorator.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=decorator>Decorator<a class=headerlink href=#decorator title="Permanent link">&para;</a></h1> <p>It lets you <strong>attach new behaviors to objects by placing these objects inside special wrapper.</strong></p> <p>Attach additional responsibilities to an object dynamically. Decorators provide a flexible alternative to subclassing for extending functionality. It does not use inheritance or sub classing to extend the functionality of class.</p> <p>You want to add behavior or state to individual objects at run-time. Inheritance is not feasible because it is static and applies to an entire class.</p> <p>The ability to add new behavior at runtime is accomplished by a Decorator object which ‘wraps itself’ around the original object. Multiple decorators can add or override functionality to the original object.</p> <p>Decorators provide flexibility to statically typed languages by allowing runtime changes as opposed to inheritance which takes place at compile time.</p> <h2 id=problem>Problem<a class=headerlink href=#problem title="Permanent link">&para;</a></h2> <p>Imagine that you’re working on a notification library which lets other programs notify their users about important events.</p> <p>The initial version of the library was based on the <code>Notifier</code> class that had only a few fields, a constructor and a single <code>send</code> method. The method could accept a message argument from a client and send the message to a list of emails that were passed to the notifier via its constructor. A third-party app which acted as a client was supposed to create and configure the notifier object once, and then use it each time something important happened.</p> <p>At some point, you realize that users of the library expect more than just email notifications. Many of them would like to receive an SMS about critical issues. Others would like to be notified on Facebook and, of course, the corporate users would love to get Slack notifications.</p> <p>How hard can that be? You extended the <code>Notifier</code> class and put the additional notification methods into new subclasses. Now the client was supposed to instantiate the desired notification class and use it for all further notifications.</p> <p>But then someone reasonably asked you, “Why can’t you use several notification types at once? If your house is on fire, you’d probably want to be informed through every channel.”</p> <p>You tried to address that problem by creating special subclasses which combined several notification methods within one class. However, it quickly became apparent that this approach would bloat the code immensely, not only the library code but the client code as well.</p> <p>Extending a class is the first thing that comes to mind when you need to alter an object’s behavior. However, inheritance has several serious caveats that you need to be aware of.</p> <ul> <li>Inheritance is static. You can’t alter the behavior of an existing object at runtime. You can only replace the whole object with another one that’s created from a different subclass.</li> <li>Subclasses can have just one parent class. In most languages, inheritance doesn’t let a class inherit behaviors of multiple classes at the same time.</li> </ul> <h2 id=applicability>Applicability<a class=headerlink href=#applicability title="Permanent link">&para;</a></h2> <ol> <li> <p>Use the Decorator pattern when you need to be able to assign extra behaviors to objects at runtime without breaking the code that uses these objects.</p> </li> <li> <p>Use the pattern when it’s awkward or not possible to extend an object’s behavior using inheritance. Many programming languages have the final keyword that can be used to prevent further extension of a class. For a final class, the only way to reuse the existing behavior would be to wrap the class with your own wrapper, using the Decorator pattern.</p> </li> </ol> <h2 id=code>Code<a class=headerlink href=#code title="Permanent link">&para;</a></h2> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>function</span> <span class=nx>Sale</span><span class=p>(</span><span class=nx>price</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>price</span> <span class=o>=</span> <span class=p>(</span><span class=nx>price</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=o>||</span> <span class=mi>100</span><span class=p>;</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>decorators_list</span> <span class=o>=</span> <span class=p>[];</span>
<span class=p>}</span>

<span class=nx>Sale</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>decorate</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>decorator</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>decorators_list</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>decorator</span><span class=p>);</span>
<span class=p>};</span>

<span class=nx>Sale</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>getPrice</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
  <span class=kd>var</span> <span class=nx>price</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>price</span><span class=p>,</span>
    <span class=nx>i</span><span class=p>,</span>
    <span class=nx>max</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>decorators_list</span><span class=p>.</span><span class=nx>length</span><span class=p>,</span>
    <span class=nx>name</span><span class=p>;</span>
  <span class=k>for</span> <span class=p>(</span><span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>max</span><span class=p>;</span> <span class=nx>i</span> <span class=o>+=</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>name</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>decorators_list</span><span class=p>[</span><span class=nx>i</span><span class=p>];</span>
    <span class=nx>price</span> <span class=o>=</span> <span class=nx>Sale</span><span class=p>.</span><span class=nx>decorators</span><span class=p>[</span><span class=nx>name</span><span class=p>].</span><span class=nx>getPrice</span><span class=p>(</span><span class=nx>price</span><span class=p>);</span>
  <span class=p>}</span>
  <span class=k>return</span> <span class=nx>price</span><span class=p>;</span>
<span class=p>};</span>

<span class=nx>Sale</span><span class=p>.</span><span class=nx>decorators</span> <span class=o>=</span> <span class=p>{};</span>

<span class=nx>Sale</span><span class=p>.</span><span class=nx>decorators</span><span class=p>.</span><span class=nx>fedtax</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>getPrice</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>price</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>price</span> <span class=o>+</span> <span class=nx>price</span> <span class=o>*</span> <span class=mi>5</span> <span class=o>/</span> <span class=mi>100</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>};</span>

<span class=nx>Sale</span><span class=p>.</span><span class=nx>decorators</span><span class=p>.</span><span class=nx>quebec</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>getPrice</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>price</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>price</span> <span class=o>+</span> <span class=nx>price</span> <span class=o>*</span> <span class=mf>7.5</span> <span class=o>/</span> <span class=mi>100</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>};</span>

<span class=nx>Sale</span><span class=p>.</span><span class=nx>decorators</span><span class=p>.</span><span class=nx>money</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>getPrice</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>price</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=s2>&quot;$&quot;</span> <span class=o>+</span> <span class=nx>price</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>};</span>

<span class=c1>//# Client</span>
<span class=kd>var</span> <span class=nx>sale</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Sale</span><span class=p>(</span><span class=mi>100</span><span class=p>);</span>       <span class=c1>// the price is 100 dollars</span>
<span class=nx>sale</span> <span class=o>=</span> <span class=nx>sale</span><span class=p>.</span><span class=nx>decorate</span><span class=p>(</span><span class=s1>&#39;fedtax&#39;</span><span class=p>);</span> <span class=c1>// add federal tax</span>
<span class=nx>sale</span> <span class=o>=</span> <span class=nx>sale</span><span class=p>.</span><span class=nx>decorate</span><span class=p>(</span><span class=s1>&#39;quebec&#39;</span><span class=p>);</span> <span class=c1>// add provincial tax</span>
<span class=nx>sale</span> <span class=o>=</span> <span class=nx>sale</span><span class=p>.</span><span class=nx>decorate</span><span class=p>(</span><span class=s1>&#39;money&#39;</span><span class=p>);</span>  <span class=c1>// format like money</span>
<span class=nx>sale</span><span class=p>.</span><span class=nx>getPrice</span><span class=p>();</span>

<span class=c1>// In another scenario, the buyer could be in a province</span>
<span class=c1>// that doesn&#39;t have a provincial tax,</span>
<span class=c1>// so you can do:</span>
<span class=kd>var</span> <span class=nx>sale</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Sale</span><span class=p>(</span><span class=mi>100</span><span class=p>);</span>       <span class=c1>// the price is 100 dollars</span>
<span class=nx>sale</span> <span class=o>=</span> <span class=nx>sale</span><span class=p>.</span><span class=nx>decorate</span><span class=p>(</span><span class=s1>&#39;fedtax&#39;</span><span class=p>);</span> <span class=c1>// add federal tax</span>
<span class=nx>sale</span><span class=p>.</span><span class=nx>getPrice</span><span class=p>();</span>
</pre></div> </td></tr></table> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Abhay Garg </div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/application.c648116f.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>