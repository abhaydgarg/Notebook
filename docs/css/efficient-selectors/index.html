<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Notebook collections"><link href=https://abhaydgarg.github.io/Notebook/index.html/css/efficient-selectors/ rel=canonical><meta name=author content="Abhay Garg"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.2"><title>Efficient selectors - Notebook</title><link rel=stylesheet href=../../assets/stylesheets/application.30686662.css><link rel=stylesheet href=../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#2196f3><script src=../../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono&display=fallback"><style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#efficient-selectors tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Notebook </span> <span class=md-header-nav__topic> Efficient selectors </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-nav__button md-logo"> <i class=md-icon></i> </a> Notebook </label> <div class=md-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../computer-science/ title=CS class=md-nav__link> CS </a> </li> <li class=md-nav__item> <a href=../../parser/ title=Parser class=md-nav__link> Parser </a> </li> <li class=md-nav__item> <a href=../../data-structure-and-algorithms/ title="Data Structure and Algorithms" class=md-nav__link> Data Structure and Algorithms </a> </li> <li class=md-nav__item> <a href=../../oops/ title=OOPS class=md-nav__link> OOPS </a> </li> <li class=md-nav__item> <a href=../../design-patterns/ title="Design Patterns" class=md-nav__link> Design Patterns </a> </li> <li class=md-nav__item> <a href=../../regex/ title=Regex class=md-nav__link> Regex </a> </li> <li class=md-nav__item> <a href=../../git/ title=GIT class=md-nav__link> GIT </a> </li> <li class=md-nav__item> <a href=../ title=CSS class=md-nav__link> CSS </a> </li> <li class=md-nav__item> <a href=../../rest-api/ title="REST API" class=md-nav__link> REST API </a> </li> <li class=md-nav__item> <a href=../../javascript/ title=Javascript class=md-nav__link> Javascript </a> </li> <li class=md-nav__item> <a href=../../nodejs/ title=Node.js class=md-nav__link> Node.js </a> </li> <li class=md-nav__item> <a href=../../npm/ title=NPM class=md-nav__link> NPM </a> </li> <li class=md-nav__item> <a href=../../redux/ title=Redux class=md-nav__link> Redux </a> </li> <li class=md-nav__item> <a href=../../react/ title=React class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../react-native/ title="React Native" class=md-nav__link> React Native </a> </li> <li class=md-nav__item> <a href=../../mongodb/ title=MongoDB class=md-nav__link> MongoDB </a> </li> <li class=md-nav__item> <a href=../../web-security/ title="Web Security" class=md-nav__link> Web Security </a> </li> <li class=md-nav__item> <a href=../../rust/ title=Rust class=md-nav__link> Rust </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#reading-selectors class=md-nav__link> Reading selectors </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example class=md-nav__link> Example </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#over-qualifying-selectors class=md-nav__link> Over qualifying selectors </a> </li> <li class=md-nav__item> <a href=#avoid-the-descendant-selector class=md-nav__link> Avoid the descendant selector </a> </li> <li class=md-nav__item> <a href=#avoid-qualifying-id-and-class-names-with-type-selectors class=md-nav__link> Avoid qualifying ID and class names with type selectors </a> </li> <li class=md-nav__item> <a href=#only-be-specific-when-you-need-to-be class=md-nav__link> Only be specific when you need to be </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/abhaydgarg/Notebook/tree/master/src/css/efficient-selectors.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=efficient-selectors>Efficient selectors<a class=headerlink href=#efficient-selectors title="Permanent link">&para;</a></h1> <p>The order of more to less efficient CSS selectors goes:</p> <ol> <li>ID <code>#header</code></li> <li>Class <code>.header</code></li> <li>Type <code>div</code></li> <li>Adjacent sibling <code>h2 + p</code></li> <li>Child <code>li &gt; ul</code></li> <li>Descendant <code>ul a</code> - <strong>worst</strong></li> <li>Universal <code>*</code></li> <li>Attribute <code>[type="text"]</code></li> <li>Pseudo-classes/elements <code>a:hover</code></li> </ol> <h2 id=reading-selectors>Reading selectors<a class=headerlink href=#reading-selectors title="Permanent link">&para;</a></h2> <p>You can have standalone selectors such as <code>#nav</code>, which will select any element with an ID of 'nav', or you can have combined selectors such as <code>#nav a</code>, which will match any anchors within any element with an ID of 'nav'.</p> <p>Now, we read these left-to-right. We see that we're looking out for <code>#nav</code> and then any <code>a</code> elements inside there. <strong>Browsers read these differently; browsers read selectors right-to-left.</strong> Where we see a <code>#nav</code> with an <code>a</code> in it, browsers see an <code>a</code> in a <code>#nav</code>. This subtle difference has a huge impact on selector performance, and is a very valuable thing to learn.</p> <p>The right most selector is also known as the <strong>key selector</strong>.</p> <p>The key selector is what the browser looks for first.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c>/** .intro is a key selector - the right most **/</span>
<span class=p>#</span><span class=nn>content</span> <span class=p>.</span><span class=nc>intro</span> <span class=p>{}</span>
</pre></div> </td></tr></table> <p>The browser will look for all instances of <code>.intro</code> (of which there aren't likely to be many) and then go looking up the DOM tree to see if the matched key selector lives in an element with an ID of <code>content</code>.</p> <p>However, the following selector is not very performant at all:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=p>#</span><span class=nn>content</span> <span class=o>*</span> <span class=p>{}</span>
</pre></div> </td></tr></table> <p>What this does is looks at every single element on the page (that's every single one) and then looks to see if any of those live in the <code>#content</code> parent. This is a very un-performant selector as the key selector is a very expensive one.</p> <p>Using this knowledge we can make better decisions as to our classing and selecting of elements.</p> <h3 id=example>Example<a class=headerlink href=#example title="Permanent link">&para;</a></h3> <p>This selector therefore is unreasonably expensive and not very performant:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=p>#</span><span class=nn>social</span> <span class=nt>a</span> <span class=p>{}</span>
</pre></div> </td></tr></table> <p>What will happen here is the browser will access all the thousands of links on that page before settling on the four inside of the <code>#social</code> section. Our key selector matches far too many other elements that we aren't interested in.</p> <p>To make selector efficient and fast. Rewrite HTML as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=p>&lt;</span><span class=nt>ul</span> <span class=na>id</span><span class=o>=</span><span class=s>&quot;social&quot;</span><span class=p>&gt;</span>
 <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&quot;#&quot;</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;social-link twitter&quot;</span><span class=p>&gt;</span>Twitter<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
 <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&quot;#&quot;</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;social-link facebook&quot;</span><span class=p>&gt;</span>Facebook<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
 <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&quot;#&quot;</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;social-link dribble&quot;</span><span class=p>&gt;</span>Dribbble<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
 <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&quot;#&quot;</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;social-link gplus&quot;</span><span class=p>&gt;</span>Google+<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</pre></div> </td></tr></table> <p>with more efficient CSS:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=p>#</span><span class=nn>social</span> <span class=p>.</span><span class=nc>social-link</span> <span class=p>{}</span>
</pre></div> </td></tr></table> <h2 id=over-qualifying-selectors>Over qualifying selectors<a class=headerlink href=#over-qualifying-selectors title="Permanent link">&para;</a></h2> <p>Keep selectors short and limit the number of elements in each selector to <strong>three</strong>. <strong>The single biggest cause of slowdown is too many selectors for CSS rules</strong></p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c>/*Bad*/</span>
<span class=nt>html</span> <span class=nt>body</span> <span class=p>.</span><span class=nc>wrapper</span> <span class=p>#</span><span class=nn>content</span> <span class=nt>a</span> <span class=p>{}</span>

<span class=c>/*Good*/</span>
<span class=p>#</span><span class=nn>content</span> <span class=nt>a</span> <span class=p>{}</span>
</pre></div> </td></tr></table> <p>There is just too much going on here, and at least three of these selectors are totally unnecessary. Well the first one means that the browser has to look for all <code>a</code> elements, then check that they're in an element with an ID of <code>content</code>, then so on and so on right the way up to the html. This is causing the browser way too many checks that we really don't need.</p> <h2 id=avoid-the-descendant-selector>Avoid the descendant selector<a class=headerlink href=#avoid-the-descendant-selector title="Permanent link">&para;</a></h2> <p>The descendant selector is the most expensive selector in CSS. It is dreadfully expensive, especially if the selector is in the Tag(p, a etc) or Universal Category (*).</p> <p>For instance, the performances are so bad, that descendant selectors are banned in Firefox User Interface CSS, without a specific justification. It's a good idea to do the same on your web pages. Try to minimize them as much as possible and even when you use them you should use them judiciously.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c>/*BAD*/</span>
<span class=nt>html</span> <span class=nt>body</span> <span class=nt>ul</span> <span class=nt>li</span> <span class=nt>a</span> <span class=p>{</span> <span class=p>}</span>

<span class=c>/*BETTER PERFORMANCE THAN DESCENDANT*/</span>
<span class=nt>ul</span> <span class=o>&gt;</span> <span class=nt>li</span> <span class=o>&gt;</span> <span class=nt>a</span> <span class=p>{</span> <span class=p>}</span>
</pre></div> </td></tr></table> <h2 id=avoid-qualifying-id-and-class-names-with-type-selectors>Avoid qualifying ID and class names with type selectors<a class=headerlink href=#avoid-qualifying-id-and-class-names-with-type-selectors title="Permanent link">&para;</a></h2> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c>/* Not recommended */</span>
<span class=nt>ul</span><span class=p>#</span><span class=nn>example</span> <span class=p>{}</span>
<span class=nt>div</span><span class=p>.</span><span class=nc>error</span> <span class=p>{}</span>

<span class=c>/* Recommended */</span>
<span class=p>#</span><span class=nn>example</span> <span class=p>{}</span>
<span class=p>.</span><span class=nc>error</span> <span class=p>{}</span>
</pre></div> </td></tr></table> <h2 id=only-be-specific-when-you-need-to-be>Only be specific when you need to be<a class=headerlink href=#only-be-specific-when-you-need-to-be title="Permanent link">&para;</a></h2> <p>Use the most general rule you can to get the job done and only write rules that are more specific when the situation presents itself.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c>/* The two rules below would accomplish the same thing. */</span>

<span class=p>#</span><span class=nn>primary_content</span> <span class=nt>p</span> <span class=p>{</span>
 <span class=k>font-size</span><span class=p>:</span> <span class=mf>0.875</span><span class=kt>em</span><span class=p>;</span>
<span class=p>}</span>

<span class=nt>p</span> <span class=p>{</span>
 <span class=k>font-size</span><span class=p>:</span> <span class=mf>0.875</span><span class=kt>em</span><span class=p>;</span>
<span class=p>}</span>
</pre></div> </td></tr></table> <p>Now it's true that the second rule would apply to every paragraph tag on the site. But at first this is fine. Imagine how simple it is to add more specific rules later. As projects grow and styles become inherently more complex by necessity, the situations where we need to become more specific will naturally present themselves. If we are generic from the start we can take advantage of the cascade and overwrite rules with more specific rules when we need to.</p> <p>This seems like a fundamental lesson in CSS. We can write styles that apply to many objects and the more specific rules will take precedence.</p> <ul> <li> <p>The complexity of your style-sheet is directly correlated to how specific your selectors are.</p> </li> <li> <p>Re-factoring CSS selectors to be less specific is exponentially more difficult than simply adding specific rules as situations arise.</p> </li> </ul> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Abhay Garg </div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/application.c648116f.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>