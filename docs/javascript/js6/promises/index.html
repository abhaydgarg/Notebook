<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Notebook collections"><link href=https://abhaydgarg.github.io/Notebook/index.html/javascript/js6/promises/ rel=canonical><meta name=author content="Abhay Garg"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.2"><title>Promises - Notebook</title><link rel=stylesheet href=../../../assets/stylesheets/application.30686662.css><link rel=stylesheet href=../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#2196f3><script src=../../../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono&display=fallback"><style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#promises tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Notebook </span> <span class=md-header-nav__topic> Promises </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-nav__button md-logo"> <i class=md-icon></i> </a> Notebook </label> <div class=md-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../computer-science/ title=CS class=md-nav__link> CS </a> </li> <li class=md-nav__item> <a href=../../../parser/ title=Parser class=md-nav__link> Parser </a> </li> <li class=md-nav__item> <a href=../../../data-structure-and-algorithms/ title="Data structure and algorithms" class=md-nav__link> Data structure and algorithms </a> </li> <li class=md-nav__item> <a href=../../../oops/ title=OOPS class=md-nav__link> OOPS </a> </li> <li class=md-nav__item> <a href=../../../design-patterns/ title="Design patterns" class=md-nav__link> Design patterns </a> </li> <li class=md-nav__item> <a href=../../../regex/ title=Regex class=md-nav__link> Regex </a> </li> <li class=md-nav__item> <a href=../../../git/ title=GIT class=md-nav__link> GIT </a> </li> <li class=md-nav__item> <a href=../../../css/ title=CSS class=md-nav__link> CSS </a> </li> <li class=md-nav__item> <a href=../../../mysql/ title=MySQL class=md-nav__link> MySQL </a> </li> <li class=md-nav__item> <a href=../../../mongodb/ title=MongoDB class=md-nav__link> MongoDB </a> </li> <li class=md-nav__item> <a href=../../ title=Javascript class=md-nav__link> Javascript </a> </li> <li class=md-nav__item> <a href=../../../nodejs/ title=Node.js class=md-nav__link> Node.js </a> </li> <li class=md-nav__item> <a href=../../../expressjs/ title=Express.js class=md-nav__link> Express.js </a> </li> <li class=md-nav__item> <a href=../../../react/ title=React class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../../linters/ title=Linters class=md-nav__link> Linters </a> </li> <li class=md-nav__item> <a href=../../../graphql/ title=GraphQL class=md-nav__link> GraphQL </a> </li> <li class=md-nav__item> <a href=../../../redux-saga/ title="Redux saga" class=md-nav__link> Redux saga </a> </li> <li class=md-nav__item> <a href=../../../rxjs/ title=RxJS class=md-nav__link> RxJS </a> </li> <li class=md-nav__item> <a href=../../../typescript/ title=Typescript class=md-nav__link> Typescript </a> </li> <li class=md-nav__item> <a href=../../../web-security/ title="Web security" class=md-nav__link> Web security </a> </li> <li class=md-nav__item> <a href=../../../react-native/ title="React native" class=md-nav__link> React native </a> </li> <li class=md-nav__item> <a href=../../../rust/ title=Rust class=md-nav__link> Rust </a> </li> <li class=md-nav__item> <a href=../../../python/ title=Python class=md-nav__link> Python </a> </li> <li class=md-nav__item> <a href=../../../php/ title=PHP class=md-nav__link> PHP </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#catch class=md-nav__link> catch() </a> </li> <li class=md-nav__item> <a href=#creating-promise class=md-nav__link> Creating promise </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#unsettle-promise-promise-that-is-added-to-job-scheduling class=md-nav__link> Unsettle promise - Promise that is added to job scheduling </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#job-scheduling class=md-nav__link> Job scheduling </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#settle-promise-promise-that-is-not-added-to-job-scheduling class=md-nav__link> Settle promise - Promise that is not added to job scheduling </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#promiseresolve class=md-nav__link> Promise.resolve() </a> </li> <li class=md-nav__item> <a href=#promisereject class=md-nav__link> Promise.reject() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#executor-errors class=md-nav__link> Executor errors </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#chaining-promises class=md-nav__link> Chaining promises </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#returning-values-in-promise-chains class=md-nav__link> Returning values in promise chains </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#promiseall class=md-nav__link> Promise.all() </a> </li> <li class=md-nav__item> <a href=#things-to-understand-to-grasp-promise-better class=md-nav__link> Things to understand to grasp Promise better </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1 class=md-nav__link> [1] </a> </li> <li class=md-nav__item> <a href=#2 class=md-nav__link> [2] </a> </li> <li class=md-nav__item> <a href=#3 class=md-nav__link> [3] </a> </li> <li class=md-nav__item> <a href=#4-promiseresolve class=md-nav__link> [4] Promise.resolve() </a> </li> <li class=md-nav__item> <a href=#5-promisereject class=md-nav__link> [5] Promise.reject() </a> </li> <li class=md-nav__item> <a href=#6-promiseobjectthenonfulfilled-onrejected class=md-nav__link> [6] promiseObject.then(onFulfilled[, onRejected]) </a> </li> <li class=md-nav__item> <a href=#7-do-not-nest-one-promise-in-to-another-usethen-method-to-use-another-pending-promise class=md-nav__link> [7] Do not nest one promise in to another. Usethen method to use another pending promise. </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/abhaydgarg/Notebook/tree/master/src/javascript/js6/promises.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=promises>Promises<a class=headerlink href=#promises title="Permanent link">&para;</a></h1> <p>Each promise goes through a short lifecycle starting in the <em>pending</em> state, which indicates that the asynchronous operation hasn't completed yet. A pending promise is considered <em>unsettled</em>. The promise in the last example is in the pending state as soon as the <code>readFile()</code> function returns it. Once the asynchronous operation completes, the promise is considered <em>settled</em> and enters one of two possible states:</p> <ol> <li><em>Fulfilled</em>: The promise's asynchronous operation has completed successfully.</li> <li><em>Rejected</em>: The promise's asynchronous operation didn't complete successfully due to either an error or some other cause.</li> </ol> <p>An internal <code>[[PromiseState]]</code> property is set to <code>"pending"</code>, <code>"fulfilled"</code>, or <code>"rejected"</code> to reflect the promise's state. This property isn't exposed on promise objects, so you can't determine which state the promise is in programmatically. But you can take a specific action when a promise changes state by using the <code>then()</code> method.</p> <p>The <code>then()</code> method is present on all promises and takes two arguments. The first argument is a function to call when the promise is fulfilled. Any additional data related to the asynchronous operation is passed to this fulfillment function. The second argument is a function to call when the promise is rejected. Similar to the fulfillment function, the rejection function is passed any additional data related to the rejection.</p> <h2 id=catch>catch()<a class=headerlink href=#catch title="Permanent link">&para;</a></h2> <p>Promises also have a <code>catch()</code> method that behaves the same as <code>then()</code> when only a rejection handler is passed. For example, the following <code>catch()</code> and <code>then()</code> calls are functionally equivalent:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nx>promise</span><span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// rejection</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
<span class=p>});</span>

<span class=c1>// is the same as:</span>

<span class=nx>promise</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// rejection</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <h2 id=creating-promise>Creating promise<a class=headerlink href=#creating-promise title="Permanent link">&para;</a></h2> <h3 id=unsettle-promise-promise-that-is-added-to-job-scheduling>Unsettle promise - Promise that is added to job scheduling<a class=headerlink href=#unsettle-promise-promise-that-is-added-to-job-scheduling title="Permanent link">&para;</a></h3> <p>New promises are created using the <code>Promise</code> constructor. This constructor accepts a single argument: a function called the <em>executor</em>, which contains the code to initialize the promise. The executor is passed two functions named <code>resolve()</code> and <code>reject()</code> as arguments. The <code>resolve()</code> function is called when the executor has finished successfully to signal that the promise is ready to be resolved, while the <code>reject()</code> function indicates that the executor has failed.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// Node.js example</span>

<span class=kd>let</span> <span class=nx>fs</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&quot;fs&quot;</span><span class=p>);</span>

<span class=kd>function</span> <span class=nx>readFile</span><span class=p>(</span><span class=nx>filename</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>{</span>

        <span class=c1>// trigger the asynchronous operation</span>
        <span class=nx>fs</span><span class=p>.</span><span class=nx>readFile</span><span class=p>(</span><span class=nx>filename</span><span class=p>,</span> <span class=p>{</span> <span class=nx>encoding</span><span class=o>:</span> <span class=s2>&quot;utf8&quot;</span> <span class=p>},</span> <span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>contents</span><span class=p>)</span> <span class=p>{</span>

            <span class=c1>// check for errors</span>
            <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
                <span class=nx>reject</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
                <span class=k>return</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=c1>// the read succeeded</span>
            <span class=nx>resolve</span><span class=p>(</span><span class=nx>contents</span><span class=p>);</span>

        <span class=p>});</span>
    <span class=p>});</span>
<span class=p>}</span>

<span class=kd>let</span> <span class=nx>promise</span> <span class=o>=</span> <span class=nx>readFile</span><span class=p>(</span><span class=s2>&quot;example.txt&quot;</span><span class=p>);</span>

<span class=c1>// listen for both fulfillment and rejection</span>
<span class=nx>promise</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>contents</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// fulfillment</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>contents</span><span class=p>);</span>
<span class=p>},</span> <span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// rejection</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <p>Keep in mind that the executor runs immediately when <code>readFile()</code> is called. When either <code>resolve()</code> or <code>reject()</code> is called inside the executor, a job is added to the job queue to resolve the promise. This is called <em><strong>job scheduling</strong></em>, and if you've ever used the <code>setTimeout()</code>or <code>setInterval()</code> functions, then you're already familiar with it. In job scheduling, you add a new job to the job queue to say, "Don't execute this right now, but execute it later."</p> <h4 id=job-scheduling>Job scheduling<a class=headerlink href=#job-scheduling title="Permanent link">&para;</a></h4> <p>The promise executor executes immediately, before anything that appears after it in the source code. For instance:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>let</span> <span class=nx>promise</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;Promise&quot;</span><span class=p>);</span>
    <span class=nx>resolve</span><span class=p>();</span>
<span class=p>});</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;Hi!&quot;</span><span class=p>);</span>
</pre></div> </td></tr></table> <p>The output for this code is:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>Promise</span>
<span class=n>Hi</span><span class=o>!</span>
</pre></div> </td></tr></table> <p>Calling <code>resolve()</code> triggers an asynchronous operation. Functions passed to <code>then()</code> and <code>catch()</code> are executed asynchronously, as these are also added to the job queue. Here's an example:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>let</span> <span class=nx>promise</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;Promise&quot;</span><span class=p>);</span>
    <span class=nx>resolve</span><span class=p>();</span>
<span class=p>});</span>

<span class=nx>promise</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;Resolved.&quot;</span><span class=p>);</span>
<span class=p>});</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;Hi!&quot;</span><span class=p>);</span>
</pre></div> </td></tr></table> <p>The output for this example is:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>Promise</span>
<span class=n>Hi</span><span class=o>!</span>
<span class=n>Resolved</span>
</pre></div> </td></tr></table> <p>Note that even though the call to <code>then()</code> appears before the <code>console.log("Hi!")</code> line, it doesn't actually execute until later (unlike the executor). That's because fulfillment and rejection handlers are always added to the end of the job queue after the executor has completed.</p> <h3 id=settle-promise-promise-that-is-not-added-to-job-scheduling>Settle promise - Promise that is not added to job scheduling<a class=headerlink href=#settle-promise-promise-that-is-not-added-to-job-scheduling title="Permanent link">&para;</a></h3> <p>The <code>Promise</code> constructor is the best way to create unsettled promises due to the dynamic nature of what the promise executor does. But if you want a promise to represent just a single known value, then it doesn't make sense to schedule a job that simply passes a value to the <code>resolve()</code> function. Instead, there are two methods that create settled promises given a specific value.</p> <h4 id=promiseresolve>Promise.resolve()<a class=headerlink href=#promiseresolve title="Permanent link">&para;</a></h4> <p>The <code>Promise.resolve()</code> method accepts a single argument and returns a promise in the fulfilled state. That means no job scheduling occurs, and you need to add one or more fulfillment handlers to the promise to retrieve the value. For example:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>let</span> <span class=nx>promise</span> <span class=o>=</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=mi>42</span><span class=p>);</span>

<span class=nx>promise</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>         <span class=c1>// 42</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <p>This code creates a fulfilled promise so the fulfillment handler receives 42 as <code>value</code>. If a rejection handler were added to this promise, the rejection handler would never be called because the promise will never be in the rejected state.</p> <h4 id=promisereject>Promise.reject()<a class=headerlink href=#promisereject title="Permanent link">&para;</a></h4> <p>You can also create rejected promises by using the <code>Promise.reject()</code> method. This works like <code>Promise.resolve()</code> except the created promise is in the rejected state, as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>let</span> <span class=nx>promise</span> <span class=o>=</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>reject</span><span class=p>(</span><span class=mi>42</span><span class=p>);</span>

<span class=nx>promise</span><span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>         <span class=c1>// 42</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <p>Any additional rejection handlers added to this promise would be called, but not fulfillment handlers.</p> <h3 id=executor-errors>Executor errors<a class=headerlink href=#executor-errors title="Permanent link">&para;</a></h3> <p>If an error is thrown inside an executor, then the promise's rejection handler is called. For example:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>let</span> <span class=nx>promise</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s2>&quot;Explosion!&quot;</span><span class=p>);</span>
<span class=p>});</span>

<span class=nx>promise</span><span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>     <span class=c1>// &quot;Explosion!&quot;</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <h2 id=chaining-promises>Chaining promises<a class=headerlink href=#chaining-promises title="Permanent link">&para;</a></h2> <p>Each call to <code>then()</code> or <code>catch()</code> actually creates and returns another promise. This second promise is resolved only once the first has been fulfilled or rejected. Consider this example:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>let</span> <span class=nx>p1</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>resolve</span><span class=p>(</span><span class=mi>42</span><span class=p>);</span>
<span class=p>});</span>

<span class=nx>p1</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
<span class=p>}).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;Finished&quot;</span><span class=p>);</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <p>The code outputs:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=mi>42</span>
<span class=n>Finished</span>
</pre></div> </td></tr></table> <p>The call to <code>p1.then()</code> returns a second promise on which <code>then()</code> is called. The second <code>then()</code> fulfillment handler is only called after the first promise has been resolved.</p> <h3 id=returning-values-in-promise-chains>Returning values in promise chains<a class=headerlink href=#returning-values-in-promise-chains title="Permanent link">&para;</a></h3> <p>You can continue passing data along a chain by specifying a return value from the fulfillment handler. For example:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>let</span> <span class=nx>p1</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>resolve</span><span class=p>(</span><span class=mi>42</span><span class=p>);</span>
<span class=p>});</span>

<span class=nx>p1</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>         <span class=c1>// &quot;42&quot;</span>
    <span class=k>return</span> <span class=nx>value</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
<span class=p>}).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>         <span class=c1>// &quot;43&quot;</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <p>You could do the same thing with the <strong>rejection handler.</strong> When a rejection handler is called, it may return a value. If it does, that value is used to fulfill the next promise in the chain, like this:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>let</span> <span class=nx>p1</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>reject</span><span class=p>(</span><span class=mi>42</span><span class=p>);</span>
<span class=p>});</span>

<span class=nx>p1</span><span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// first fulfillment handler</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>         <span class=c1>// &quot;42&quot;</span>
    <span class=k>return</span> <span class=nx>value</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
<span class=p>}).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// second fulfillment handler</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>         <span class=c1>// &quot;43&quot;</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <h2 id=promiseall>Promise.all()<a class=headerlink href=#promiseall title="Permanent link">&para;</a></h2> <p>The <code>Promise.all()</code> method accepts a single argument, which is an iterable (such as an array) of promises to monitor, and returns a promise that is resolved only when every promise in the iterable is resolved. The returned promise is fulfilled when every promise in the iterable is fulfilled, as in this example:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>let</span> <span class=nx>p1</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>resolve</span><span class=p>(</span><span class=mi>42</span><span class=p>);</span>
<span class=p>});</span>

<span class=kd>let</span> <span class=nx>p2</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>resolve</span><span class=p>(</span><span class=mi>43</span><span class=p>);</span>
<span class=p>});</span>

<span class=kd>let</span> <span class=nx>p3</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>resolve</span><span class=p>(</span><span class=mi>44</span><span class=p>);</span>
<span class=p>});</span>

<span class=kd>let</span> <span class=nx>p4</span> <span class=o>=</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>all</span><span class=p>([</span><span class=nx>p1</span><span class=p>,</span> <span class=nx>p2</span><span class=p>,</span> <span class=nx>p3</span><span class=p>]);</span>

<span class=nx>p4</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nb>Array</span><span class=p>.</span><span class=nx>isArray</span><span class=p>(</span><span class=nx>value</span><span class=p>));</span>  <span class=c1>// true</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>[</span><span class=mi>0</span><span class=p>]);</span>              <span class=c1>// 42</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>[</span><span class=mi>1</span><span class=p>]);</span>              <span class=c1>// 43</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>[</span><span class=mi>2</span><span class=p>]);</span>              <span class=c1>// 44</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <p>Each promise here resolves with a number. The call to <code>Promise.all()</code> creates promise <code>p4</code>, which is ultimately fulfilled when promises <code>p1</code>, <code>p2</code>, and <code>p3</code> are fulfilled. The result passed to the fulfillment handler for <code>p4</code> is an array containing each resolved value: 42, 43, and 44. The values are stored in the order the promises resolved, so you can match promise results to the promises that resolved to them.</p> <p>If any promise passed to <code>Promise.all()</code> is rejected, the returned promise is immediately rejected without waiting for the other promises to complete.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>let</span> <span class=nx>p1</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>resolve</span><span class=p>(</span><span class=mi>42</span><span class=p>);</span>
<span class=p>});</span>

<span class=kd>let</span> <span class=nx>p2</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>reject</span><span class=p>(</span><span class=mi>43</span><span class=p>);</span>
<span class=p>});</span>

<span class=kd>let</span> <span class=nx>p3</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>resolve</span><span class=p>(</span><span class=mi>44</span><span class=p>);</span>
<span class=p>});</span>

<span class=kd>let</span> <span class=nx>p4</span> <span class=o>=</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>all</span><span class=p>([</span><span class=nx>p1</span><span class=p>,</span> <span class=nx>p2</span><span class=p>,</span> <span class=nx>p3</span><span class=p>]);</span>

<span class=nx>p4</span><span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nb>Array</span><span class=p>.</span><span class=nx>isArray</span><span class=p>(</span><span class=nx>value</span><span class=p>))</span>   <span class=c1>// false</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>                 <span class=c1>// 43</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <p>In this example, <code>p2</code> is rejected with a value of 43. The rejection handler for <code>p4</code> is called immediately without waiting for <code>p1</code> or <code>p3</code> to finish executing (They do still finish executing; <code>p4</code> just doesn't wait.)</p> <h2 id=things-to-understand-to-grasp-promise-better>Things to understand to grasp Promise better<a class=headerlink href=#things-to-understand-to-grasp-promise-better title="Permanent link">&para;</a></h2> <h3 id=1>[1]<a class=headerlink href=#1 title="Permanent link">&para;</a></h3> <p>The main point to keep in mind that the promise does not make async code to run in sync mode. It does not block event queue. The async code still execute in event loop. <strong>The main reason to introduce promise was to make code look and manage better by get rid of callback hell.</strong> Because callback way of handling async code makes developer life miserable when it grows because it become difficult to manage error handling and result from each callback to be used in nested callback.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// ### Callback approach - To handle multiple async request</span>
<span class=nx>readFileContents</span><span class=p>(</span><span class=s2>&quot;a.txt&quot;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>a</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>readFileContents</span><span class=p>(</span><span class=s2>&quot;b.txt&quot;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>b</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>writeFileContents</span><span class=p>(</span><span class=s2>&quot;ab.txt&quot;</span><span class=p>,</span> <span class=nx>a</span> <span class=o>+</span> <span class=nx>b</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;we are done&quot;</span><span class=p>);</span>
    <span class=p>});</span>
  <span class=p>});</span>
<span class=p>});</span>

<span class=c1>// ### Promise approach - It make code look and manage better by making async requests</span>
<span class=c1>//look like sync request but not actually become synchronized.</span>

<span class=c1>// ## 1 ##</span>
<span class=kd>var</span> <span class=nx>result</span> <span class=o>=</span> <span class=p>[];</span>
<span class=nx>readFileContents</span><span class=p>(</span><span class=s2>&quot;a.txt&quot;</span><span class=p>).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>a</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>result</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>a</span><span class=p>);</span>
  <span class=k>return</span> <span class=nx>readFileContents</span><span class=p>(</span><span class=s2>&quot;b.txt&quot;</span><span class=p>);</span>
<span class=p>}).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>b</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>result</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>b</span><span class=p>);</span>
  <span class=k>return</span> <span class=nx>writeFileContents</span><span class=p>(</span><span class=s2>&quot;ab.txt&quot;</span><span class=p>,</span> <span class=nx>result</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>x</span> <span class=o>+</span> <span class=nx>y</span><span class=p>));</span>
<span class=p>}).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;we are done&quot;</span><span class=p>);</span>
<span class=p>}).</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
<span class=p>});</span>

<span class=c1>// ## 2 ##</span>
<span class=nb>Promise</span><span class=p>.</span><span class=nx>all</span><span class=p>(</span>
  <span class=nx>readFileContents</span><span class=p>(</span><span class=s2>&quot;a.txt&quot;</span><span class=p>),</span>
  <span class=nx>readFileContents</span><span class=p>(</span><span class=s2>&quot;b.txt&quot;</span><span class=p>)</span>
<span class=p>).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>values</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>return</span> <span class=nx>writeFileContents</span><span class=p>(</span><span class=s2>&quot;ab.txt&quot;</span><span class=p>,</span> <span class=nx>values</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>x</span> <span class=o>+</span> <span class=nx>y</span><span class=p>));</span>
<span class=p>}).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;we are done&quot;</span><span class=p>);</span>
<span class=p>}).</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <h3 id=2>[2]<a class=headerlink href=#2 title="Permanent link">&para;</a></h3> <p>Promise object has two methods <code>then</code> and <code>catch</code>. The object that is created by class <code>Promise</code>.</p> <h3 id=3>[3]<a class=headerlink href=#3 title="Permanent link">&para;</a></h3> <p><code>Promise</code> class has three static methods <code>all</code>, <code>resolve</code>, <code>reject</code> and <code>race</code>. These static methods returns Promise's object.</p> <h3 id=4-promiseresolve>[4] <code>Promise.resolve()</code><a class=headerlink href=#4-promiseresolve title="Permanent link">&para;</a></h3> <p>It is a static function of Promise class.</p> <p>It returns promise's object. There are few points need to grasp, see exapmle below:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// ### 1. If parameter is a value, then it returns Promise&#39;s object which has two mentods</span>
<span class=c1>//`then` and `catch` that can be used.</span>

<span class=kd>var</span> <span class=nx>p</span> <span class=o>=</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=s1>&#39;abhay&#39;</span><span class=p>);</span>
<span class=nx>p</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>result</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>result</span><span class=p>)</span> <span class=c1>// abhay</span>
<span class=p>});</span>

<span class=c1>// can be rewrite as</span>
<span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=s1>&#39;abhay&#39;</span><span class=p>).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>result</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>result</span><span class=p>)</span> <span class=c1>// abhay</span>
<span class=p>});</span>

<span class=c1>// ## 2. If parameter is a another promise&#39;s object, then `resolve` returns the promise&#39;s object</span>
<span class=c1>//passed in parameter.</span>

<span class=kd>var</span> <span class=nx>p1</span> <span class=o>=</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=s1>&#39;abhay&#39;</span><span class=p>);</span>
<span class=kd>var</span> <span class=nx>p2</span> <span class=o>=</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=nx>p1</span><span class=p>);</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>p1</span> <span class=o>===</span> <span class=nx>p2</span><span class=p>)</span> <span class=c1>// true, because second promise retruns promise&#39;s object `p1`</span>

<span class=nx>p2</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>result</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>result</span><span class=p>)</span> <span class=c1>// abhay</span>
<span class=p>});</span>
<span class=nx>p1</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>result</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>result</span><span class=p>)</span> <span class=c1>// abhay</span>
<span class=p>});</span>

<span class=c1>// ## If parameter is thenable object then `resolve` cast(convert) it into promise&#39;s object</span>

<span class=kd>var</span> <span class=nx>p1</span> <span class=o>=</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>({</span>
  <span class=nx>then</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>onFulfill</span><span class=p>,</span> <span class=nx>onReject</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>onFulfill</span><span class=p>(</span><span class=s1>&#39;fulfilled!&#39;</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>});</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>p1</span> <span class=k>instanceof</span> <span class=nb>Promise</span><span class=p>)</span> <span class=c1>// true, object casted (converted) to a Promise&#39;s object</span>
<span class=nx>p1</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>v</span><span class=p>);</span> <span class=c1>// &quot;fulfilled!&quot;</span>
<span class=p>});</span>

<span class=cm>/**</span>
<span class=cm>* Throw error behavior in thenable object</span>
<span class=cm>*/</span>
<span class=c1>// Behavior 1</span>
<span class=kd>var</span> <span class=nx>p2</span> <span class=o>=</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>({</span>
  <span class=nx>then</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>onFulfill</span><span class=p>,</span> <span class=nx>onReject</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>throw</span> <span class=k>new</span> <span class=nx>TypeError</span><span class=p>(</span><span class=s1>&#39;Throwing&#39;</span><span class=p>);</span>
    <span class=nx>onFulfill</span><span class=p>(</span><span class=s1>&#39;fulfilled!&#39;</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>});</span>
<span class=nx>p2</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// not called</span>
<span class=p>},</span> <span class=kd>function</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>e</span><span class=p>);</span> <span class=c1>// TypeError: Throwing</span>
<span class=p>});</span>

<span class=c1>// Behavior 2</span>
<span class=kd>var</span> <span class=nx>p3</span> <span class=o>=</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>({</span>
  <span class=nx>then</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>onFulfill</span><span class=p>,</span> <span class=nx>onReject</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>onFulfill</span><span class=p>(</span><span class=s1>&#39;fulfilled!&#39;</span><span class=p>);</span>
    <span class=k>throw</span> <span class=k>new</span> <span class=nx>TypeError</span><span class=p>(</span><span class=s1>&#39;Throwing&#39;</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>});</span>
<span class=nx>p3</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>v</span><span class=p>);</span> <span class=c1>// &quot;Resolving&quot;</span>
<span class=p>},</span> <span class=kd>function</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// not called</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <h3 id=5-promisereject>[5] <code>Promise.reject()</code><a class=headerlink href=#5-promisereject title="Permanent link">&para;</a></h3> <p>It is a static function of Promise class.</p> <p>It returns promise's object and accept any javascript's variable type. As standard it is recommended to pass Error object. A few points:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// ### Always pass Error object or any javascript variable type except Promise object as we do in</span>
<span class=c1>// Promise.resolve(). Because Promise.reject() always creates new Peomise object it does not</span>
<span class=c1>// returns Promise&#39;s object as it is done in the case of Promise.resolve().</span>

<span class=kd>var</span> <span class=nx>p1</span> <span class=o>=</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>reject</span><span class=p>(</span><span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;rejected&#39;</span><span class=p>));</span>
<span class=kd>var</span> <span class=nx>p2</span> <span class=o>=</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>reject</span><span class=p>(</span><span class=nx>p1</span><span class=p>);</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>p1</span> <span class=o>===</span> <span class=nx>p2</span><span class=p>);</span> <span class=c1>// false</span>

<span class=nx>p2</span><span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>err</span> <span class=o>===</span> <span class=nx>p1</span><span class=p>);</span> <span class=c1>// it is a `p1` promise&#39;s object</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <h3 id=6-promiseobjectthenonfulfilled-onrejected>[6] <code>promiseObject.then(onFulfilled[, onRejected])</code><a class=headerlink href=#6-promiseobjectthenonfulfilled-onrejected title="Permanent link">&para;</a></h3> <p>It returns Promise object.</p> <p>The behavior of handler function (<code>onFulfilled</code> or <code>onRejected</code>) on different scenarios:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// ### 1. Returns simple value then `then` returns new promise&#39;s object having resolved</span>
<span class=c1>// value === retuned value</span>
<span class=kd>var</span> <span class=nx>p1</span> <span class=o>=</span> <span class=nx>p</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span> <span class=c1>// abhay</span>
  <span class=k>return</span> <span class=nx>value</span> <span class=o>+</span> <span class=s1>&#39; &#39;</span> <span class=o>+</span> <span class=s1>&#39;garg&#39;</span><span class=p>;</span>
<span class=p>});</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>p</span> <span class=o>===</span> <span class=nx>p1</span><span class=p>);</span> <span class=c1>// false</span>
<span class=nx>p1</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span> <span class=c1>// abhay garg</span>
<span class=p>});</span>

<span class=c1>// ### 2. throw an error then `then` returns new promise&#39;s object having rejected value === thrown</span>
<span class=c1>// error object</span>
<span class=kd>var</span> <span class=nx>p2</span> <span class=o>=</span> <span class=nx>p</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span> <span class=c1>// abhay</span>
  <span class=k>throw</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;error&#39;</span><span class=p>);</span>
<span class=p>});</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>p</span> <span class=o>===</span> <span class=nx>p2</span><span class=p>);</span> <span class=c1>// false</span>
<span class=nx>p2</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span> <span class=c1>// never called</span>
<span class=p>}).</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span> <span class=c1>// error</span>
<span class=p>});</span>

<span class=c1>// ### 3. Returns reolved promise then `then` returns new promise&#39;s object having resolved</span>
<span class=c1>// value === resolved value of returned resolved promise object</span>
<span class=kd>var</span> <span class=nx>resolvedPromiseObject</span> <span class=o>=</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=s1>&#39;garg&#39;</span><span class=p>);</span>
<span class=kd>var</span> <span class=nx>p3</span> <span class=o>=</span> <span class=nx>p</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span> <span class=c1>// abhay</span>
  <span class=k>return</span> <span class=nx>resolvedPromiseObject</span><span class=p>;</span>
<span class=p>});</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>p</span> <span class=o>===</span> <span class=nx>p3</span><span class=p>);</span> <span class=c1>// false</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>p3</span> <span class=o>===</span> <span class=nx>resolvedPromiseObject</span><span class=p>);</span> <span class=c1>// false</span>
<span class=nx>p3</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span> <span class=c1>// garg</span>
<span class=p>});</span>

<span class=c1>// ### 4. Returns rejected promise then `then` returns new promise&#39;s object having rejected</span>
<span class=c1>// value === rejected value of returned rejected promise object</span>
<span class=kd>var</span> <span class=nx>rejectedPromiseObject</span> <span class=o>=</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>reject</span><span class=p>(</span><span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;error&#39;</span><span class=p>));</span>
<span class=kd>var</span> <span class=nx>p4</span> <span class=o>=</span> <span class=nx>p</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span> <span class=c1>// abhay</span>
  <span class=k>return</span> <span class=nx>rejectedPromiseObject</span><span class=p>;</span>
<span class=p>});</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>p</span> <span class=o>===</span> <span class=nx>p4</span><span class=p>);</span> <span class=c1>// false</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>p4</span> <span class=o>===</span> <span class=nx>rejectedPromiseObject</span><span class=p>);</span> <span class=c1>// false</span>
<span class=nx>p4</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span> <span class=c1>// never called</span>
<span class=p>}).</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span> <span class=c1>// error</span>
<span class=p>});</span>

<span class=c1>// ### 5. Returns pending promise object then `then` returns new promise&#39;s object which</span>
<span class=c1>// is reolved or rejected  on the basis of returned pending promise.</span>
<span class=kd>var</span> <span class=nx>c</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
<span class=kd>var</span> <span class=nx>p1</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>){</span>
  <span class=k>if</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>resolve</span><span class=p>(</span><span class=s1>&#39;promise one&#39;</span><span class=p>);</span>
  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
    <span class=nx>reject</span><span class=p>(</span><span class=s1>&#39;promise one error&#39;</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>});</span>

<span class=kd>var</span> <span class=nx>p2</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>){</span>
  <span class=k>if</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>resolve</span><span class=p>(</span><span class=s1>&#39;promise two&#39;</span><span class=p>);</span>
  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
    <span class=nx>reject</span><span class=p>(</span><span class=s1>&#39;promise two error&#39;</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>});</span>

<span class=kd>var</span> <span class=nx>p5</span> <span class=o>=</span> <span class=nx>p1</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span> <span class=c1>// promise one</span>
  <span class=k>return</span> <span class=nx>p2</span><span class=p>;</span>
<span class=p>});</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>p5</span> <span class=o>===</span> <span class=nx>p2</span><span class=p>);</span> <span class=c1>// false</span>
<span class=nx>p5</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span> <span class=c1>// promise two</span>
<span class=p>}).</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <blockquote> <p>The reason <code>then</code> returns new promise's object always so that chainable mechanism can be implemented</p> </blockquote> <h3 id=7-do-not-nest-one-promise-in-to-another-usethen-method-to-use-another-pending-promise>[7] Do not nest one promise in to another. Use<code>then</code> method to use another pending promise.<a class=headerlink href=#7-do-not-nest-one-promise-in-to-another-usethen-method-to-use-another-pending-promise title="Permanent link">&para;</a></h3> <blockquote> <p><strong>One Promise === One Responsibility</strong></p> </blockquote> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// ### Still gives an accurate result but very confusing on how things would actually executes.</span>
<span class=c1>// Not Recommended.</span>
<span class=kd>var</span> <span class=nx>c</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
<span class=kd>var</span> <span class=nx>p1</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>){</span>
  <span class=k>if</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>resolve</span><span class=p>(</span><span class=s1>&#39;abhay&#39;</span><span class=p>);</span>
  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
    <span class=nx>reject</span><span class=p>(</span><span class=s1>&#39;error from p1&#39;</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>});</span>

<span class=kd>var</span> <span class=nx>p2</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>){</span>
  <span class=c1>// some code</span>
  <span class=kd>var</span> <span class=nx>l</span> <span class=o>=</span> <span class=s1>&#39;garg&#39;</span><span class=p>;</span>
  <span class=nx>p1</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
    <span class=nx>resolve</span><span class=p>(</span><span class=nx>value</span> <span class=o>+</span> <span class=s1>&#39; &#39;</span> <span class=o>+</span> <span class=nx>l</span><span class=p>);</span>
  <span class=p>}).</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>){</span>
    <span class=nx>resolve</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
  <span class=p>});</span>
<span class=p>});</span>

<span class=nx>p2</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span> <span class=c1>// abhay garg</span>
<span class=p>}).</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
<span class=p>});</span>

<span class=c1>// ### Recommneded</span>
<span class=kd>var</span> <span class=nx>c</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
<span class=kd>var</span> <span class=nx>p1</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>){</span>
  <span class=k>if</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>resolve</span><span class=p>(</span><span class=s1>&#39;abhay&#39;</span><span class=p>);</span>
  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
    <span class=nx>reject</span><span class=p>(</span><span class=s1>&#39;error from p1&#39;</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>});</span>

<span class=kd>var</span> <span class=nx>d</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
<span class=kd>var</span> <span class=nx>p2</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>){</span>
  <span class=k>if</span><span class=p>(</span><span class=nx>d</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>resolve</span><span class=p>(</span><span class=s1>&#39;garg&#39;</span><span class=p>);</span>
  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
    <span class=nx>reject</span><span class=p>(</span><span class=s1>&#39;error from p2&#39;</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>});</span>

<span class=kd>var</span> <span class=nx>result</span> <span class=o>=</span> <span class=p>[];</span>
<span class=nx>p1</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
  <span class=nx>result</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
  <span class=k>return</span> <span class=nx>p2</span><span class=p>;</span>
<span class=p>}).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>){</span>
  <span class=nx>result</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>result</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>));</span> <span class=c1>// abhay garg</span>
<span class=p>}).</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>){</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
<span class=p>});</span>
</pre></div> </td></tr></table> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Abhay Garg </div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/application.c648116f.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>