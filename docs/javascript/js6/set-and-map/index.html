<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Notebook collections"><link href=https://abhaydgarg.github.io/Notebook/index.html/javascript/js6/set-and-map/ rel=canonical><meta name=author content="Abhay Garg"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.2"><title>Why sets and maps - Notebook</title><link rel=stylesheet href=../../../assets/stylesheets/application.30686662.css><link rel=stylesheet href=../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#2196f3><script src=../../../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono&display=fallback"><style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#why-sets-and-maps tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Notebook </span> <span class=md-header-nav__topic> Why sets and maps </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-nav__button md-logo"> <i class=md-icon></i> </a> Notebook </label> <div class=md-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../computer-science/ title=CS class=md-nav__link> CS </a> </li> <li class=md-nav__item> <a href=../../../parser/ title=Parser class=md-nav__link> Parser </a> </li> <li class=md-nav__item> <a href=../../../data-structure-and-algorithms/ title="Data Structure and Algorithms" class=md-nav__link> Data Structure and Algorithms </a> </li> <li class=md-nav__item> <a href=../../../oops/ title=OOPS class=md-nav__link> OOPS </a> </li> <li class=md-nav__item> <a href=../../../design-patterns/ title="Design Patterns" class=md-nav__link> Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../regex/ title=Regex class=md-nav__link> Regex </a> </li> <li class=md-nav__item> <a href=../../../git/ title=GIT class=md-nav__link> GIT </a> </li> <li class=md-nav__item> <a href=../../../css/ title=CSS class=md-nav__link> CSS </a> </li> <li class=md-nav__item> <a href=../../../rest-api/ title="REST API" class=md-nav__link> REST API </a> </li> <li class=md-nav__item> <a href=../../../eslint/ title=ESLint class=md-nav__link> ESLint </a> </li> <li class=md-nav__item> <a href=../../ title=Javascript class=md-nav__link> Javascript </a> </li> <li class=md-nav__item> <a href=../../../nodejs/ title=Node.js class=md-nav__link> Node.js </a> </li> <li class=md-nav__item> <a href=../../../react/ title=React class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../../react-native/ title="React Native" class=md-nav__link> React Native </a> </li> <li class=md-nav__item> <a href=../../../redux-saga/ title="Redux Saga" class=md-nav__link> Redux Saga </a> </li> <li class=md-nav__item> <a href=../../../rxjs/ title=RxJS class=md-nav__link> RxJS </a> </li> <li class=md-nav__item> <a href=../../../mysql/ title=MySQL class=md-nav__link> MySQL </a> </li> <li class=md-nav__item> <a href=../../../mongodb/ title=MongoDB class=md-nav__link> MongoDB </a> </li> <li class=md-nav__item> <a href=../../../firebase/ title=Firebase class=md-nav__link> Firebase </a> </li> <li class=md-nav__item> <a href=../../../web-security/ title="Web Security" class=md-nav__link> Web Security </a> </li> <li class=md-nav__item> <a href=../../../rust/ title=Rust class=md-nav__link> Rust </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#objects-keys-must-be-a-string class=md-nav__link> Object's keys must be a string </a> </li> <li class=md-nav__item> <a href=#determine-objects-properties class=md-nav__link> Determine object's properties </a> </li> <li class=md-nav__item> <a href=#object-built-in-methods class=md-nav__link> Object built-in methods </a> </li> <li class=md-nav__item> <a href=#sets class=md-nav__link> Sets </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#weak-sets class=md-nav__link> Weak sets </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#how-weak-sets-differ-from-strongregular-sets class=md-nav__link> How Weak sets differ from strong(regular) sets </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#maps class=md-nav__link> Maps </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#add-a-lot-of-data-to-a-map-at-one-time class=md-nav__link> Add a lot of data to a map at one time </a> </li> <li class=md-nav__item> <a href=#weak-maps class=md-nav__link> Weak maps </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#weak-map-uses-and-limitations class=md-nav__link> Weak map uses and limitations </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/abhaydgarg/Notebook/tree/master/src/javascript/js6/set-and-map.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=why-sets-and-maps>Why sets and maps<a class=headerlink href=#why-sets-and-maps title="Permanent link">&para;</a></h1> <p>In ES5, object is used as data structure to store data. But using object as map in ES5 has few limitations.</p> <h2 id=objects-keys-must-be-a-string>Object's keys must be a string<a class=headerlink href=#objects-keys-must-be-a-string title="Permanent link">&para;</a></h2> <p>If you provide any other type other than string ES5 internally changed the type to string before assigning key to object. Therefore key <code>5</code> and key <code>'5'</code> are same in ES5.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// This example assigns the string value &quot;foo&quot; to a numeric key of 5. Internally, that</span>
<span class=c1>// numeric value is converted to a string, so obj[&quot;5&quot;] and obj[5] actually reference</span>
<span class=c1>// the same property. That internal conversion can cause problems when you want to use</span>
<span class=c1>// both numbers and strings as keys.</span>

<span class=kd>let</span> <span class=nx>obj</span> <span class=o>=</span> <span class=p>{};</span>
<span class=nx>obj</span><span class=p>[</span><span class=mi>5</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;foo&quot;</span><span class=p>;</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>obj</span><span class=p>[</span><span class=s2>&quot;5&quot;</span><span class=p>]);</span>      <span class=c1>// &quot;foo&quot;</span>

<span class=c1>// Another problem arises when using objects as keys. Here, obj[key2] and obj[key1]</span>
<span class=c1>// reference the same value. Because both are object and before assigning key JS convert</span>
<span class=c1>// them to string which is &quot;[object Object]&quot;, there fore both key1 and key2 has value &quot;[object Object]&quot;.</span>

<span class=kd>let</span> <span class=nx>obj</span> <span class=o>=</span> <span class=p>{},</span>
    <span class=nx>key1</span> <span class=o>=</span> <span class=p>{},</span>
    <span class=nx>key2</span> <span class=o>=</span> <span class=p>{};</span>

<span class=nx>map</span><span class=p>[</span><span class=nx>key1</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;foo&quot;</span><span class=p>;</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>map</span><span class=p>[</span><span class=nx>key2</span><span class=p>]);</span>     <span class=c1>// &quot;foo&quot;</span>
</pre></div> </td></tr></table> <h2 id=determine-objects-properties>Determine object's properties<a class=headerlink href=#determine-objects-properties title="Permanent link">&para;</a></h2> <p>Objects weren't designed to be used as collections, and as a result there's no efficient way to determine how many properties an object has. When you loop over an object's properties, you also get its prototype properties. You could add the <code>iterable</code> property to all objects but not all objects are meant to be used as collections. You could use the <code>for...in</code> loop and the <code>hasOwnProperty()</code> method, but this just a workaround. When you loop over an object's properties, the properties won't necessarily be retrieved in the same order they were inserted.</p> <h2 id=object-built-in-methods>Object built-in methods<a class=headerlink href=#object-built-in-methods title="Permanent link">&para;</a></h2> <p>Objects have built in methods like <code>constructor</code>, <code>toString</code>, and <code>valueOf</code>. If one of these was added as a property, it could cause collisions. You could use <code>Object.create(null)</code> to create a bare object (which doesn't inherit from <code>object.prototype</code>), but, again, this is just a workaround.</p> <h2 id=sets>Sets<a class=headerlink href=#sets title="Permanent link">&para;</a></h2> <p>It's a collection for <em>unique</em> values. The values could be also a primitives or object references.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// ### Add</span>

<span class=c1>// does not change the type, so 5 and &#39;5&#39; are two different values.</span>
<span class=kd>let</span> <span class=nx>set</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>();</span>
<span class=nx>set</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
<span class=nx>set</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=s2>&quot;5&quot;</span><span class=p>);</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>set</span><span class=p>.</span><span class=nx>size</span><span class=p>);</span>    <span class=c1>// 2</span>

<span class=c1>// key1 and key2 are not converted to strings, they count as two unique items in the set.</span>
<span class=c1>// (Remember, if they were converted to strings, they would both be equal to &quot;[Object object]&quot;.)</span>
<span class=kd>let</span> <span class=nx>set</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>(),</span>
    <span class=nx>key1</span> <span class=o>=</span> <span class=p>{},</span>
    <span class=nx>key2</span> <span class=o>=</span> <span class=p>{};</span>

<span class=nx>set</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>key1</span><span class=p>);</span>
<span class=nx>set</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>key2</span><span class=p>);</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>set</span><span class=p>.</span><span class=nx>size</span><span class=p>);</span>    <span class=c1>// 2</span>

<span class=c1>// ### Does not allow duplicate values. Duplicate values are just ignored.</span>

<span class=kd>let</span> <span class=nx>set</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>();</span>
<span class=nx>set</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
<span class=nx>set</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=s2>&quot;5&quot;</span><span class=p>);</span>
<span class=nx>set</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>     <span class=c1>// duplicate - this is ignored</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>set</span><span class=p>.</span><span class=nx>size</span><span class=p>);</span>    <span class=c1>// 2</span>

<span class=c1>// ### Initialize a set using an array, and the Set constructor</span>
<span class=c1>// will ensure that only unique values are used.</span>

<span class=kd>let</span> <span class=nx>set</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>5</span><span class=p>]);</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>set</span><span class=p>.</span><span class=nx>size</span><span class=p>);</span>    <span class=c1>// 5</span>

<span class=c1>// ### has()</span>

<span class=kd>let</span> <span class=nx>set</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>();</span>
<span class=nx>set</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
<span class=nx>set</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=s2>&quot;5&quot;</span><span class=p>);</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>set</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=mi>5</span><span class=p>));</span>    <span class=c1>// true</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>set</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=mi>6</span><span class=p>));</span>    <span class=c1>// false</span>

<span class=c1>// ### Removing Values</span>

<span class=kd>let</span> <span class=nx>set</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>();</span>
<span class=nx>set</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
<span class=nx>set</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=s2>&quot;5&quot;</span><span class=p>);</span>
<span class=nx>set</span><span class=p>.</span><span class=k>delete</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span> <span class=c1>// remove single value</span>

<span class=nx>set</span><span class=p>.</span><span class=nx>clear</span><span class=p>();</span> <span class=c1>// empty whole set</span>

<span class=c1>// ### Converting a Set to an Array</span>

<span class=c1>// This approach is useful when you already have an array and want</span>
<span class=c1>// to create an array without duplicates.</span>
<span class=kd>let</span> <span class=nx>set</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>]),</span>
    <span class=nx>array</span> <span class=o>=</span> <span class=p>[...</span><span class=nx>set</span><span class=p>];</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>array</span><span class=p>);</span>             <span class=c1>// [1,2,3,4,5]</span>
</pre></div> </td></tr></table> <h3 id=weak-sets>Weak sets<a class=headerlink href=#weak-sets title="Permanent link">&para;</a></h3> <p>The sets we have discussed above is also called <code>strong sets</code> because the way it sores the object reference. Even if you remove the reference from original object, sets keep it. Therefore, original object cannot garbage collected to free memory.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>let</span> <span class=nx>set</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>(),</span> <span class=c1>// strong sets</span>
    <span class=nx>key</span> <span class=o>=</span> <span class=p>{};</span> <span class=c1>// original object</span>

<span class=nx>set</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>

<span class=c1>// eliminate original reference</span>
<span class=nx>key</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>

<span class=c1>// get the original reference back</span>
<span class=nx>key</span> <span class=o>=</span> <span class=p>[...</span><span class=nx>set</span><span class=p>][</span><span class=mi>0</span><span class=p>];</span>

<span class=c1>// Setting key to null clears one reference of the key object, but another remains inside set.</span>
<span class=c1>// You can still retrieve key by converting the set to an array with the spread operator and accessing</span>
<span class=c1>// the first item. That result is fine for most programs, but sometimes, it’s better</span>
<span class=c1>// for references in a set to disappear when all other references disappear.</span>
<span class=c1>// For instance, if your JavaScript code is running in a web page and wants to keep</span>
<span class=c1>// track of DOM elements that might be removed by another script, you don’t want your code holding</span>
<span class=c1>// onto the last reference to a DOM element. (That situation is called a memory leak.)</span>
</pre></div> </td></tr></table> <p>To alleviate such issues, ECMAScript 6 also includes <em>weak sets</em></p> <ol> <li>Weak sets only store object references.</li> <li>Primitive values are not permitted.</li> </ol> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>let</span> <span class=nx>set</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>WeakSet</span><span class=p>(),</span>
    <span class=nx>key</span> <span class=o>=</span> <span class=p>{};</span> <span class=c1>// original object</span>

<span class=nx>set</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>

<span class=c1>// eliminate original reference</span>
<span class=nx>key</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>

<span class=c1>// get the original reference back</span>
<span class=nx>key</span> <span class=o>=</span> <span class=p>[...</span><span class=nx>set</span><span class=p>][</span><span class=mi>0</span><span class=p>];</span> <span class=c1>// null</span>
</pre></div> </td></tr></table> <h4 id=how-weak-sets-differ-from-strongregular-sets>How Weak sets differ from strong(regular) sets<a class=headerlink href=#how-weak-sets-differ-from-strongregular-sets title="Permanent link">&para;</a></h4> <ol> <li>In a <code>WeakSet</code> instance, the <code>add()</code> method, <code>has()</code> method, and <code>delete()</code> method all throw an error when passed a non-object.</li> <li>Weak sets are not iterables and therefore cannot be used in a <code>for-of</code> loop.</li> <li>Weak sets do not expose any iterators (such as the <code>keys()</code> and <code>values()</code> methods), so there is no way to programmatically determine the contents of a weak set.</li> <li>Weak sets do not have a <code>forEach()</code> method.</li> <li>Weak sets do not have a <code>size</code> property.</li> </ol> <blockquote> <p>In general, if you only need to track object references, then you should use a weak set instead of a regular set.</p> </blockquote> <h2 id=maps>Maps<a class=headerlink href=#maps title="Permanent link">&para;</a></h2> <p>Maps are a store for <strong>key</strong> / <strong>value</strong> pairs. Key and value could be a primitives or object references.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// ### Add and Get</span>

<span class=kd>let</span> <span class=nx>map</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
<span class=nx>map</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=s2>&quot;title&quot;</span><span class=p>,</span> <span class=s2>&quot;Understanding ES6&quot;</span><span class=p>);</span>
<span class=nx>map</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=s2>&quot;year&quot;</span><span class=p>,</span> <span class=mi>2016</span><span class=p>);</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>map</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&quot;title&quot;</span><span class=p>));</span>      <span class=c1>// &quot;Understanding ES6&quot;</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>map</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&quot;year&quot;</span><span class=p>));</span>       <span class=c1>// 2016</span>

<span class=c1>// get() return undefined if key does not exist</span>

<span class=c1>// ### You can also use objects as keys, which isn’t possible when</span>
<span class=c1>// using object properties to create a map in the ES5</span>

<span class=kd>let</span> <span class=nx>map</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>(),</span>
    <span class=nx>key1</span> <span class=o>=</span> <span class=p>{},</span>
    <span class=nx>key2</span> <span class=o>=</span> <span class=p>{};</span>

<span class=nx>map</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>key1</span><span class=p>,</span> <span class=mi>5</span><span class=p>);</span>
<span class=nx>map</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>key2</span><span class=p>,</span> <span class=mi>42</span><span class=p>);</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>map</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>key1</span><span class=p>));</span>         <span class=c1>// 5</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>map</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>key2</span><span class=p>));</span>         <span class=c1>// 42</span>
</pre></div> </td></tr></table> <ul> <li><code>has(key)</code> - Determines if the given key exists in the map</li> <li><code>delete(key)</code> - Removes the key and its associated value from the map</li> <li><code>clear()</code> - Removes all keys and values from the map</li> <li><code>size</code> - number of key-value pair.</li> </ul> <h3 id=add-a-lot-of-data-to-a-map-at-one-time>Add a lot of data to a map at one time<a class=headerlink href=#add-a-lot-of-data-to-a-map-at-one-time title="Permanent link">&para;</a></h3> <p>Also similar to sets, you can initialize a map with data by passing an array to the <code>Map</code> constructor. Each item in the array must itself be an array where the first item is the key and the second is that key's corresponding value. The entire map, therefore, is an array of these two-item arrays, for example:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>let</span> <span class=nx>map</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>([[</span><span class=s2>&quot;name&quot;</span><span class=p>,</span> <span class=s2>&quot;Nicholas&quot;</span><span class=p>],</span> <span class=p>[</span><span class=s2>&quot;age&quot;</span><span class=p>,</span> <span class=mi>25</span><span class=p>]]);</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>map</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&quot;name&quot;</span><span class=p>));</span>   <span class=c1>// &quot;Nicholas&quot;</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>map</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&quot;age&quot;</span><span class=p>));</span>    <span class=c1>// 25</span>
</pre></div> </td></tr></table> <h3 id=weak-maps>Weak maps<a class=headerlink href=#weak-maps title="Permanent link">&para;</a></h3> <p>Concept is similar to sets regarding weak object references to promote garbage collection. In weak maps, every key must be an object (an error is thrown if you try to use a non-object key), and those object references are held weakly so they don't interfere with garbage collection. It's</p> <p><strong>Important</strong> to note that only weak map keys, and not weak map values, are weak references. An object stored as a weak map value will prevent garbage collection if all other references are removed.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>let</span> <span class=nx>map</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>WeakMap</span><span class=p>(),</span>
    <span class=nx>element</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s2>&quot;.element&quot;</span><span class=p>);</span>

<span class=nx>map</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>element</span><span class=p>,</span> <span class=s2>&quot;Original&quot;</span><span class=p>);</span>

<span class=kd>let</span> <span class=nx>value</span> <span class=o>=</span> <span class=nx>map</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>element</span><span class=p>);</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>             <span class=c1>// &quot;Original&quot;</span>

<span class=c1>// remove the element</span>
<span class=nx>element</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>removeChild</span><span class=p>(</span><span class=nx>element</span><span class=p>);</span>
<span class=nx>element</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>

<span class=c1>// the weak map is empty at this point</span>
</pre></div> </td></tr></table> <h4 id=weak-map-uses-and-limitations>Weak map uses and limitations<a class=headerlink href=#weak-map-uses-and-limitations title="Permanent link">&para;</a></h4> <p>When deciding whether to use a weak map or a regular map, the primary decision to consider is whether you want to use only object as key. Anytime you're going to use only object as key, then the best choice is a weak map. That will allow you to optimize memory usage and avoid memory leaks by ensuring that extra data isn't kept around after it's no longer accessible.</p> <p>Keep in mind that weak maps give you very little visibility into their contents, so you can't use the <code>forEach()</code> method, the <code>size</code>property, or the <code>clear()</code> method to manage the items. If you need some inspection capabilities, then regular maps are a better choice. Just be sure to keep an eye on memory usage.</p> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Abhay Garg </div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/application.c648116f.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>