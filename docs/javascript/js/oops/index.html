<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Notebook collections"><link href=https://abhaydgarg.github.io/Notebook/index.html/javascript/js/oops/ rel=canonical><meta name=author content="Abhay Garg"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.2"><title>OOPS - Notebook</title><link rel=stylesheet href=../../../assets/stylesheets/application.30686662.css><link rel=stylesheet href=../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#2196f3><script src=../../../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono&display=fallback"><style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#oops tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Notebook </span> <span class=md-header-nav__topic> OOPS </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-nav__button md-logo"> <i class=md-icon></i> </a> Notebook </label> <div class=md-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../computer-science/ title=CS class=md-nav__link> CS </a> </li> <li class=md-nav__item> <a href=../../../parser/ title=Parser class=md-nav__link> Parser </a> </li> <li class=md-nav__item> <a href=../../../data-structure-and-algorithms/ title="Data Structure and Algorithms" class=md-nav__link> Data Structure and Algorithms </a> </li> <li class=md-nav__item> <a href=../../../oops/ title=OOPS class=md-nav__link> OOPS </a> </li> <li class=md-nav__item> <a href=../../../design-patterns/ title="Design Patterns" class=md-nav__link> Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../regex/ title=Regex class=md-nav__link> Regex </a> </li> <li class=md-nav__item> <a href=../../../git/ title=GIT class=md-nav__link> GIT </a> </li> <li class=md-nav__item> <a href=../../../css/ title=CSS class=md-nav__link> CSS </a> </li> <li class=md-nav__item> <a href=../../../rest-api/ title="REST API" class=md-nav__link> REST API </a> </li> <li class=md-nav__item> <a href=../../../eslint/ title=ESLint class=md-nav__link> ESLint </a> </li> <li class=md-nav__item> <a href=../../ title=Javascript class=md-nav__link> Javascript </a> </li> <li class=md-nav__item> <a href=../../../nodejs/ title=Node.js class=md-nav__link> Node.js </a> </li> <li class=md-nav__item> <a href=../../../react/ title=React class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../../react-native/ title="React Native" class=md-nav__link> React Native </a> </li> <li class=md-nav__item> <a href=../../../redux-saga/ title="Redux Saga" class=md-nav__link> Redux Saga </a> </li> <li class=md-nav__item> <a href=../../../rxjs/ title=RxJS class=md-nav__link> RxJS </a> </li> <li class=md-nav__item> <a href=../../../mysql/ title=MySQL class=md-nav__link> MySQL </a> </li> <li class=md-nav__item> <a href=../../../mongodb/ title=MongoDB class=md-nav__link> MongoDB </a> </li> <li class=md-nav__item> <a href=../../../firebase/ title=Firebase class=md-nav__link> Firebase </a> </li> <li class=md-nav__item> <a href=../../../web-security/ title="Web Security" class=md-nav__link> Web Security </a> </li> <li class=md-nav__item> <a href=../../../rust/ title=Rust class=md-nav__link> Rust </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#objects class=md-nav__link> Objects </a> </li> <li class=md-nav__item> <a href=#encapsulation-and-inheritance class=md-nav__link> Encapsulation and inheritance </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#object-creation-encapsulation class=md-nav__link> Object creation (Encapsulation) </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-object-literals-pattern class=md-nav__link> [1] Object Literals Pattern </a> </li> <li class=md-nav__item> <a href=#2-function-constructor-pattern class=md-nav__link> [2] Function constructor pattern </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#function-constructor-pattern-with-sharing-mechanism class=md-nav__link> Function constructor pattern with sharing mechanism </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#code-reuse-inheritance class=md-nav__link> Code reuse (Inheritance) </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prototype-concept class=md-nav__link> Prototype concept </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-prototype-property class=md-nav__link> 1. Prototype property </a> </li> <li class=md-nav__item> <a href=#2-prototype-object-__proto__ class=md-nav__link> 2. Prototype object __proto__ </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#inheritance-patterns class=md-nav__link> Inheritance patterns </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-pseudoclassical-pattern class=md-nav__link> [1] Pseudoclassical pattern </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#more-about-constructor class=md-nav__link> More about constructor </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-functional-pattern class=md-nav__link> [2] Functional pattern </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/abhaydgarg/Notebook/tree/master/src/javascript/js/oops.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=oops>OOPS<a class=headerlink href=#oops title="Permanent link">&para;</a></h1> <h2 id=objects>Objects<a class=headerlink href=#objects title="Permanent link">&para;</a></h2> <p>Object can be thought of as the main actors in an application, or simply the main "things" or building blocks that do all the work. As you know by now, objects are everywhere in JavaScript since every component in JavaScript is an Object, including Functions, Strings, and Numbers. We normally use object literals or constructor functions to create objects.</p> <h2 id=encapsulation-and-inheritance>Encapsulation and inheritance<a class=headerlink href=#encapsulation-and-inheritance title="Permanent link">&para;</a></h2> <p><strong>Encapsulation</strong> refers to enclosing all the functionalities of an object within that object so that the object's internal workings (its methods and properties) are hidden from the rest of the application. This allows us to abstract or localize specific set of functionalities on objects.</p> <p><strong>Inheritance</strong> refers to an object being able to inherit methods and properties from a parent object.</p> <p><strong>JavaScript supports single inheritance only.</strong></p> <h3 id=object-creation-encapsulation>Object creation (Encapsulation)<a class=headerlink href=#object-creation-encapsulation title="Permanent link">&para;</a></h3> <p>Which is done by following patterns.</p> <h4 id=1-object-literals-pattern>[1] Object Literals Pattern<a class=headerlink href=#1-object-literals-pattern title="Permanent link">&para;</a></h4> <p>For simple objects that used in your application to store data.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>//This is an object with 4 items, using object literal</span>

<span class=kd>var</span> <span class=nx>mango</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>color</span><span class=o>:</span> <span class=s2>&quot;yellow&quot;</span><span class=p>,</span>
  <span class=nx>shape</span><span class=o>:</span> <span class=s2>&quot;round&quot;</span><span class=p>,</span>
  <span class=nx>sweetness</span><span class=o>:</span> <span class=mi>8</span><span class=p>,</span>
  <span class=nx>howSweetAmI</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
   <span class=c1>// access property</span>
   <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>color</span><span class=p>);</span>
   <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;Hmm Hmm Good&quot;</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>};</span>
</pre></div> </td></tr></table> <h4 id=2-function-constructor-pattern>[2] Function constructor pattern<a class=headerlink href=#2-function-constructor-pattern title="Permanent link">&para;</a></h4> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>function</span> <span class=nx>Fruit</span> <span class=p>(</span><span class=nx>theColor</span><span class=p>,</span> <span class=nx>theSweetness</span><span class=p>,</span> <span class=nx>theFruitName</span><span class=p>)</span> <span class=p>{</span>

  <span class=k>this</span><span class=p>.</span><span class=nx>color</span> <span class=o>=</span> <span class=nx>theColor</span><span class=p>;</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>sweetness</span> <span class=o>=</span> <span class=nx>theSweetness</span><span class=p>;</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>fruitName</span> <span class=o>=</span> <span class=nx>theFruitName</span><span class=p>;</span>

  <span class=k>this</span><span class=p>.</span><span class=nx>showName</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
    <span class=c1>// access property</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;This is a &quot;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>fruitName</span><span class=p>);</span>
  <span class=p>}</span>

<span class=p>}</span>
<span class=c1>//With this pattern in place, it is very easy to create all sorts of fruits.</span>
<span class=kd>var</span> <span class=nx>mangoFruit</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Fruit</span> <span class=p>(</span><span class=s2>&quot;Yellow&quot;</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=s2>&quot;Mango&quot;</span><span class=p>);</span>
<span class=nx>mangoFruit</span><span class=p>.</span><span class=nx>showName</span><span class=p>();</span> <span class=c1>// This is a Mango.</span>

<span class=kd>var</span> <span class=nx>pineappleFruit</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Fruit</span> <span class=p>(</span><span class=s2>&quot;Brown&quot;</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=s2>&quot;Pineapple&quot;</span><span class=p>);</span>
<span class=nx>pineappleFruit</span><span class=p>.</span><span class=nx>showName</span><span class=p>();</span> <span class=c1>// This is a Pineapple.</span>
</pre></div> </td></tr></table> <h5 id=function-constructor-pattern-with-sharing-mechanism>Function constructor pattern with sharing mechanism<a class=headerlink href=#function-constructor-pattern-with-sharing-mechanism title="Permanent link">&para;</a></h5> <p>This makes object to share constructor function properties and methods. If one object make change to property called <code>color</code> the all other objects created from <code>Fruit</code> constructor function can see the change. <code>Prototype</code> object share among <code>Fruit</code> objects.</p> <p>If you want all objects to share property and method then put it into <code>prototype</code> property.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>function</span> <span class=nx>Fruit</span> <span class=p>()</span> <span class=p>{</span>
<span class=p>}</span>

<span class=nx>Fruit</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>color</span> <span class=o>=</span> <span class=s2>&quot;Yellow&quot;</span><span class=p>;</span>
<span class=nx>Fruit</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>sweetness</span> <span class=o>=</span> <span class=mi>7</span><span class=p>;</span>
<span class=nx>Fruit</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>fruitName</span> <span class=o>=</span> <span class=s2>&quot;Generic Fruit&quot;</span><span class=p>;</span>

<span class=nx>Fruit</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>showName</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&quot;This is a &quot;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>fruitName</span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>var</span> <span class=nx>mangoFruit</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Fruit</span> <span class=p>();</span>
<span class=nx>mangoFruit</span><span class=p>.</span><span class=nx>showName</span><span class=p>();</span>
</pre></div> </td></tr></table> <blockquote> <p>Best way to create object by Function Constructor pattern and incorporate prototype to add sharing feature in object if needed.</p> </blockquote> <h3 id=code-reuse-inheritance>Code reuse (Inheritance)<a class=headerlink href=#code-reuse-inheritance title="Permanent link">&para;</a></h3> <p>Which is done by object prototype pattern. But before we jump into various prototype pattern lets understand the prototype concept.</p> <h4 id=prototype-concept>Prototype concept<a class=headerlink href=#prototype-concept title="Permanent link">&para;</a></h4> <p>There are two interrelated concepts with prototype in JavaScript:</p> <h5 id=1-prototype-property>1. Prototype property<a class=headerlink href=#1-prototype-property title="Permanent link">&para;</a></h5> <blockquote> <p>Belong to function only.</p> </blockquote> <p>First, every JavaScript function has a prototype property (this property is empty by default), and you attach properties and methods on this prototype property when you want to implement inheritance. This prototype property is not enumerable; that is, it isn't accessible in a for/in loop.</p> <p><strong>The prototype property is used primarily for inheritance in Function Constructor</strong>; you add methods and properties on a function's prototype property to make those methods and properties available to instances of that function. Besides creation of objects by specified pattern, a <em>constructor</em> function does another useful thing — it <em>automatically sets a prototype object</em> <code>__proto__</code> for newly created objects when using <code>new</code> keyword with function prototype property.</p> <p><strong>Note:</strong> When we talk about <code>prototype</code> property then it is in the context of Function Constructor, which is used to implement sharing mechanism among instances that are created from function constructor method.</p> <h5 id=2-prototype-object-__proto__>2. Prototype object <code>__proto__</code><a class=headerlink href=#2-prototype-object-__proto__ title="Permanent link">&para;</a></h5> <blockquote> <p>Belongs to instances (object) created by <code>new</code> keyword.</p> </blockquote> <p>The second concept with prototype in JavaScript is the prototype object. <code>__proto__</code> is the actual object that is used in the lookup chain to resolve identifiers. It is a property that all objects have by default. In simple terms: An object's prototype object points to the object's "parent prototype"-- the object it inherited its properties from. It is set automatically when new object is created.</p> <p><strong>Step by step explanation of <code>prototype</code> property and <code>__proto__</code></strong></p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// Prototype property is created when a function is declared.</span>
<span class=c1>// `Person.prototype` property is created internally once you</span>
<span class=c1>// declare above function.</span>
<span class=kd>function</span> <span class=nx>Person</span><span class=p>(</span><span class=nx>dob</span><span class=p>){</span>
   <span class=k>this</span><span class=p>.</span><span class=nx>dob</span> <span class=o>=</span> <span class=nx>dob</span>
<span class=p>};</span>

<span class=c1>//adds a new method age to the `Person.prototype` Object.</span>
<span class=c1>// `Person.prototype` is an Object literal by default. Many</span>
<span class=c1>// properties can be added to the `Person.prototype`</span>
<span class=c1>// which are shared by `Person` instances created using `new Person()`.</span>
<span class=nx>Person</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>age</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(){</span><span class=k>return</span> <span class=nx>date</span><span class=o>-</span><span class=nx>dob</span><span class=p>};</span>

<span class=c1>// Every instance created using `new Person()` has a `__proto__`</span>
<span class=c1>// object attached internally by interpreter which points to the</span>
<span class=c1>// `Person.prototype`. This is the chain that is used to traverse</span>
<span class=c1>// to find a property of a particular object.</span>

<span class=c1>// this is when __proto__ object is attached to instance person1 and</span>
<span class=c1>// give value Person.prototype behind the scene.</span>
<span class=kd>var</span> <span class=nx>person1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Person</span><span class=p>(</span><span class=nx>somedate</span><span class=p>);</span>

<span class=c1>//person1 object has `__proto__&#39; object that point to its constructor</span>
<span class=c1>// function `prototype` property.</span>
<span class=c1>// that is: person1.__proto__ === Person.prototype</span>
</pre></div> </td></tr></table> <p><strong><code>constructor</code> property, accessing <code>prototype</code> property and <code>__proto__</code></strong></p> <p>Constructor property is simply a property of an object that points to the constructor of the object. Javascript internally set it for every object. So, if we create an empty object then it is treated by interpreter as an empty object but still it has property called <code>constructor</code>. Constructor tells, <strong>who has created this object.</strong></p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>var</span> <span class=nx>obj</span> <span class=o>=</span> <span class=p>{};</span> <span class=c1>//empty object, but still has property called `constructor`.</span>
<span class=nx>obj</span><span class=p>.</span><span class=nx>constructor</span> <span class=c1>// Object()</span>


<span class=c1>// defining function constructor</span>
<span class=kd>function</span> <span class=nx>C</span><span class=p>(){}</span>

<span class=kd>var</span> <span class=nx>o</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>C</span><span class=p>();</span>

<span class=nx>o</span><span class=p>.</span><span class=nx>constructor</span> <span class=c1>// points to C, object `o` is created from C() constructor function</span>

<span class=c1>//accessing __proto__ of object `o` which in turn points to C() constructor</span>
<span class=c1>// function&#39;s property called `prototype`.</span>
<span class=nb>Object</span><span class=p>.</span><span class=nx>getPrototypeOf</span><span class=p>(</span><span class=nx>o</span><span class=p>)</span> <span class=c1>// C.prototype</span>
<span class=nx>o</span><span class=p>.</span><span class=nx>constructor</span><span class=p>.</span><span class=nx>prototype</span> <span class=c1>// C.prototype</span>
<span class=nx>o</span><span class=p>.</span><span class=nx>__proto__</span> <span class=c1>// C.prototype</span>
</pre></div> </td></tr></table> <p><strong>Objects created with <code>new Object ()</code> or object literal <code>{}</code></strong></p> <p>All objects created with object literals and with the Object constructor inherits from <code>Object.prototype</code>.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7
8</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// The `userAccount` object and `userAccountOne` object created from</span>
<span class=c1>// `Object` therefore `__proto__` points to the Object.prototype.</span>

<span class=kd>var</span> <span class=nx>userAccount</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Object</span><span class=p>();</span>
<span class=kd>var</span> <span class=nx>userAccountOne</span> <span class=o>=</span> <span class=p>{};</span>

<span class=nx>userAccount</span><span class=p>.</span><span class=nx>__proto__</span> <span class=c1>// Object.prototype</span>
<span class=nx>userAccountOne</span><span class=p>.</span><span class=nx>__proto__</span> <span class=c1>// Object.prototype</span>
</pre></div> </td></tr></table> <p><strong>What happen when you change the </strong><code>prototype</code><strong> property of Function Constructor?</strong></p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>function</span> <span class=nx>Account</span><span class=p>()</span> <span class=p>{}</span>

<span class=c1>// Account(), internally when `prototype` property is created for function then</span>
<span class=c1>// interpreter attach `constructor` property to `prototype` object.</span>
<span class=nx>Account</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span>

<span class=c1>// replaced by `new Object`, this erase the `constructor` property already set for `prototype`</span>
<span class=nx>Account</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=p>{};</span>

<span class=nx>Account</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span> <span class=c1>// Object()</span>

<span class=c1>// Also instances created from Account has constructor points to `Object()`</span>
<span class=kd>var</span> <span class=nx>userAccount</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Account</span><span class=p>();</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>userAccount</span><span class=p>.</span><span class=nx>constructor</span><span class=p>);</span> <span class=c1>// points to `Object()`. It should point to `Account()`</span>

<span class=c1>// sometime we assign another object to prototype property for implementing inheritance.</span>
<span class=c1>// This makes constructor to point to the object which is assigned to prototype property.</span>
<span class=c1>// Check out &quot;Pseudoclassical pattern&quot; section where during inheritance we assign tempObj()</span>
<span class=c1>// to prototype property so that sharing can be done by copy by value mechanism rather</span>
<span class=c1>// than reference mechanism.</span>

<span class=c1>// to make constructor function unchanged just reassign it manually.</span>

<span class=kd>function</span> <span class=nx>Account</span><span class=p>()</span> <span class=p>{}</span>
<span class=nx>Account</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=p>{};</span> <span class=c1>//replaced by new Object</span>
<span class=nx>Account</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span> <span class=o>=</span> <span class=nx>Account</span><span class=p>;</span>

<span class=kd>var</span> <span class=nx>userAccount</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Account</span><span class=p>();</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>userAccount</span><span class=p>.</span><span class=nx>constructor</span><span class=p>);</span> <span class=c1>// points to Account()</span>
</pre></div> </td></tr></table> <p><strong>Prototype Chain.</strong></p> <p>Scan <code>__proto__</code> of all objects in chain. If a property or a method is not found in the object itself (i.e. the object has no such an own property), then there is an attempt to find this property/method in the <code>prototype object means __proto__</code> of object and scanned till interpreter reach <code>Object.prototype</code>, which is end of chain. In any stage when interpreter found property/method then it stops. If the property is not found in prototype chain then <code>undefined</code> value is returned.</p> <p>For example: It is one way look to <code>__proto__</code>, interpreter does not jump to parent. It looks down down in the chain.</p> <p><code>BaseObjectInstance.__proto__.__proto__.__proto__.__proto__</code> ends when encounter <code>Object.prototype</code></p> <h4 id=inheritance-patterns>Inheritance patterns<a class=headerlink href=#inheritance-patterns title="Permanent link">&para;</a></h4> <h5 id=1-pseudoclassical-pattern>[1] Pseudoclassical pattern<a class=headerlink href=#1-pseudoclassical-pattern title="Permanent link">&para;</a></h5> <blockquote> <p>with prototype, constructor function and new keyword</p> </blockquote> <p>A pattern which uses a <code>constructor function</code> and the <code>new</code> operator, combined with a <code>prototype</code> added to the constructor is said to be Pseudoclassical.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=cm>/**</span>
<span class=cm> * Point a child&#39;s prototype to a parent&#39;s prototype</span>
<span class=cm> **/</span>
<span class=kd>var</span> <span class=nx>extendObj</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>childObj</span><span class=p>,</span> <span class=nx>parentObj</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>childObj</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=nx>parentObj</span><span class=p>.</span><span class=nx>prototype</span><span class=p>;</span>
<span class=p>};</span>

<span class=c1>// base human object</span>
<span class=kd>var</span> <span class=nx>Human</span> <span class=o>=</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{};</span>
<span class=c1>// inhertiable attributes / methods</span>
<span class=nx>Human</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=p>{</span>
    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
    <span class=nx>gender</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
    <span class=nx>planetOfBirth</span><span class=o>:</span> <span class=s1>&#39;Earth&#39;</span><span class=p>,</span>
    <span class=nx>sayGender</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
        <span class=nx>alert</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>+</span> <span class=s1>&#39; says my gender is &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>gender</span><span class=p>);</span>
    <span class=p>},</span>
    <span class=nx>sayPlanet</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
        <span class=nx>alert</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>+</span> <span class=s1>&#39; was born on &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>planetOfBirth</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>};</span>

<span class=c1>// male</span>
<span class=kd>var</span> <span class=nx>Male</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>gender</span> <span class=o>=</span> <span class=s1>&#39;Male&#39;</span><span class=p>;</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;David&#39;</span><span class=p>;</span>
<span class=p>};</span>
<span class=c1>// inherits human</span>
<span class=nx>extendObj</span><span class=p>(</span><span class=nx>Male</span><span class=p>,</span> <span class=nx>Human</span><span class=p>);</span>

<span class=c1>// female</span>
<span class=kd>var</span> <span class=nx>Female</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>gender</span> <span class=o>=</span> <span class=s1>&#39;Female&#39;</span><span class=p>;</span>
<span class=p>};</span>
<span class=c1>// inherits human</span>
<span class=nx>extendObj</span><span class=p>(</span><span class=nx>Female</span><span class=p>,</span> <span class=nx>Human</span><span class=p>);</span>

<span class=c1>// new instances</span>
<span class=kd>var</span> <span class=nx>david</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Male</span><span class=p>(</span><span class=s1>&#39;David&#39;</span><span class=p>);</span>
<span class=kd>var</span> <span class=nx>jane</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Female</span><span class=p>(</span><span class=s1>&#39;Jane&#39;</span><span class=p>);</span>

<span class=nx>david</span><span class=p>.</span><span class=nx>sayGender</span><span class=p>();</span> <span class=c1>// David says my gender is Male</span>
<span class=nx>jane</span><span class=p>.</span><span class=nx>sayGender</span><span class=p>();</span> <span class=c1>// Jane says my gender is Female</span>

<span class=nx>Male</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>planetOfBirth</span> <span class=o>=</span> <span class=s1>&#39;Mars&#39;</span><span class=p>;</span>
<span class=nx>david</span><span class=p>.</span><span class=nx>sayPlanet</span><span class=p>();</span> <span class=c1>// David was born on Mars</span>
<span class=nx>jane</span><span class=p>.</span><span class=nx>sayPlanet</span><span class=p>();</span> <span class=c1>// Jane was born on Mars</span>
</pre></div> </td></tr></table> <p>As expected, we have achieved inheritance in a Pseudoclassical manner, however, this solution has a problem. If you look at the last line, you will see the alert says <code>Jane was born on Mars</code>, but what we really want it to say is <code>Jane was born on Earth</code>. The reason for this is the Male prototype was changed to "Mars".</p> <p>Given the direct link between the <code>Male</code> and <code>Human</code> prototype, if <code>Human</code> has many children inheriting from it, any change on a child's prototype properties will affect <code>Human</code>, and thus all children inheriting from <code>Human</code>. Changing a child's prototype should not affect other children inheriting from the same parent. The reason for this is <strong>because JavaScript passes objects by reference, not by value</strong>, meaning all children of Human inherit changes occurred on other children's prototypes.</p> <p><code>childObj.prototype = parentObj.prototype</code> does give us inheritance. However, if you want to fix the issue above, you need to replace the <code>extendObj</code> function to take the child's prototype and link it to a temporary object, whose prototype is the parent object's prototype. In this way, by creating a <code>temporary</code> "middle" object, you allow the temporary object to be empty and inherit its properties from Human.</p> <p>By doing this, you have solved the pass by reference issue with a new instance of an empty object, which still inherits from the parent, but is not affected by other children.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=cm>/**</span>
<span class=cm> * Create a new constructor function, whose prototype is the parent object&#39;s prototype.</span>
<span class=cm> * Set the child&#39;s prototype to the newly created constructor function.</span>
<span class=cm> **/</span>
<span class=kd>var</span> <span class=nx>extendObj</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>childObj</span><span class=p>,</span> <span class=nx>parentObj</span><span class=p>)</span> <span class=p>{</span>
    <span class=kd>var</span> <span class=nx>tmpObj</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{}</span>
    <span class=nx>tmpObj</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=nx>parentObj</span><span class=p>.</span><span class=nx>prototype</span><span class=p>;</span>
    <span class=nx>childObj</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>tmpObj</span><span class=p>();</span> <span class=c1>// new keyword create copy in memory than reference</span>
    <span class=nx>childObj</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span> <span class=o>=</span> <span class=nx>childObj</span><span class=p>;</span>
<span class=p>};</span>

<span class=c1>// base human object</span>
<span class=kd>var</span> <span class=nx>Human</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{};</span>
<span class=c1>// inhertiable attributes / methods</span>
<span class=nx>Human</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=p>{</span>
    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
    <span class=nx>gender</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
    <span class=nx>planetOfBirth</span><span class=o>:</span> <span class=s1>&#39;Earth&#39;</span><span class=p>,</span>
    <span class=nx>sayGender</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
        <span class=nx>alert</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>+</span> <span class=s1>&#39; says my gender is &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>gender</span><span class=p>);</span>
    <span class=p>},</span>
    <span class=nx>sayPlanet</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
        <span class=nx>alert</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>+</span> <span class=s1>&#39; was born on &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>planetOfBirth</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>};</span>

<span class=c1>// male</span>
<span class=kd>var</span> <span class=nx>Male</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>gender</span> <span class=o>=</span> <span class=s1>&#39;Male&#39;</span><span class=p>;</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;David&#39;</span><span class=p>;</span>
<span class=p>};</span>
<span class=c1>// inherits human</span>
<span class=nx>extendObj</span><span class=p>(</span><span class=nx>Male</span><span class=p>,</span> <span class=nx>Human</span><span class=p>);</span>

<span class=c1>// female</span>
<span class=kd>var</span> <span class=nx>Female</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>gender</span> <span class=o>=</span> <span class=s1>&#39;Female&#39;</span><span class=p>;</span>
<span class=p>};</span>
<span class=c1>// inherits human</span>
<span class=nx>extendObj</span><span class=p>(</span><span class=nx>Female</span><span class=p>,</span> <span class=nx>Human</span><span class=p>);</span>

<span class=c1>// new instances</span>
<span class=kd>var</span> <span class=nx>david</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Male</span><span class=p>(</span><span class=s1>&#39;David&#39;</span><span class=p>);</span>
<span class=kd>var</span> <span class=nx>jane</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Female</span><span class=p>(</span><span class=s1>&#39;Jane&#39;</span><span class=p>);</span>

<span class=nx>david</span><span class=p>.</span><span class=nx>sayGender</span><span class=p>();</span> <span class=c1>// David says my gender is Male</span>
<span class=nx>jane</span><span class=p>.</span><span class=nx>sayGender</span><span class=p>();</span> <span class=c1>// Jane says my gender is Female</span>

<span class=nx>Male</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>planetOfBirth</span> <span class=o>=</span> <span class=s1>&#39;Mars&#39;</span><span class=p>;</span>
<span class=nx>david</span><span class=p>.</span><span class=nx>sayPlanet</span><span class=p>();</span> <span class=c1>// David was born on Mars</span>
<span class=nx>jane</span><span class=p>.</span><span class=nx>sayPlanet</span><span class=p>();</span> <span class=c1>// Jane was born on Earth</span>
</pre></div> </td></tr></table> <p><strong>Rewrite Pseudoclassical with <code>Object.create()</code></strong> - instead using <code>extendObj()</code> to extend superclass as done above.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// Shape - superclass</span>
<span class=kd>function</span> <span class=nx>Shape</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>x</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>y</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>

<span class=c1>// superclass method</span>
<span class=nx>Shape</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>move</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>x</span> <span class=o>+=</span> <span class=nx>x</span><span class=p>;</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>y</span> <span class=o>+=</span> <span class=nx>y</span><span class=p>;</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=s1>&#39;Shape moved.&#39;</span><span class=p>);</span>
<span class=p>};</span>

<span class=c1>// Rectangle - subclass</span>
<span class=kd>function</span> <span class=nx>Rectangle</span><span class=p>()</span> <span class=p>{</span>
  <span class=nx>Shape</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=k>this</span><span class=p>);</span> <span class=c1>// call super constructor.</span>
<span class=p>}</span>

<span class=c1>// subclass extends superclass, not need to worry about doing new tempObj()</span>
<span class=nx>Rectangle</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=nx>Shape</span><span class=p>.</span><span class=nx>prototype</span><span class=p>);</span>
<span class=nx>Rectangle</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span> <span class=o>=</span> <span class=nx>Rectangle</span><span class=p>;</span>

<span class=c1>// ####### OR - in one statement than two as above #######</span>
<span class=nx>Rectangle</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=nx>Shape</span><span class=p>.</span><span class=nx>prototype</span><span class=p>,</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=o>:</span> <span class=p>{</span>
    <span class=nx>value</span><span class=o>:</span> <span class=nx>Rectangle</span><span class=p>,</span>
    <span class=nx>enumerable</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=nx>writable</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=nx>configurable</span><span class=o>:</span> <span class=kc>true</span>
  <span class=p>}</span>
<span class=p>});</span>

<span class=kd>var</span> <span class=nx>rect</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rectangle</span><span class=p>();</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Is rect an instance of Rectangle?&#39;</span><span class=p>,</span> <span class=nx>rect</span> <span class=k>instanceof</span> <span class=nx>Rectangle</span><span class=p>);</span><span class=c1>// true</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Is rect an instance of Shape?&#39;</span><span class=p>,</span> <span class=nx>rect</span> <span class=k>instanceof</span> <span class=nx>Shape</span><span class=p>);</span><span class=c1>// true</span>
<span class=nx>rect</span><span class=p>.</span><span class=nx>move</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span> <span class=c1>// Outputs, &#39;Shape moved.&#39;</span>
</pre></div> </td></tr></table> <h6 id=more-about-constructor>More about constructor<a class=headerlink href=#more-about-constructor title="Permanent link">&para;</a></h6> <p>Every object has constructor property which tells who has created an object.</p> <p>So how constructor property works and what happen during prototype inheritance.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>var</span> <span class=nx>P</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{};</span>
<span class=c1>// interpreter creates an prototype object behind scene for</span>
<span class=c1>// constructor function P and set constructor === P</span>
<span class=nx>P</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>vip</span> <span class=o>=</span> <span class=s2>&quot;Parent var&quot;</span><span class=p>;</span>

<span class=cm>/***</span>
<span class=cm>IF you try to do:</span>

<span class=cm>P.prototype = {</span>
<span class=cm>  vip: &quot;Parent var&quot;</span>
<span class=cm>};</span>

<span class=cm>this overwrite constructor property, so instead point to P it now set to Object.</span>
<span class=cm>So in order to reset it to original one you must do</span>

<span class=cm>p.prototype.constructor = P;</span>
<span class=cm>***/</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;P =&gt; &#39;</span> <span class=o>+</span> <span class=nx>P</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// P</span>

<span class=kd>var</span> <span class=nx>C</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
<span class=p>};</span>
<span class=c1>// interpreter set C.prototype object constructor to C</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;C =&gt; &#39;</span> <span class=o>+</span> <span class=nx>C</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// C</span>

<span class=nx>C</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=nx>P</span><span class=p>.</span><span class=nx>prototype</span><span class=p>;</span>
<span class=c1>// line 25 change the C.prototype constructor to P</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;C =&gt; &#39;</span> <span class=o>+</span> <span class=nx>C</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// P</span>
<span class=c1>// reset C.prototype constructor to C</span>
<span class=nx>C</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span> <span class=o>=</span> <span class=nx>C</span><span class=p>;</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;C =&gt; &#39;</span> <span class=o>+</span> <span class=nx>C</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// C</span>

<span class=kd>var</span> <span class=nx>o</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>C</span><span class=p>();</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>o</span><span class=p>.</span><span class=nx>vip</span><span class=p>);</span>
</pre></div> </td></tr></table> <h5 id=2-functional-pattern>[2] Functional pattern<a class=headerlink href=#2-functional-pattern title="Permanent link">&para;</a></h5> <blockquote> <p>without prototype, constructor function and new keyword</p> </blockquote> <p>This pattern allows one object to inherit from another, take the result and augment it at the child level to achieve inheritance. What this really means, is you create an object as your parent, pass the child object to the parent to inherit / apply its properties, and return the resulting object back to the child, who can then augment its own properties to the object returned from the parent.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>var</span> <span class=nx>human</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
    <span class=kd>var</span> <span class=nx>that</span> <span class=o>=</span> <span class=p>{};</span>

    <span class=nx>that</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span> <span class=o>||</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
    <span class=nx>that</span><span class=p>.</span><span class=nx>gender</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
    <span class=nx>that</span><span class=p>.</span><span class=nx>planetOfBirth</span> <span class=o>=</span> <span class=s1>&#39;Earth&#39;</span><span class=p>;</span>
    <span class=nx>that</span><span class=p>.</span><span class=nx>sayGender</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
        <span class=nx>alert</span><span class=p>(</span><span class=nx>that</span><span class=p>.</span><span class=nx>name</span> <span class=o>+</span> <span class=s1>&#39; says my gender is &#39;</span> <span class=o>+</span> <span class=nx>that</span><span class=p>.</span><span class=nx>gender</span><span class=p>);</span>
    <span class=p>};</span>
    <span class=nx>that</span><span class=p>.</span><span class=nx>sayPlanet</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
        <span class=nx>alert</span><span class=p>(</span><span class=nx>that</span><span class=p>.</span><span class=nx>name</span> <span class=o>+</span> <span class=s1>&#39; was born on &#39;</span> <span class=o>+</span> <span class=nx>that</span><span class=p>.</span><span class=nx>planetOfBirth</span><span class=p>);</span>
    <span class=p>};</span>

    <span class=k>return</span> <span class=nx>that</span><span class=p>;</span>
<span class=p>}</span>

<span class=kd>var</span> <span class=nx>male</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
    <span class=kd>var</span> <span class=nx>that</span> <span class=o>=</span> <span class=nx>human</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span>
    <span class=nx>that</span><span class=p>.</span><span class=nx>gender</span> <span class=o>=</span> <span class=s1>&#39;Male&#39;</span><span class=p>;</span>
    <span class=k>return</span> <span class=nx>that</span><span class=p>;</span>
<span class=p>}</span>

<span class=kd>var</span> <span class=nx>female</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
    <span class=kd>var</span> <span class=nx>that</span> <span class=o>=</span> <span class=nx>human</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span>
    <span class=nx>that</span><span class=p>.</span><span class=nx>gender</span> <span class=o>=</span> <span class=s1>&#39;Female&#39;</span><span class=p>;</span>
    <span class=k>return</span> <span class=nx>that</span><span class=p>;</span>
<span class=p>}</span>

<span class=kd>var</span> <span class=nx>david</span> <span class=o>=</span> <span class=nx>male</span><span class=p>(</span><span class=s1>&#39;David&#39;</span><span class=p>);</span>
<span class=kd>var</span> <span class=nx>jane</span> <span class=o>=</span> <span class=nx>female</span><span class=p>(</span><span class=s1>&#39;Jane&#39;</span><span class=p>);</span>

<span class=nx>david</span><span class=p>.</span><span class=nx>sayGender</span><span class=p>();</span> <span class=c1>// David says my gender is Male</span>
<span class=nx>jane</span><span class=p>.</span><span class=nx>sayGender</span><span class=p>();</span> <span class=c1>// Jane says my gender is Female</span>

<span class=nx>david</span><span class=p>.</span><span class=nx>planetOfBirth</span> <span class=o>=</span> <span class=s1>&#39;Mars&#39;</span><span class=p>;</span>
<span class=nx>david</span><span class=p>.</span><span class=nx>sayPlanet</span><span class=p>();</span> <span class=c1>// David was born on Mars</span>
<span class=nx>jane</span><span class=p>.</span><span class=nx>sayPlanet</span><span class=p>();</span> <span class=c1>// Jane was born on Earth</span>
</pre></div> </td></tr></table> <p>As you can see by using this pattern, there is no need to use the prototype chain, constructors or the "new" keyword. This however, has a downside for performance because each object is unique, meaning each function call creates a new object, so the JavaScript interpreter has to assign new memory to the function in order to recompile everything inside of it as unique again.</p> <p>There are also benefits to this approach, as the closures of each function allow for good use of public and private methods / attributes. Let's take this code for example, which shows a parent class of vehicle and children classes of <code>motorbike</code> and <code>boat</code>.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>var</span> <span class=nx>vehicle</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>attrs</span><span class=p>)</span> <span class=p>{</span>
    <span class=kd>var</span> <span class=nx>_privateObj</span> <span class=o>=</span> <span class=p>{</span>
        <span class=nx>hasEngine</span><span class=o>:</span> <span class=kc>true</span>
    <span class=p>},</span>
    <span class=nx>that</span> <span class=o>=</span> <span class=p>{};</span>

    <span class=nx>that</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>attrs</span><span class=p>.</span><span class=nx>name</span> <span class=o>||</span> <span class=kc>null</span><span class=p>;</span>
    <span class=nx>that</span><span class=p>.</span><span class=nx>engineSize</span> <span class=o>=</span> <span class=nx>attrs</span><span class=p>.</span><span class=nx>engineSize</span> <span class=o>||</span> <span class=kc>null</span><span class=p>;</span>
    <span class=nx>that</span><span class=p>.</span><span class=nx>hasEngine</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
        <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;This &#39;</span> <span class=o>+</span> <span class=nx>that</span><span class=p>.</span><span class=nx>name</span> <span class=o>+</span> <span class=s1>&#39; has an engine: &#39;</span> <span class=o>+</span> <span class=nx>_privateObj</span><span class=p>.</span><span class=nx>hasEngine</span><span class=p>);</span>
    <span class=p>};</span>

    <span class=k>return</span> <span class=nx>that</span><span class=p>;</span>
<span class=p>}</span>

<span class=kd>var</span> <span class=nx>motorbike</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>

    <span class=c1>// private</span>
    <span class=kd>var</span> <span class=nx>_privateObj</span> <span class=o>=</span> <span class=p>{</span>
        <span class=nx>numWheels</span><span class=o>:</span> <span class=mi>2</span>
    <span class=p>},</span>

    <span class=c1>// inherit</span>
    <span class=nx>that</span> <span class=o>=</span> <span class=nx>vehicle</span><span class=p>({</span>
        <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Motorbike&#39;</span><span class=p>,</span>
        <span class=nx>engineSize</span><span class=o>:</span> <span class=s1>&#39;Small&#39;</span>
    <span class=p>});</span>

    <span class=c1>// public</span>
    <span class=nx>that</span><span class=p>.</span><span class=nx>totalNumWheels</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
        <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;This Motobike has &#39;</span> <span class=o>+</span> <span class=nx>_privateObj</span><span class=p>.</span><span class=nx>numWheels</span> <span class=o>+</span> <span class=s1>&#39; wheels&#39;</span><span class=p>);</span>
    <span class=p>};</span>

    <span class=nx>that</span><span class=p>.</span><span class=nx>increaseWheels</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
        <span class=nx>_privateObj</span><span class=p>.</span><span class=nx>numWheels</span><span class=o>++</span><span class=p>;</span>
    <span class=p>};</span>

    <span class=k>return</span> <span class=nx>that</span><span class=p>;</span>

<span class=p>};</span>

<span class=kd>var</span> <span class=nx>boat</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>

    <span class=c1>// inherit</span>
    <span class=nx>that</span> <span class=o>=</span> <span class=nx>vehicle</span><span class=p>({</span>
        <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Boat&#39;</span><span class=p>,</span>
        <span class=nx>engineSize</span><span class=o>:</span> <span class=s1>&#39;Large&#39;</span>
    <span class=p>});</span>

    <span class=k>return</span> <span class=nx>that</span><span class=p>;</span>

<span class=p>};</span>

<span class=nx>myBoat</span> <span class=o>=</span> <span class=nx>boat</span><span class=p>();</span>
<span class=nx>myBoat</span><span class=p>.</span><span class=nx>hasEngine</span><span class=p>();</span> <span class=c1>// This Boat has an engine: true</span>
<span class=nx>alert</span><span class=p>(</span><span class=nx>myBoat</span><span class=p>.</span><span class=nx>engineSize</span><span class=p>);</span> <span class=c1>// Large</span>

<span class=nx>myMotorbike</span> <span class=o>=</span> <span class=nx>motorbike</span><span class=p>();</span>
<span class=nx>myMotorbike</span><span class=p>.</span><span class=nx>hasEngine</span><span class=p>();</span> <span class=c1>// This Motorbike has an engine: true</span>
<span class=nx>myMotorbike</span><span class=p>.</span><span class=nx>increaseWheels</span><span class=p>();</span>
<span class=nx>myMotorbike</span><span class=p>.</span><span class=nx>totalNumWheels</span><span class=p>();</span> <span class=c1>// This Motorbike has 3 wheels</span>
<span class=nx>alert</span><span class=p>(</span><span class=nx>myMotorbike</span><span class=p>.</span><span class=nx>engineSize</span><span class=p>);</span> <span class=c1>// Small</span>

<span class=nx>myMotorbike2</span> <span class=o>=</span> <span class=nx>motorbike</span><span class=p>();</span>
<span class=nx>myMotorbike2</span><span class=p>.</span><span class=nx>totalNumWheels</span><span class=p>();</span> <span class=c1>// This Motorbike has 2 wheels</span>

<span class=nx>myMotorbike</span><span class=p>.</span><span class=nx>_privateObj</span><span class=p>.</span><span class=nx>numWheels</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=c1>// undefined</span>
<span class=nx>myBoat</span><span class=p>.</span><span class=nx>totalNumWheels</span><span class=p>();</span> <span class=c1>// undefined</span>
</pre></div> </td></tr></table> <p>You can see that it is fairly easy to provide encapsulation. The <code>_privateObj</code> can not be modified from outside of the object, unless exposed by a public method like <code>increaseWheels()</code>. Similarly, private values can also only be read when exposed by a public method, such as motorbike's <code>totalNumWheels()</code> function.</p> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Abhay Garg </div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/application.c648116f.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>