<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Notebook collections"><link href=https://abhaydgarg.github.io/Notebook/index.html/javascript/ecma3/variable-object/ rel=canonical><meta name=author content="Abhay Garg"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.2"><title>Variable object - Notebook</title><link rel=stylesheet href=../../../assets/stylesheets/application.30686662.css><link rel=stylesheet href=../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#2196f3><script src=../../../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono&display=fallback"><style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#variable-object tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Notebook </span> <span class=md-header-nav__topic> Variable object </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-nav__button md-logo"> <i class=md-icon></i> </a> Notebook </label> <div class=md-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../computer-science/ title=CS class=md-nav__link> CS </a> </li> <li class=md-nav__item> <a href=../../../parser/ title=Parser class=md-nav__link> Parser </a> </li> <li class=md-nav__item> <a href=../../../data-structure-and-algorithms/ title="Data Structure and Algorithms" class=md-nav__link> Data Structure and Algorithms </a> </li> <li class=md-nav__item> <a href=../../../oops/ title=OOPS class=md-nav__link> OOPS </a> </li> <li class=md-nav__item> <a href=../../../design-patterns/ title="Design Patterns" class=md-nav__link> Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../regex/ title=Regex class=md-nav__link> Regex </a> </li> <li class=md-nav__item> <a href=../../../git/ title=GIT class=md-nav__link> GIT </a> </li> <li class=md-nav__item> <a href=../../../css/ title=CSS class=md-nav__link> CSS </a> </li> <li class=md-nav__item> <a href=../../../rest-api/ title="REST API" class=md-nav__link> REST API </a> </li> <li class=md-nav__item> <a href=../../../eslint/ title=ESLint class=md-nav__link> ESLint </a> </li> <li class=md-nav__item> <a href=../../ title=Javascript class=md-nav__link> Javascript </a> </li> <li class=md-nav__item> <a href=../../../nodejs/ title=Node.js class=md-nav__link> Node.js </a> </li> <li class=md-nav__item> <a href=../../../react/ title=React class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../../react-native/ title="React Native" class=md-nav__link> React Native </a> </li> <li class=md-nav__item> <a href=../../../redux-saga/ title="Redux Saga" class=md-nav__link> Redux Saga </a> </li> <li class=md-nav__item> <a href=../../../rxjs/ title=RxJS class=md-nav__link> RxJS </a> </li> <li class=md-nav__item> <a href=../../../mysql/ title=MySQL class=md-nav__link> MySQL </a> </li> <li class=md-nav__item> <a href=../../../mongodb/ title=MongoDB class=md-nav__link> MongoDB </a> </li> <li class=md-nav__item> <a href=../../../web-security/ title="Web Security" class=md-nav__link> Web Security </a> </li> <li class=md-nav__item> <a href=../../../rust/ title=Rust class=md-nav__link> Rust </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#data-declaration class=md-nav__link> Data declaration </a> </li> <li class=md-nav__item> <a href=#variable-object-in-global-context class=md-nav__link> Variable object in global context </a> </li> <li class=md-nav__item> <a href=#variable-object-in-function-context class=md-nav__link> Variable object in function context </a> </li> <li class=md-nav__item> <a href=#phases-of-processing-the-context-code class=md-nav__link> Phases of processing the context code </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#entering-the-execution-context class=md-nav__link> Entering the execution context </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#compile-code class=md-nav__link> Compile Code </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-formal-parameters-first class=md-nav__link> [1]. Formal parameters first </a> </li> <li class=md-nav__item> <a href=#2-then-function-declaration class=md-nav__link> [2]. then function declaration </a> </li> <li class=md-nav__item> <a href=#3-at-the-end-variable-declaration class=md-nav__link> [3]. at the end variable declaration </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#code-execution class=md-nav__link> Code execution </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#run-code class=md-nav__link> Run code </a> </li> <li class=md-nav__item> <a href=#how-value-can-be-changed-at-the-execution-phase class=md-nav__link> How value can be changed at the execution phase </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#another-example class=md-nav__link> Another example </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/abhaydgarg/Notebook/tree/master/src/javascript/ecma3/variable-object.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=variable-object>Variable object<a class=headerlink href=#variable-object title="Permanent link">&para;</a></h1> <p>Many ECMAScript programmers know that variables are closely related with the <strong>execution context.</strong></p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7
8</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span> <span class=c1>// variable of the global context</span>

<span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
  <span class=kd>var</span> <span class=nx>b</span> <span class=o>=</span> <span class=mi>20</span><span class=p>;</span> <span class=c1>// local variable of the function context</span>
<span class=p>})();</span>

<span class=nx>alert</span><span class=p>(</span><span class=nx>a</span><span class=p>);</span> <span class=c1>// 10</span>
<span class=nx>alert</span><span class=p>(</span><span class=nx>b</span><span class=p>);</span> <span class=c1>// &quot;b&quot; is not defined</span>
</pre></div> </td></tr></table> <p>There are only two kind of scope, one is called global and another is local. Only function creates local scope and everything other than function fall into global scope. The block of <code>for</code> loop in ECMAScript does not create a local context.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>for</span> <span class=p>(</span><span class=kd>var</span> <span class=nx>k</span> <span class=k>in</span> <span class=p>{</span><span class=nx>a</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>b</span><span class=o>:</span> <span class=mi>2</span><span class=p>})</span> <span class=p>{</span>
  <span class=nx>alert</span><span class=p>(</span><span class=nx>k</span><span class=p>);</span>
<span class=p>}</span>

<span class=nx>alert</span><span class=p>(</span><span class=nx>k</span><span class=p>);</span> <span class=c1>// variable &quot;k&quot; still in scope even the loop is finished</span>
</pre></div> </td></tr></table> <p>Let’s see in more details what occurs when we declare our data.</p> <h2 id=data-declaration>Data declaration<a class=headerlink href=#data-declaration title="Permanent link">&para;</a></h2> <p>A <em>variable object (in abbreviated form — VO)</em> is a special object related with an execution context and which stores:</p> <ul> <li>variables (with <code>var</code> declaration).</li> <li>function declarations (FunctionDeclaration, in abbreviated form FD), not function expression. Function expression are not included in to VO.</li> <li>and function formal parameters.</li> </ul> <blockquote> <p>Notice, in ES5 the concept of <em>variable object</em> is replaced with <em>lexical environments</em> model.</p> </blockquote> <p>Schematically, it is possible to present variable object as a normal ECMAScript object:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nx>VO</span> <span class=o>=</span> <span class=p>{};</span>
</pre></div> </td></tr></table> <p>And as we said, VO is a property of an execution context:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nx>activeExecutionContext</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>VO</span><span class=o>:</span> <span class=p>{</span>
    <span class=c1>// context data (var, FD, function arguments)</span>
  <span class=p>}</span>
<span class=p>};</span>
</pre></div> </td></tr></table> <p>For example:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>

<span class=kd>function</span> <span class=nx>test</span><span class=p>(</span><span class=nx>x</span><span class=p>)</span> <span class=p>{</span>
  <span class=kd>var</span> <span class=nx>b</span> <span class=o>=</span> <span class=mi>20</span><span class=p>;</span>
<span class=p>};</span>

<span class=nx>test</span><span class=p>(</span><span class=mi>30</span><span class=p>);</span>
</pre></div> </td></tr></table> <p>And corresponding variable objects are:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// Variable object of the global context</span>
<span class=nx>VO</span><span class=p>(</span><span class=nx>globalContext</span><span class=p>)</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>a</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
  <span class=nx>test</span><span class=o>:</span> <span class=o>&lt;</span><span class=nx>reference</span> <span class=nx>to</span> <span class=kd>function</span><span class=o>&gt;</span>
<span class=p>};</span>

<span class=c1>// Variable object of the &quot;test&quot; function local context</span>
<span class=nx>VO</span><span class=p>(</span><span class=nx>test</span> <span class=nx>functionContext</span><span class=p>)</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>x</span><span class=o>:</span> <span class=mi>30</span><span class=p>,</span>
  <span class=nx>b</span><span class=o>:</span> <span class=mi>20</span>
<span class=p>};</span>
</pre></div> </td></tr></table> <h2 id=variable-object-in-global-context>Variable object in global context<a class=headerlink href=#variable-object-in-global-context title="Permanent link">&para;</a></h2> <p><em>Global object</em> is the object which is created before entering any execution context; this object exists in the single copy, its properties are accessible from any place of the program, the life cycle of the global object ends with program end.</p> <p>The global object is initialized with properties such as <code>Math</code>, <code>String</code>, <code>Date</code>, <code>parseInt</code> etc., and also in browser environment, <code>window</code> property of the global object refers back to global object (however, not in all implementations):</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nx>global</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nb>Math</span><span class=o>:</span> <span class=o>&lt;</span><span class=p>...</span><span class=o>&gt;</span><span class=p>,</span>
  <span class=nb>String</span><span class=o>:</span> <span class=o>&lt;</span><span class=p>...</span><span class=o>&gt;</span>
  <span class=p>...</span>
  <span class=p>...</span>
  <span class=nb>window</span><span class=o>:</span> <span class=nx>global</span> <span class=c1>// refer back to global object</span>
<span class=p>};</span>
</pre></div> </td></tr></table> <p>So, coming back to variable object of the global context — variable object is the <em>global object itself</em>.</p> <p>So variable object is the <em>global object itself</em> that’s why we have an ability to refer global variables via property names of the global object without prefix.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nx>VO</span><span class=p>(</span><span class=nx>globalContext</span><span class=p>)</span> <span class=o>===</span> <span class=nx>global</span><span class=p>;</span>
</pre></div> </td></tr></table> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nb>String</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span> <span class=c1>// means global.String(10);</span>

<span class=c1>// with prefixes</span>
<span class=nb>window</span><span class=p>.</span><span class=nx>a</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span> <span class=c1>//</span>
<span class=nx>global</span><span class=p>.</span><span class=nb>window</span><span class=p>.</span><span class=nx>a</span> <span class=c1>// 10</span>
<span class=nx>global</span><span class=p>.</span><span class=nx>a</span> <span class=c1>// 10;</span>
<span class=k>this</span><span class=p>.</span><span class=nx>b</span> <span class=o>=</span> <span class=mi>20</span><span class=p>;</span> <span class=c1>// global.b = 20;</span>
</pre></div> </td></tr></table> <h2 id=variable-object-in-function-context>Variable object in function context<a class=headerlink href=#variable-object-in-function-context title="Permanent link">&para;</a></h2> <p>Execution context of function or VO of function is inaccessible directly, and its role is played by an <em>activation object (in abbreviated form — AO)</em>.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// VO of function context is called AO</span>
<span class=nx>VO</span><span class=p>(</span><span class=nx>functionContext</span><span class=p>)</span> <span class=o>===</span> <span class=nx>AO</span><span class=p>;</span>
</pre></div> </td></tr></table> <p>An <em>activation object</em> is created on entering the context of a function and initialized by property <code>arguments</code> which is actually a <em>Arguments object</em>:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nx>AO</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>arguments</span><span class=o>:</span> <span class=o>&lt;</span><span class=nx>ArgO</span><span class=o>&gt;</span>
<span class=p>};</span>
</pre></div> </td></tr></table> <p><em>Arguments</em> object is a property of the activation object. It contains the following properties:</p> <ul> <li><em>callee</em> — the reference to the current function.</li> <li><em>length</em> — quantity of actual_ passed_ arguments.</li> <li><em>properties-indexes</em> - Quantity of these properties-indexes is equal to <code>arguments.length</code>.</li> </ul> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>function</span> <span class=nx>foo</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>,</span> <span class=nx>z</span><span class=p>)</span> <span class=p>{</span>

  <span class=c1>// quantity of defined function arguments (x, y, z)</span>
  <span class=nx>alert</span><span class=p>(</span><span class=nx>foo</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span> <span class=c1>// 3</span>

  <span class=c1>// quantity of actual passed arguments (only x, y)</span>
  <span class=nx>alert</span><span class=p>(</span><span class=nx>arguments</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span> <span class=c1>// 2</span>

  <span class=c1>// reference of a function to itself</span>
  <span class=nx>alert</span><span class=p>(</span><span class=nx>arguments</span><span class=p>.</span><span class=nx>callee</span> <span class=o>===</span> <span class=nx>foo</span><span class=p>);</span> <span class=c1>// true</span>

  <span class=c1>// parameters sharing</span>
  <span class=nx>alert</span><span class=p>(</span><span class=nx>x</span> <span class=o>===</span> <span class=nx>arguments</span><span class=p>[</span><span class=mi>0</span><span class=p>]);</span> <span class=c1>// true</span>
  <span class=nx>alert</span><span class=p>(</span><span class=nx>x</span><span class=p>);</span> <span class=c1>// 10</span>

  <span class=nx>arguments</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>20</span><span class=p>;</span>
  <span class=nx>alert</span><span class=p>(</span><span class=nx>x</span><span class=p>);</span> <span class=c1>// 20</span>

  <span class=nx>x</span> <span class=o>=</span> <span class=mi>30</span><span class=p>;</span>
  <span class=nx>alert</span><span class=p>(</span><span class=nx>arguments</span><span class=p>[</span><span class=mi>0</span><span class=p>]);</span> <span class=c1>// 30</span>

  <span class=c1>// however, for not passed argument z,</span>
  <span class=c1>// related index-property of the arguments</span>
  <span class=c1>// object is not shared</span>

  <span class=nx>z</span> <span class=o>=</span> <span class=mi>40</span><span class=p>;</span>
  <span class=nx>alert</span><span class=p>(</span><span class=nx>arguments</span><span class=p>[</span><span class=mi>2</span><span class=p>]);</span> <span class=c1>// undefined</span>

  <span class=nx>arguments</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=mi>50</span><span class=p>;</span>
  <span class=nx>alert</span><span class=p>(</span><span class=nx>z</span><span class=p>);</span> <span class=c1>// 40</span>

<span class=p>}</span>

<span class=nx>foo</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>);</span>
</pre></div> </td></tr></table> <blockquote> <p>In ES5 the concept of activation object is also replaced with common and single model of lexical environments.</p> </blockquote> <h2 id=phases-of-processing-the-context-code>Phases of processing the context code<a class=headerlink href=#phases-of-processing-the-context-code title="Permanent link">&para;</a></h2> <p>Now we have reached at the main point. Processing of the execution context code is divided on two basic stages:</p> <ol> <li>Entering the execution context <strong>(Compile Code)</strong>.</li> <li>Code execution <strong>(Run Code)</strong>.</li> </ol> <h3 id=entering-the-execution-context>Entering the execution context<a class=headerlink href=#entering-the-execution-context title="Permanent link">&para;</a></h3> <h4 id=compile-code>Compile Code<a class=headerlink href=#compile-code title="Permanent link">&para;</a></h4> <p>On entering the execution context (but <em>before</em> the code execution), VO is filled with the following properties in the order mentioned below.<strong> </strong></p> <h5 id=1-formal-parameters-first>[1]. Formal parameters first<a class=headerlink href=#1-formal-parameters-first title="Permanent link">&para;</a></h5> <p>Interpreter creates VO object property and value from formal parameters of function. If parameter is not passed or missing then still property is created in VO object but with <code>undefined</code> value.</p> <h5 id=2-then-function-declaration>[2]. then function declaration<a class=headerlink href=#2-then-function-declaration title="Permanent link">&para;</a></h5> <p>Interpreter creates VO object property with name of function declaration. If VO object already contains a property then it value of existing property with new one.</p> <h5 id=3-at-the-end-variable-declaration>[3]. at the end variable declaration<a class=headerlink href=#3-at-the-end-variable-declaration title="Permanent link">&para;</a></h5> <p>Interpreter creates VO object property with name of variable and value <code>undefined</code>. If VO object already contains a property then the variable declaration does not disturb the existing property.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7
8</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>function</span> <span class=nx>test</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>)</span> <span class=p>{</span>
  <span class=kd>var</span> <span class=nx>c</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
  <span class=kd>function</span> <span class=nx>d</span><span class=p>()</span> <span class=p>{}</span>
  <span class=kd>var</span> <span class=nx>e</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>_e</span><span class=p>()</span> <span class=p>{};</span>
  <span class=p>(</span><span class=kd>function</span> <span class=nx>x</span><span class=p>()</span> <span class=p>{});</span>
<span class=p>}</span>

<span class=nx>test</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span> <span class=c1>// call</span>
</pre></div> </td></tr></table> <p>On <em>entering</em> the <code>test</code> function context with the passed parameter <code>10</code>, AO is the following:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nx>AO</span><span class=p>(</span><span class=nx>test</span><span class=p>)</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>a</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
  <span class=nx>b</span><span class=o>:</span> <span class=kc>undefined</span><span class=p>,</span>
  <span class=nx>c</span><span class=o>:</span> <span class=kc>undefined</span><span class=p>,</span>
  <span class=nx>d</span><span class=o>:</span> <span class=o>&lt;</span><span class=nx>reference</span> <span class=nx>to</span> <span class=nx>FunctionDeclaration</span> <span class=s2>&quot;d&quot;</span><span class=o>&gt;</span>
  <span class=nx>e</span><span class=o>:</span> <span class=kc>undefined</span>
<span class=p>};</span>
</pre></div> </td></tr></table> <p>Notice, that AO does not contain function <code>x</code>. This is because <code>x</code> is not a function declaration but the <em>function-expression (FunctionExpression, in abbreviated form FE)</em> which <em>does not affect VO</em>.</p> <p>However, function <code>_e</code> is also a function-expression, but because of assigning it to the variable <code>e</code>, it becomes accessible via the <code>e</code> name.</p> <h3 id=code-execution>Code execution<a class=headerlink href=#code-execution title="Permanent link">&para;</a></h3> <h4 id=run-code>Run code<a class=headerlink href=#run-code title="Permanent link">&para;</a></h4> <p>By this moment, AO/VO is already filled by properties (though, not all of them have the real values and most of them yet still have initial value <code>undefined</code>).</p> <p>Consider privious example; at the time of code execution phase the AO/VO are modified as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nx>AO</span><span class=p>(</span><span class=nx>test</span><span class=p>)</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>a</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
  <span class=nx>b</span><span class=o>:</span> <span class=kc>undefined</span><span class=p>,</span>
  <span class=nx>c</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
  <span class=nx>d</span><span class=o>:</span> <span class=o>&lt;</span><span class=nx>reference</span> <span class=nx>to</span> <span class=nx>FunctionDeclaration</span> <span class=s2>&quot;d&quot;</span><span class=o>&gt;</span>
  <span class=nx>e</span><span class=o>:</span> <span class=o>&lt;</span><span class=nx>reference</span> <span class=nx>to</span> <span class=nx>FunctionExpression</span> <span class=s2>&quot;_e&quot;</span><span class=o>&gt;</span>
<span class=p>};</span>
</pre></div> </td></tr></table> <p>But the function expression <code>x</code> is not in the AO/VO. If we try to call <code>x</code> function <em>before</em> or <em>even after</em> definition, we get an error: <code>"x" is not defined</code>.</p> <h4 id=how-value-can-be-changed-at-the-execution-phase>How value can be changed at the execution phase<a class=headerlink href=#how-value-can-be-changed-at-the-execution-phase title="Permanent link">&para;</a></h4> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nx>alert</span><span class=p>(</span><span class=nx>x</span><span class=p>);</span> <span class=c1>// function</span>

<span class=kd>var</span> <span class=nx>x</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
<span class=nx>alert</span><span class=p>(</span><span class=nx>x</span><span class=p>);</span> <span class=c1>// 10</span>

<span class=nx>x</span> <span class=o>=</span> <span class=mi>20</span><span class=p>;</span>

<span class=kd>function</span> <span class=nx>x</span><span class=p>()</span> <span class=p>{}</span>

<span class=nx>alert</span><span class=p>(</span><span class=nx>x</span><span class=p>);</span> <span class=c1>// 20</span>
</pre></div> </td></tr></table> <p>Why in the first alert <code>x</code> is a function and also accessible <em>before</em> the declaration? Why it’s not <code>10</code> or <code>20</code>? Because, according to the rule — VO is filled with function declarations before variable declaration <em>on entering the context, _and variable declaration with same name _do not disturb</em> the value of the <em>already declared function or formal parameter with the same name</em>. Therefore, on entering the context VO is filled as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// Compile phase</span>
<span class=nx>VO</span> <span class=o>=</span> <span class=p>{};</span>

<span class=nx>VO</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=o>&lt;</span><span class=nx>reference</span> <span class=nx>to</span> <span class=nx>FunctionDeclaration</span> <span class=s2>&quot;x&quot;</span><span class=o>&gt;</span>

<span class=c1>// found var x = 10;</span>
<span class=c1>// if function &quot;x&quot; would not be already defined</span>
<span class=c1>// then &quot;x&quot; will be undefined, but in this case</span>
<span class=c1>// variable declaration does not disturb</span>
<span class=c1>// the value of the function with the same name</span>

<span class=nx>VO</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=o>&lt;</span><span class=nx>the</span> <span class=nx>value</span> <span class=nx>is</span> <span class=nx>not</span> <span class=nx>disturbed</span><span class=p>,</span> <span class=nx>still</span> <span class=kd>function</span><span class=o>&gt;</span>
</pre></div> </td></tr></table> <p>And then at code execution phase, VO is modified as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// execution phase</span>
<span class=nx>VO</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
<span class=nx>VO</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>20</span><span class=p>;</span>
</pre></div> </td></tr></table> <h5 id=another-example>Another example<a class=headerlink href=#another-example title="Permanent link">&para;</a></h5> <p>In the example below we see again that variables are put into the VO on entering the context phase (so, the <code>else</code> block is <em>never executed</em>, but nevertheless, the variable <code>b</code> <em>exists</em> in VO):</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7
8</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>if</span> <span class=p>(</span><span class=kc>true</span><span class=p>)</span> <span class=p>{</span>
  <span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
  <span class=kd>var</span> <span class=nx>b</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span>
<span class=p>}</span>

<span class=nx>alert</span><span class=p>(</span><span class=nx>a</span><span class=p>);</span> <span class=c1>// 1</span>
<span class=nx>alert</span><span class=p>(</span><span class=nx>b</span><span class=p>);</span> <span class=c1>// undefined value</span>
</pre></div> </td></tr></table> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Abhay Garg </div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/application.c648116f.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>