<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Notebook collections"><link href=https://abhaydgarg.github.io/Notebook/index.html/data-structure-and-algorithms/backtracking/ rel=canonical><meta name=author content="Abhay Garg"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.2"><title>Backtracking - Notebook</title><link rel=stylesheet href=../../assets/stylesheets/application.30686662.css><link rel=stylesheet href=../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#2196f3><script src=../../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono&display=fallback"><style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#backtracking tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Notebook </span> <span class=md-header-nav__topic> Backtracking </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-nav__button md-logo"> <i class=md-icon></i> </a> Notebook </label> <div class=md-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../computer-science/ title=CS class=md-nav__link> CS </a> </li> <li class=md-nav__item> <a href=../../parser/ title=Parser class=md-nav__link> Parser </a> </li> <li class=md-nav__item> <a href=../ title="Data structure and algorithms" class=md-nav__link> Data structure and algorithms </a> </li> <li class=md-nav__item> <a href=../../oops/ title=OOPS class=md-nav__link> OOPS </a> </li> <li class=md-nav__item> <a href=../../design-patterns/ title="Design patterns" class=md-nav__link> Design patterns </a> </li> <li class=md-nav__item> <a href=../../regex/ title=Regex class=md-nav__link> Regex </a> </li> <li class=md-nav__item> <a href=../../git/ title=GIT class=md-nav__link> GIT </a> </li> <li class=md-nav__item> <a href=../../css/ title=CSS class=md-nav__link> CSS </a> </li> <li class=md-nav__item> <a href=../../mysql/ title=MySQL class=md-nav__link> MySQL </a> </li> <li class=md-nav__item> <a href=../../mongodb/ title=MongoDB class=md-nav__link> MongoDB </a> </li> <li class=md-nav__item> <a href=../../javascript/ title=Javascript class=md-nav__link> Javascript </a> </li> <li class=md-nav__item> <a href=../../nodejs/ title=Node.js class=md-nav__link> Node.js </a> </li> <li class=md-nav__item> <a href=../../expressjs/ title=Express.js class=md-nav__link> Express.js </a> </li> <li class=md-nav__item> <a href=../../react/ title=React class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../linters/ title=Linters class=md-nav__link> Linters </a> </li> <li class=md-nav__item> <a href=../../graphql/ title=GraphQL class=md-nav__link> GraphQL </a> </li> <li class=md-nav__item> <a href=../../redux-saga/ title="Redux saga" class=md-nav__link> Redux saga </a> </li> <li class=md-nav__item> <a href=../../rxjs/ title=RxJS class=md-nav__link> RxJS </a> </li> <li class=md-nav__item> <a href=../../typescript/ title=Typescript class=md-nav__link> Typescript </a> </li> <li class=md-nav__item> <a href=../../web-security/ title="Web security" class=md-nav__link> Web security </a> </li> <li class=md-nav__item> <a href=../../react-native/ title="React native" class=md-nav__link> React native </a> </li> <li class=md-nav__item> <a href=../../rust/ title=Rust class=md-nav__link> Rust </a> </li> <li class=md-nav__item> <a href=../../python/ title=Python class=md-nav__link> Python </a> </li> <li class=md-nav__item> <a href=../../php/ title=PHP class=md-nav__link> PHP </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#how-to-determine-if-a-problem-can-be-solved-using-backtracking class=md-nav__link> How to determine if a problem can be solved using backtracking? </a> </li> <li class=md-nav__item> <a href=#word-break-problem class=md-nav__link> Word break problem </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/abhaydgarg/Notebook/tree/master/src/data-structure-and-algorithms/backtracking.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=backtracking>Backtracking<a class=headerlink href=#backtracking title="Permanent link">&para;</a></h1> <p>Backtracking is an algorithmic-technique for solving problems recursively by trying to build a solution incrementally, one piece at a time, removing those solutions that fail to satisfy the constraints of the problem at any point of time.</p> <div class="admonition info"> <p class=admonition-title>Idea</p> <p>The idea is that we can build a solution step by step using recursion; if during the process we realise that is not going to be a valid solution, then we stop computing that solution and we return back to the step before (backtrack).</p> <p>Whenever the algorithm needs to decide between multiple alternatives to the next component of the solution, it recursively evaluates every alternative and then chooses the best one.</p> </div> <p>Imagine to have a maze and you want to find if it has an exit. A simple maze where we have labeled the junctions as 1, 2 and 3.</p> <p><img alt="A simple maze with only three junctions" src=../assets/1_vi2CWElf8--5EQUQfeUGpg.png></p> <p>If we want to check every possible path in the maze, we can have a look at the tree of paths, split for every junctions stop:</p> <p><img alt="All the possible paths of the maze" src=../assets/1_3jLYOFeSUR5_S1mPGvJbHg.png></p> <h2 id=how-to-determine-if-a-problem-can-be-solved-using-backtracking>How to determine if a problem can be solved using backtracking?<a class=headerlink href=#how-to-determine-if-a-problem-can-be-solved-using-backtracking title="Permanent link">&para;</a></h2> <p>Generally, every problem which has clear and well-defined <strong>constraints</strong> on any objective solution, that incrementally builds candidate to the solution and abandons a candidate (“backtracks”) as soon as it determines that the candidate cannot possibly be completed to a valid solution, can be solved by Backtracking. However, most of the problems can be solved using other known algorithms like Dynamic Programming or Greedy Algorithms in logarithmic, linear, linear-logarithmic time complexity and therefore, outshine the backtracking algorithm in every respect (since backtracking algorithms are generally exponential in both time and space). However, a few problems still remain, that only have backtracking algorithms to solve them until now.</p> <h2 id=word-break-problem>Word break problem<a class=headerlink href=#word-break-problem title="Permanent link">&para;</a></h2> <p>Given a string without space and a dictionary of words, find out if string can be segmented into a space-separated sequence of dictionary words.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>Dictionary</span><span class=err>:</span><span class=w></span>
<span class=err>{</span><span class=ss>&quot;mobile&quot;</span><span class=p>,</span><span class=w> </span><span class=ss>&quot;samsung&quot;</span><span class=p>,</span><span class=w> </span><span class=ss>&quot;sam&quot;</span><span class=p>,</span><span class=w> </span><span class=ss>&quot;sung&quot;</span><span class=p>,</span><span class=w> </span><span class=ss>&quot;man&quot;</span><span class=p>,</span><span class=w> </span><span class=ss>&quot;mango&quot;</span><span class=p>,</span><span class=w></span>
<span class=ss>&quot;icecream&quot;</span><span class=p>,</span><span class=w> </span><span class=ss>&quot;and&quot;</span><span class=p>,</span><span class=w> </span><span class=ss>&quot;go&quot;</span><span class=p>,</span><span class=w> </span><span class=ss>&quot;i&quot;</span><span class=p>,</span><span class=w> </span><span class=ss>&quot;like&quot;</span><span class=p>,</span><span class=ss>&quot;ice&quot;</span><span class=p>,</span><span class=w> </span><span class=ss>&quot;cream&quot;</span><span class=err>}</span><span class=w></span>

<span class=k>Input</span><span class=err>:</span><span class=w> </span><span class=ss>&quot;ilikesamsung&quot;</span><span class=w></span>
<span class=k>Output</span><span class=err>:</span><span class=w> </span><span class=n>Yes</span><span class=w></span>

<span class=k>Input</span><span class=err>:</span><span class=w> </span><span class=ss>&quot;iiiiiiii&quot;</span><span class=w></span>
<span class=k>Output</span><span class=err>:</span><span class=w> </span><span class=n>Yes</span><span class=w></span>

<span class=k>Input</span><span class=err>:</span><span class=w> </span><span class=ss>&quot;samsungandmangok&quot;</span><span class=w></span>
<span class=k>Output</span><span class=err>:</span><span class=w> </span><span class=k>No</span><span class=w></span>
</pre></div> </td></tr></table> <div class="admonition info"> <p class=admonition-title>idea</p> <p><strong>Constraint:</strong> All separated words must be in dictionary. If the string is separated into three words then all those three words must be in dictionary. Although if we have 2 words in the dictionary and one word is not in dictionary then we say string cannot be segmented.</p> <p>The idea is, we start with the first letter which become prefix. Then check if the prefix is present in dictionary. If not, then we append next letter to the previous prefix and then check again its presence. If we found the prefix in dictionary then it means we found word which can be separated with space. Then we take a left over letters (suffix) and find out if it can be segmented too. This is going to be our subproblem. If leftover letters cannot be segmented then we <strong>backtrack</strong> to the prefix that we found before the recurring call to suffix. When failed, we actually <strong>discard</strong> the prefix as a result because with this prefix, the suffix that we get, cannot be segmented. So we need to form another prefix by appending letter one by one to the discarded prefix and check in dictionary again. If we have tried all prefixes and none of them resulted in a solution, we return false. But if any prefix result in solution then we do not check for other prefixes because we do not want all possible ways in which the string can be segmented. Once found a solution we stop.</p> <p><strong>Note:</strong> We recur call only when prefix is found in the dictionary. Otherwise we keep building prefix and look for the prefix in the dictionary.</p> <p><strong>Base case:</strong> When suffix is empty string because we reach at the last letter of the string while forming prefix and suffix cannot be formed.</p> </div> <div class="admonition question"> <p class=admonition-title>How come is this a bactracking problem?</p> <p>Because if we cannot segment the suffix then we go back to the prefix and discard it. Then form another prefix and check if the new suffix can be segmented.</p> </div> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>var</span> <span class=nx>dict</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>([</span>
  <span class=p>[</span><span class=s1>&#39;mobile&#39;</span><span class=p>,</span> <span class=s1>&#39;mobile&#39;</span><span class=p>],</span>
  <span class=p>[</span><span class=s1>&#39;samsung&#39;</span><span class=p>,</span> <span class=s1>&#39;samsung&#39;</span><span class=p>],</span>
  <span class=p>[</span><span class=s1>&#39;sam&#39;</span><span class=p>,</span> <span class=s1>&#39;sam&#39;</span><span class=p>],</span>
  <span class=p>[</span><span class=s1>&#39;sung&#39;</span><span class=p>,</span> <span class=s1>&#39;sung&#39;</span><span class=p>],</span>
  <span class=p>[</span><span class=s1>&#39;man&#39;</span><span class=p>,</span> <span class=s1>&#39;man&#39;</span><span class=p>],</span>
  <span class=p>[</span><span class=s1>&#39;mango&#39;</span><span class=p>,</span> <span class=s1>&#39;mango&#39;</span><span class=p>],</span>
  <span class=p>[</span><span class=s1>&#39;icecream&#39;</span><span class=p>,</span> <span class=s1>&#39;icecream&#39;</span><span class=p>],</span>
  <span class=p>[</span><span class=s1>&#39;and&#39;</span><span class=p>,</span> <span class=s1>&#39;and&#39;</span><span class=p>],</span>
  <span class=p>[</span><span class=s1>&#39;go&#39;</span><span class=p>,</span> <span class=s1>&#39;go&#39;</span><span class=p>],</span>
  <span class=p>[</span><span class=s1>&#39;i&#39;</span><span class=p>,</span> <span class=s1>&#39;i&#39;</span><span class=p>],</span>
  <span class=p>[</span><span class=s1>&#39;like&#39;</span><span class=p>,</span> <span class=s1>&#39;like&#39;</span><span class=p>],</span>
  <span class=p>[</span><span class=s1>&#39;ice&#39;</span><span class=p>,</span> <span class=s1>&#39;ice&#39;</span><span class=p>],</span>
  <span class=p>[</span><span class=s1>&#39;cream&#39;</span><span class=p>,</span> <span class=s1>&#39;cream&#39;</span><span class=p>]</span>
<span class=p>]);</span>

<span class=kd>function</span> <span class=nx>wb</span><span class=p>(</span><span class=nx>word</span><span class=p>)</span> <span class=p>{</span>

  <span class=kd>var</span> <span class=nx>size</span> <span class=o>=</span> <span class=nx>word</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>

  <span class=c1>// Base case</span>
  <span class=k>if</span> <span class=p>(</span><span class=nx>size</span> <span class=o>===</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=kc>true</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=k>for</span><span class=p>(</span><span class=kd>var</span> <span class=nx>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span> <span class=nx>i</span><span class=o>&lt;=</span><span class=nx>size</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
    <span class=kd>var</span> <span class=nx>prefix</span> <span class=o>=</span> <span class=nx>word</span><span class=p>.</span><span class=nx>substr</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nx>i</span><span class=p>);</span>
    <span class=k>if</span><span class=p>(</span><span class=nx>dict</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>prefix</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=nx>wb</span><span class=p>(</span><span class=nx>word</span><span class=p>.</span><span class=nx>substr</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>size</span><span class=o>-</span><span class=nx>i</span><span class=p>)))</span> <span class=p>{</span>
      <span class=k>return</span> <span class=kc>true</span><span class=p>;</span>
    <span class=p>}</span>
  <span class=p>}</span>
  <span class=k>return</span> <span class=kc>false</span><span class=p>;</span>
<span class=p>}</span>

<span class=nx>wb</span><span class=p>(</span><span class=s1>&#39;ilikesamsung&#39;</span><span class=p>);</span> <span class=c1>// true</span>
<span class=nx>wb</span><span class=p>(</span><span class=s1>&#39;iiiiiiii&#39;</span><span class=p>);</span> <span class=c1>// true</span>
<span class=nx>wb</span><span class=p>(</span><span class=s1>&#39;ilikelikeimangoiii&#39;</span><span class=p>);</span> <span class=c1>// true</span>
<span class=nx>wb</span><span class=p>(</span><span class=s1>&#39;samsungandmango&#39;</span><span class=p>);</span> <span class=c1>// true</span>
<span class=nx>wb</span><span class=p>(</span><span class=s1>&#39;samsungandmangok&#39;</span><span class=p>);</span> <span class=c1>// false</span>
</pre></div> </td></tr></table> <p><img alt="Word break tree" src=../assets/word-break-tree.png></p> <p>Leaf nodes, 6, 7, 11, 12, 16, 17 all have a <code>k</code> as input string and since <code>k</code> does not exist in dictionary, it (recursion function) returns false. Then the program backtrack and try to form another prefix. For example, leaf node 6. We have prefix <code>go</code>. <code>k</code> returns false so it backtrack and form another prefix <code>gok</code>, which again does not exist in dictionary. So it also returns false. Now control goes back to node 5. <code>man</code> as prefix failed to meet constraint because if we take <code>man</code> as a prefix then suffix <code>gok</code> cannot be segmented. So we need to try another prefix. So through backtracking we form another prefix <code>mango</code> and suffix <code>k</code>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The tree has overlapping nodes (subproblems). Through memoization we can avoid recomputing.</p> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Abhay Garg </div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/application.c648116f.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>