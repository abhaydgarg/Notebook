<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Notebook collections"><link href=https://abhaydgarg.github.io/Notebook/index.html/rxjs/subject/ rel=canonical><meta name=author content="Abhay Garg"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.2"><title>Subject - Notebook</title><link rel=stylesheet href=../../assets/stylesheets/application.30686662.css><link rel=stylesheet href=../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#2196f3><script src=../../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono&display=fallback"><style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#subject tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Notebook </span> <span class=md-header-nav__topic> Subject </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-nav__button md-logo"> <i class=md-icon></i> </a> Notebook </label> <div class=md-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../computer-science/ title=CS class=md-nav__link> CS </a> </li> <li class=md-nav__item> <a href=../../parser/ title=Parser class=md-nav__link> Parser </a> </li> <li class=md-nav__item> <a href=../../data-structure-and-algorithms/ title="Data Structure and Algorithms" class=md-nav__link> Data Structure and Algorithms </a> </li> <li class=md-nav__item> <a href=../../oops/ title=OOPS class=md-nav__link> OOPS </a> </li> <li class=md-nav__item> <a href=../../design-patterns/ title="Design Patterns" class=md-nav__link> Design Patterns </a> </li> <li class=md-nav__item> <a href=../../regex/ title=Regex class=md-nav__link> Regex </a> </li> <li class=md-nav__item> <a href=../../git/ title=GIT class=md-nav__link> GIT </a> </li> <li class=md-nav__item> <a href=../../css/ title=CSS class=md-nav__link> CSS </a> </li> <li class=md-nav__item> <a href=../../rest-api/ title="REST API" class=md-nav__link> REST API </a> </li> <li class=md-nav__item> <a href=../../eslint/ title=ESLint class=md-nav__link> ESLint </a> </li> <li class=md-nav__item> <a href=../../javascript/ title=Javascript class=md-nav__link> Javascript </a> </li> <li class=md-nav__item> <a href=../../nodejs/ title=Node.js class=md-nav__link> Node.js </a> </li> <li class=md-nav__item> <a href=../../react/ title=React class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../react-native/ title="React Native" class=md-nav__link> React Native </a> </li> <li class=md-nav__item> <a href=../../redux-saga/ title="Redux Saga" class=md-nav__link> Redux Saga </a> </li> <li class=md-nav__item> <a href=../ title=RxJS class=md-nav__link> RxJS </a> </li> <li class=md-nav__item> <a href=../../mysql/ title=MySQL class=md-nav__link> MySQL </a> </li> <li class=md-nav__item> <a href=../../mongodb/ title=MongoDB class=md-nav__link> MongoDB </a> </li> <li class=md-nav__item> <a href=../../web-security/ title="Web Security" class=md-nav__link> Web Security </a> </li> <li class=md-nav__item> <a href=../../rust/ title=Rust class=md-nav__link> Rust </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#behaviorsubject class=md-nav__link> BehaviorSubject </a> </li> <li class=md-nav__item> <a href=#replaysubject class=md-nav__link> ReplaySubject </a> </li> <li class=md-nav__item> <a href=#asyncsubject class=md-nav__link> AsyncSubject </a> </li> <li class=md-nav__item> <a href=#how-subject-works class=md-nav__link> How subject works </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#subject-as-observable class=md-nav__link> Subject as Observable </a> </li> <li class=md-nav__item> <a href=#subject-as-observer class=md-nav__link> Subject as Observer </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/abhaydgarg/Notebook/tree/master/src/rxjs/subject.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=subject>Subject<a class=headerlink href=#subject title="Permanent link">&para;</a></h1> <p>An RxJS Subject is a special type of Observable that allows values to be multicasted to many Observers. While plain Observables are unicast (each subscribed Observer owns an independent execution of the Observable), Subjects are multicast.</p> <p><em><strong>Every Subject is an Observable.</strong></em> Given a Subject, you can <code>subscribe</code> to it, providing an Observer, which will start receiving values normally. From the perspective of the Observer, it cannot tell whether the Observable execution is coming from a plain unicast Observable or a Subject.</p> <p>Internally to the Subject, <code>subscribe</code> does not invoke a new execution that delivers values. It simply registers the given Observer in a list of Observers, similarly to how <code>addListener</code> usually works in other libraries and languages.</p> <p><em><strong>Every Subject is an Observer.</strong></em> It is an object with the methods next(v), error(e), and complete(). To feed a new value to the Subject, just call next(theValue), and it will be multicasted to the Observers registered to listen to the Subject.</p> <p>In the example below, we have two Observers attached to a Subject, and we feed some values to the Subject:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// Subject as Observable</span>
<span class=kd>var</span> <span class=nx>subject</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rx</span><span class=p>.</span><span class=nx>Subject</span><span class=p>();</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerA: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerB: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>

<span class=cm>/*</span>
<span class=cm>observerA: 1</span>
<span class=cm>observerB: 1</span>
<span class=cm>observerA: 2</span>
<span class=cm>observerB: 2</span>
<span class=cm>*/</span>
</pre></div> </td></tr></table> <p>Since a Subject is an Observer also, this also means you may provide a Subject as the argument to the <code>observable.subscribe()</code> of any Observable, like the example below shows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// Subject as Observer</span>
<span class=kd>var</span> <span class=nx>subject</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rx</span><span class=p>.</span><span class=nx>Subject</span><span class=p>();</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerA: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerB: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>

<span class=kd>var</span> <span class=nx>observable</span> <span class=o>=</span> <span class=nx>Rx</span><span class=p>.</span><span class=nx>Observable</span><span class=p>.</span><span class=nx>from</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]);</span>

<span class=nx>observable</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=nx>subject</span><span class=p>);</span> <span class=c1>// You can subscribe providing a Subject</span>

<span class=cm>/*</span>
<span class=cm>observerA: 1</span>
<span class=cm>observerB: 1</span>
<span class=cm>observerA: 2</span>
<span class=cm>observerB: 2</span>
<span class=cm>observerA: 3</span>
<span class=cm>observerB: 3</span>
<span class=cm>*/</span>
</pre></div> </td></tr></table> <blockquote> <p>With the two examples above, we essentially just converted a unicast Observable execution to multicast, through the Subject. This demonstrates how Subjects are the only way of making any Observable execution be shared to multiple Observers.</p> </blockquote> <h2 id=behaviorsubject>BehaviorSubject<a class=headerlink href=#behaviorsubject title="Permanent link">&para;</a></h2> <p>One of the variants of Subjects is the <code>BehaviorSubject</code>, which has a notion of <strong>"the current value"</strong>. It stores the latest value emitted to its consumers, and whenever a new Observer subscribes, it will immediately receive the "current value" from the <code>BehaviorSubject</code>.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>var</span> <span class=nx>subject</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rx</span><span class=p>.</span><span class=nx>BehaviorSubject</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span> <span class=c1>// 0 is the initial value</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerA: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerB: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span>

<span class=cm>/*</span>
<span class=cm>observerA: 0</span>
<span class=cm>observerA: 1</span>
<span class=cm>observerA: 2</span>
<span class=cm>observerB: 2</span>
<span class=cm>observerA: 3</span>
<span class=cm>observerB: 3</span>
<span class=cm>*/</span>
</pre></div> </td></tr></table> <h2 id=replaysubject>ReplaySubject<a class=headerlink href=#replaysubject title="Permanent link">&para;</a></h2> <p>A ReplaySubject is similar to a BehaviorSubject in that it can send old values to new subscribers, but it can also record a part of the Observable execution. A ReplaySubject records multiple values from the Observable execution and replays them to new subscribers.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// When creating a ReplaySubject, you can specify how many values to replay</span>
<span class=kd>var</span> <span class=nx>subject</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rx</span><span class=p>.</span><span class=nx>ReplaySubject</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span> <span class=c1>// buffer 3 values for new subscribers</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerA: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>4</span><span class=p>);</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerB: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>

<span class=cm>/*</span>
<span class=cm>observerA: 1</span>
<span class=cm>observerA: 2</span>
<span class=cm>observerA: 3</span>
<span class=cm>observerA: 4</span>
<span class=cm>observerB: 2</span>
<span class=cm>observerB: 3</span>
<span class=cm>observerB: 4</span>
<span class=cm>observerA: 5</span>
<span class=cm>observerB: 5</span>
<span class=cm>*/</span>
</pre></div> </td></tr></table> <h2 id=asyncsubject>AsyncSubject<a class=headerlink href=#asyncsubject title="Permanent link">&para;</a></h2> <p>The AsyncSubject is a variant where only the last value of the Observable execution is sent to its observers, and only when the execution completes.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>var</span> <span class=nx>subject</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rx</span><span class=p>.</span><span class=nx>AsyncSubject</span><span class=p>();</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerA: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>4</span><span class=p>);</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerB: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>

<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>complete</span><span class=p>();</span>

<span class=cm>/*</span>
<span class=cm>observerA: 5</span>
<span class=cm>observerB: 5</span>
<span class=cm>*/</span>

<span class=c1>// The AsyncSubject is similar to the last() operator, in that it waits</span>
<span class=c1>// for the complete notification in order to deliver a single value.</span>
</pre></div> </td></tr></table> <h2 id=how-subject-works>How subject works<a class=headerlink href=#how-subject-works title="Permanent link">&para;</a></h2> <blockquote> <p>Subject is both Observable and Observer.</p> </blockquote> <h3 id=subject-as-observable>Subject as Observable<a class=headerlink href=#subject-as-observable title="Permanent link">&para;</a></h3> <p>You can just use <code>Observable.create()</code> or Observable creator operator like <code>of</code>, <code>from</code>, <code>fromPromise</code> etc to create Observable. The only difference between core Observable and Subject as Observable is that core Observable provide independent copy to each Observers whereas Observers listening to Subject get shared copy.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// create Observable from Subject</span>
<span class=kd>var</span> <span class=nx>subject</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Subject</span><span class=p>();</span>

<span class=c1>// Subscribe to Observable as we do in Observable</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerA: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerB: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>

<span class=c1>// Pass value to Observer as we do in</span>
<span class=sb>`Observable.create(function subscribe(observer) { observer.next(1); });`</span>
<span class=c1>// You can also make use of subject.error() and subject.complete()</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>

<span class=c1>// the value 1 will be passed to two Observers subscribed above to Subject as Observable</span>

<span class=cm>/*</span>
<span class=cm>observerA: 1</span>
<span class=cm>observerB: 1</span>
<span class=cm>*/</span>
</pre></div> </td></tr></table> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>//# Core Observable - Independent copy</span>

<span class=cm>/*</span>
<span class=cm> Even though `observerB` subscribe to Observable after 3 seconds it</span>
<span class=cm> still get the independent copy of `function subscribe(observer) {}` that means for each Observers `function subscribe(observer) {}` executes from start or fresh.</span>
<span class=cm>*/</span>
<span class=kd>var</span> <span class=nx>observable</span> <span class=o>=</span> <span class=nx>Observable</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=kd>function</span> <span class=nx>subscribe</span><span class=p>(</span><span class=nx>observer</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>observer</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
  <span class=nx>observer</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
<span class=p>});</span>

<span class=c1>// subscribe immediately</span>
<span class=nx>observable</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerA: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>
<span class=c1>// subscribe after 3 seconds</span>
<span class=nx>setTimeout</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
  <span class=nx>observable</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
    <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerB: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
  <span class=p>});</span>
<span class=p>},</span> <span class=mi>3000</span><span class=p>);</span>

<span class=cm>/*</span>
<span class=cm>observerA: 1</span>
<span class=cm>observerA: 2</span>
<span class=cm>observerB: 1</span>
<span class=cm>observerB: 2</span>
<span class=cm>*/</span>

<span class=c1>//# Subject - Shared copy</span>

<span class=cm>/*</span>
<span class=cm> `observerB` subscribe to Subject Observable after 3 seconds it</span>
<span class=cm> never gets the value 1.</span>
<span class=cm>*/</span>

<span class=c1>// create Observable</span>
<span class=kd>var</span> <span class=nx>subject</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Subject</span><span class=p>();</span>

<span class=c1>// subscribe immediately</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerA: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>
<span class=c1>// subscribe after 3 seconds</span>
<span class=nx>setTimeout</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
  <span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
    <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerB: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
  <span class=p>});</span>
<span class=p>},</span> <span class=mi>3000</span><span class=p>);</span>

<span class=c1>// pass value to observers immediately</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>

<span class=c1>// pass value to observers after 4 seconds</span>
<span class=nx>setTimeout</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
 <span class=nx>subject</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
<span class=p>},</span> <span class=mi>4000</span><span class=p>);</span>

<span class=cm>/*</span>
<span class=cm>observerA: 1</span>
<span class=cm>observerA: 2</span>
<span class=cm>observerB: 2</span>
<span class=cm>*/</span>
</pre></div> </td></tr></table> <h3 id=subject-as-observer>Subject as Observer<a class=headerlink href=#subject-as-observer title="Permanent link">&para;</a></h3> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>// create core Observable `observable`</span>
<span class=kd>var</span> <span class=nx>observable</span> <span class=o>=</span> <span class=nx>Observable</span><span class=p>.</span><span class=nx>from</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]);</span>

<span class=c1>// create subject `subject`</span>
<span class=kd>var</span> <span class=nx>subject</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Subject</span><span class=p>();</span>

<span class=cm>/*</span>
<span class=cm> Subject is Observable too, so subscribing to Subject creates internal</span>
<span class=cm> list of Observers maintain by Subject internally that only listen to</span>
<span class=cm> Subject Observable called `subject`.</span>
<span class=cm> */</span>
<span class=c1>// Subscribe to `subject` and create internal list of Observers</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerA: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>
<span class=nx>subject</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span>
  <span class=nx>next</span><span class=o>:</span> <span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;observerB: &#39;</span> <span class=o>+</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>});</span>

<span class=c1>// `subject` is Observer too, so we can pass it to subscribe function of core Observable called `observable`</span>
<span class=nx>observable</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=nx>subject</span><span class=p>);</span>

<span class=cm>/*</span>
<span class=cm>observerA: 1</span>
<span class=cm>observerB: 1</span>
<span class=cm>observerA: 2</span>
<span class=cm>observerB: 2</span>
<span class=cm>observerA: 3</span>
<span class=cm>observerB: 3</span>
<span class=cm>*/</span>
</pre></div> </td></tr></table> <p>Now what happened when <code>subject</code> is passed to <code>observable</code> as observer.</p> <ul> <li><code>observable</code> pass/send value <code>1</code> to its observer called <code>subject</code>.</li> <li><code>subject</code> receives a value <code>1</code> which also a Observable and two internal observes are attach to it.</li> <li><code>subject</code> pass/send value <code>1</code> to its internal observers.</li> </ul> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Abhay Garg </div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/application.c648116f.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>