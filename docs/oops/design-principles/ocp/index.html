<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Notebook collections"><link href=https://abhaydgarg.github.io/Notebook/index.html/oops/design-principles/ocp/ rel=canonical><meta name=author content="Abhay Garg"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.2"><title>Opened Closed Principle - Notebook</title><link rel=stylesheet href=../../../assets/stylesheets/application.30686662.css><link rel=stylesheet href=../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#2196f3><script src=../../../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono&display=fallback"><style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#opened-closed-principle tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Notebook </span> <span class=md-header-nav__topic> Opened Closed Principle </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-nav__button md-logo"> <i class=md-icon></i> </a> Notebook </label> <div class=md-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../computer-science/ title=CS class=md-nav__link> CS </a> </li> <li class=md-nav__item> <a href=../../../parser/ title=Parser class=md-nav__link> Parser </a> </li> <li class=md-nav__item> <a href=../../../data-structure-and-algorithms/ title="Data Structure and Algorithms" class=md-nav__link> Data Structure and Algorithms </a> </li> <li class=md-nav__item> <a href=../../ title=OOPS class=md-nav__link> OOPS </a> </li> <li class=md-nav__item> <a href=../../../design-patterns/ title="Design Patterns" class=md-nav__link> Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../regex/ title=Regex class=md-nav__link> Regex </a> </li> <li class=md-nav__item> <a href=../../../git/ title=GIT class=md-nav__link> GIT </a> </li> <li class=md-nav__item> <a href=../../../css/ title=CSS class=md-nav__link> CSS </a> </li> <li class=md-nav__item> <a href=../../../rest-api/ title="REST API" class=md-nav__link> REST API </a> </li> <li class=md-nav__item> <a href=../../../eslint/ title=ESLint class=md-nav__link> ESLint </a> </li> <li class=md-nav__item> <a href=../../../javascript/ title=Javascript class=md-nav__link> Javascript </a> </li> <li class=md-nav__item> <a href=../../../nodejs/ title=Node.js class=md-nav__link> Node.js </a> </li> <li class=md-nav__item> <a href=../../../react/ title=React class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../../react-native/ title="React Native" class=md-nav__link> React Native </a> </li> <li class=md-nav__item> <a href=../../../redux-saga/ title="Redux Saga" class=md-nav__link> Redux Saga </a> </li> <li class=md-nav__item> <a href=../../../rxjs/ title=RxJS class=md-nav__link> RxJS </a> </li> <li class=md-nav__item> <a href=../../../mysql/ title=MySQL class=md-nav__link> MySQL </a> </li> <li class=md-nav__item> <a href=../../../mongodb/ title=MongoDB class=md-nav__link> MongoDB </a> </li> <li class=md-nav__item> <a href=../../../firebase/ title=Firebase class=md-nav__link> Firebase </a> </li> <li class=md-nav__item> <a href=../../../web-security/ title="Web Security" class=md-nav__link> Web Security </a> </li> <li class=md-nav__item> <a href=../../../rust/ title=Rust class=md-nav__link> Rust </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#why-use-ocp class=md-nav__link> Why use OCP? </a> </li> <li class=md-nav__item> <a href=#how-to-achieve-ocp class=md-nav__link> How to achieve OCP? </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#you-can-overcome-the-said-problems-by-following-ocp class=md-nav__link> You can overcome the said problems by following OCP </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/abhaydgarg/Notebook/tree/master/src/oops/design-principles/ocp.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=opened-closed-principle>Opened Closed Principle<a class=headerlink href=#opened-closed-principle title="Permanent link">&para;</a></h1> <p>Software entities like classes, modules and functions should be open for extension but closed for modifications.</p> <p>The Open Close Principle states that the design and writing of the code should be done in a way that new functionality should be added with minimum changes in the existing code. The design should be done in a way to allow the adding of new functionality as new classes, keeping as much as possible existing code unchanged.</p> <p>This principle is for building software libraries where other programmers can extend library without changing the core or already written classes.</p> <h2 id=why-use-ocp>Why use OCP?<a class=headerlink href=#why-use-ocp title="Permanent link">&para;</a></h2> <p>A clever application design and the code writing part should take care of the frequent changes that are done during the development and the maintaining phase of an application. Usually, many changes are involved when a new functionality is added to an application. Those changes in the existing code should be minimized, since it's assumed that the existing code is already unit tested and changes in already written code might affect the existing functionality in an unwanted manner.</p> <h2 id=how-to-achieve-ocp>How to achieve OCP?<a class=headerlink href=#how-to-achieve-ocp title="Permanent link">&para;</a></h2> <ol> <li>Allow the classes to depend on the abstractions, there by new features can be added by creating new extension or concrete class out of the abstraction.</li> <li>Conform to rule of good abstraction that states non changeable contract. Plan abstraction or contract carefully so it must be fixed and unchangeable in future. Because if contract or abstraction is changed then we have to change the implementation in already existed concrete classes which uses the abstraction, which clearly violates the OCP principle.</li> <li>Involves = two elements, one is single abstract class or multiple interfaces and second is one or more concrete classes that implement the contract.</li> </ol> <p>Let us go through the below example to understand the principle and the underlying benefits: Suppose for a certain requirement you would need to write a class for calculating the fare that a person is charged with. So, you write the following two classes.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Bus</span> <span class=o>{</span>

    <span class=kd>public</span> <span class=kt>double</span> <span class=n>CostPerMile</span><span class=o>;</span>
    <span class=kd>public</span> <span class=kt>double</span> <span class=n>MilesTravelled</span><span class=o>;</span>
    <span class=kd>public</span> <span class=kt>int</span> <span class=n>NoOfSeatsBooked</span><span class=o>;</span>
<span class=o>}</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>FareCalculator</span> <span class=o>{</span>

    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>Fare</span><span class=o>(</span><span class=n>Bus</span> <span class=n>bus</span><span class=o>)</span> <span class=o>{</span>

        <span class=kt>double</span> <span class=n>fare</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
        <span class=n>fare</span> <span class=o>=</span> <span class=n>bus</span><span class=o>.</span><span class=na>CostPerMile</span> <span class=o>*</span> <span class=n>bus</span><span class=o>.</span><span class=na>MilesTravelled</span> <span class=o>*</span> <span class=n>bus</span><span class=o>.</span><span class=na>NoOfSeatsBooked</span><span class=o>;</span>
        <span class=k>return</span> <span class=n>fare</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></div> </td></tr></table> <p>Everything is fine in the above code. FareCalculator class would return the computed fare for Bus properly.</p> <p>But the above design is a clear violation of OCP: Let's say, the new requirement says that the FareCalculator class should include fare calculation for a new vehicle – Truck also. And, you know that the calculation would differ in both the cases. In case of Bus, the calculation depends on the number of seats booked and in case of Truck, it depends on the Weight of Goods that truck would be carrying.</p> <p>So, you would modify FareCalculator class as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>public</span> <span class=kd>class</span> <span class=nc>FareCalculator</span> <span class=o>{</span>

    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>BusFare</span><span class=o>(</span><span class=n>Bus</span> <span class=n>bus</span><span class=o>)</span> <span class=o>{</span>

        <span class=kt>double</span> <span class=n>fare</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
        <span class=n>fare</span> <span class=o>=</span> <span class=n>bus</span><span class=o>.</span><span class=na>CostPerMile</span> <span class=o>*</span> <span class=n>bus</span><span class=o>.</span><span class=na>MilesTravelled</span> <span class=o>*</span> <span class=n>bus</span><span class=o>.</span><span class=na>NoOfSeatsBooked</span><span class=o>;</span>
        <span class=k>return</span> <span class=n>fare</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>TruckFare</span><span class=o>(</span><span class=n>Truck</span> <span class=n>truck</span><span class=o>)</span> <span class=o>{</span>

        <span class=kt>double</span> <span class=n>fare</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
        <span class=n>fare</span> <span class=o>=</span> <span class=n>truck</span><span class=o>.</span><span class=na>CostPerMile</span> <span class=o>*</span> <span class=n>truck</span><span class=o>.</span><span class=na>MilesTravelled</span> <span class=o>*</span> <span class=n>truck</span><span class=o>.</span><span class=na>GoodsWeight</span><span class=o>;</span>
        <span class=k>return</span> <span class=n>fare</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Bus</span> <span class=o>{</span>

    <span class=kd>public</span> <span class=kt>double</span> <span class=n>CostPerMile</span><span class=o>;</span>
    <span class=kd>public</span> <span class=kt>double</span> <span class=n>MilesTravelled</span><span class=o>;</span>
    <span class=kd>public</span> <span class=kt>int</span> <span class=n>NoOfSeatsBooked</span><span class=o>;</span>
<span class=o>}</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Truck</span> <span class=o>{</span>

    <span class=kd>public</span> <span class=kt>double</span> <span class=n>CostPerMile</span><span class=o>;</span>
    <span class=kd>public</span> <span class=kt>double</span> <span class=n>MilesTravelled</span><span class=o>;</span>
    <span class=kd>public</span> <span class=kt>int</span> <span class=n>GoodsWeight</span><span class=o>;</span>
<span class=o>}</span>
</pre></div> </td></tr></table> <p>Definitely your Code would work fine and delivers the results accurately.</p> <p>But, there are numerous design problems with the above modification:</p> <p>If the requirement is to compute fare for one more vehicle say- Car etc, you would be making a change in the existing FareCalculator class to implement the new requirement. So, every time you need to make sure that the new function added in the class has not broken any older functinality present already in the class.</p> <p>So, in the above design, its very clear that the class is not really closed for modifcation and also not open for extension. In the real world, the class may not be having just a few lines of code and in actual would be having hundreds or thousands lines of code. So, anything that you are modifying in an existing class in order to implement a new functionality lead to enormous development and testing efforts. For every new functionality to be added, you need to make sure that nothing has been broken with respect to the functinality already present in the class.</p> <h3 id=you-can-overcome-the-said-problems-by-following-ocp>You can overcome the said problems by following OCP<a class=headerlink href=#you-can-overcome-the-said-problems-by-following-ocp title="Permanent link">&para;</a></h3> <p>You create a Abstract class Vehicle as follows</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Vehicle</span> <span class=o>{</span>
  <span class=kd>public</span> <span class=kt>double</span> <span class=nf>Fare</span><span class=o>();</span>
<span class=o>}</span>
</pre></div> </td></tr></table> <p>And, then write Bus and Truck class extending the Vehicle class and implementing the Fare function as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Bus</span> <span class=kd>extends</span> <span class=n>Vehicle</span> <span class=o>{</span>

    <span class=kd>public</span> <span class=kt>double</span> <span class=n>CostPerMile</span><span class=o>;</span>
    <span class=kd>public</span> <span class=kt>double</span> <span class=n>MilesTravelled</span><span class=o>;</span>
    <span class=kd>public</span> <span class=kt>int</span> <span class=n>NoOfSeatsBooked</span><span class=o>;</span>

    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>Fare</span><span class=o>()</span> <span class=o>{</span>

        <span class=k>return</span> <span class=n>CostPerMile</span> <span class=o>*</span> <span class=n>MilesTravelled</span> <span class=o>*</span> <span class=n>NoOfSeatsBooked</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Truck</span> <span class=kd>extends</span> <span class=n>Vehicle</span> <span class=o>{</span>

    <span class=kd>public</span> <span class=kt>double</span> <span class=n>CostPerMile</span><span class=o>;</span>
    <span class=kd>public</span> <span class=kt>double</span> <span class=n>MilesTravelled</span><span class=o>;</span>
    <span class=kd>public</span> <span class=kt>int</span> <span class=n>GoodsWeight</span><span class=o>;</span>

    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>Fare</span><span class=o>()</span> <span class=o>{</span>

        <span class=k>return</span> <span class=n>CostPerMile</span> <span class=o>*</span> <span class=n>MilesTravelled</span> <span class=o>*</span> <span class=n>GoodsWeight</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></div> </td></tr></table> <p>Finally, you write FareCalculator as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kd>public</span> <span class=kd>class</span> <span class=nc>FareCalculator</span> <span class=o>{</span>

    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>Fare</span><span class=o>(</span><span class=n>Vehicle</span> <span class=n>vehicle</span><span class=o>)</span> <span class=o>{</span>

        <span class=kt>double</span> <span class=n>fare</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
        <span class=n>fare</span> <span class=o>=</span> <span class=n>vehicle</span><span class=o>.</span><span class=na>Fare</span><span class=o>();</span>
        <span class=k>return</span> <span class=n>fare</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></div> </td></tr></table> <p>In the above design, the FareCalculator and all other classes are absolutely closed for modifications. With the usage of Abstract class Vehicle, now, even if the requirement is to compute fare for a new vehicle, you can easily do it by writing a new class and extending the Vehicle class in it. By doing so, you would not really need to make modifications in any of the existing classes and you will always extend the existing classes to implement any new functionality.</p> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Abhay Garg </div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/application.c648116f.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>