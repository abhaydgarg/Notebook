<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Notebook collections"><link href=https://abhaydgarg.github.io/Notebook/index.html/react/proptypes/ rel=canonical><meta name=author content="Abhay Garg"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.2"><title>PropTypes - Notebook</title><link rel=stylesheet href=../../assets/stylesheets/application.30686662.css><link rel=stylesheet href=../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#2196f3><script src=../../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono&display=fallback"><style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#proptypes tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Notebook </span> <span class=md-header-nav__topic> PropTypes </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://abhaydgarg.github.io/Notebook/index.html title=Notebook class="md-nav__button md-logo"> <i class=md-icon></i> </a> Notebook </label> <div class=md-nav__source> <a href=https://github.com/abhaydgarg/Notebook/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../computer-science/ title=CS class=md-nav__link> CS </a> </li> <li class=md-nav__item> <a href=../../parser/ title=Parser class=md-nav__link> Parser </a> </li> <li class=md-nav__item> <a href=../../data-structure-and-algorithms/ title="Data Structure and Algorithms" class=md-nav__link> Data Structure and Algorithms </a> </li> <li class=md-nav__item> <a href=../../oops/ title=OOPS class=md-nav__link> OOPS </a> </li> <li class=md-nav__item> <a href=../../design-patterns/ title="Design Patterns" class=md-nav__link> Design Patterns </a> </li> <li class=md-nav__item> <a href=../../regex/ title=Regex class=md-nav__link> Regex </a> </li> <li class=md-nav__item> <a href=../../git/ title=GIT class=md-nav__link> GIT </a> </li> <li class=md-nav__item> <a href=../../css/ title=CSS class=md-nav__link> CSS </a> </li> <li class=md-nav__item> <a href=../../rest-api/ title="REST API" class=md-nav__link> REST API </a> </li> <li class=md-nav__item> <a href=../../javascript/ title=Javascript class=md-nav__link> Javascript </a> </li> <li class=md-nav__item> <a href=../../nodejs/ title=Node.js class=md-nav__link> Node.js </a> </li> <li class=md-nav__item> <a href=../../npm/ title=NPM class=md-nav__link> NPM </a> </li> <li class=md-nav__item> <a href=../../redux/ title=Redux class=md-nav__link> Redux </a> </li> <li class=md-nav__item> <a href=../ title=React class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../react-native/ title="React Native" class=md-nav__link> React Native </a> </li> <li class=md-nav__item> <a href=../../mongodb/ title=MongoDB class=md-nav__link> MongoDB </a> </li> <li class=md-nav__item> <a href=../../web-security/ title="Web Security" class=md-nav__link> Web Security </a> </li> <li class=md-nav__item> <a href=../../rust/ title=Rust class=md-nav__link> Rust </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#why class=md-nav__link> Why </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-isrequired class=md-nav__link> Using isRequired </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#how-it-works class=md-nav__link> How it works </a> </li> <li class=md-nav__item> <a href=#centralize-proptypes class=md-nav__link> Centralize propTypes </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#how-to-define-props-using-proptypes-in-nested-comps class=md-nav__link> How to define props using PropTypes in nested comps </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#benefits class=md-nav__link> Benefits </a> </li> <li class=md-nav__item> <a href=#drawbacks class=md-nav__link> Drawbacks </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#can-i-not-use-proptypes class=md-nav__link> Can I not use PropTypes? </a> </li> <li class=md-nav__item> <a href=#proptypes-vs-typescript class=md-nav__link> PropTypes vs Typescript </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#which-one-to-use class=md-nav__link> Which one to use </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/abhaydgarg/Notebook/tree/master/src/react/proptypes.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=proptypes>PropTypes<a class=headerlink href=#proptypes title="Permanent link">&para;</a></h1> <blockquote> <p>Only works on development environment.</p> </blockquote> <div class="admonition important"> <p class=admonition-title>Important</p> <ol> <li><code>PropTypes</code> is just for comp documentation and to fascilitate development process.</li> <li>Write the comp by keeping the <strong>production env in mind.</strong></li> </ol> </div> <h2 id=why>Why<a class=headerlink href=#why title="Permanent link">&para;</a></h2> <p><code>propTypes</code> help document your components, which benefits future development in two ways.</p> <ol> <li>You can easily open up a component and check which props are required and what type they should be.</li> <li>In development env, when things get messed up, React will give you an error message in the console, saying which props are wrong/missing and the render method that caused the problem.</li> </ol> <h3 id=using-isrequired>Using isRequired<a class=headerlink href=#using-isrequired title="Permanent link">&para;</a></h3> <blockquote> <p>isRequired =&gt; prop cannot be <code>undefined</code> or <code>null</code>.</p> </blockquote> <p>Make those prop <code>isRequired</code>, if it is missing then comp will break.</p> <h2 id=how-it-works>How it works<a class=headerlink href=#how-it-works title="Permanent link">&para;</a></h2> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kr>static</span> <span class=nx>propTypes</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>num</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>number</span><span class=p>.</span><span class=nx>isRequired</span>
  <span class=nx>str</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span>
<span class=p>}</span>
</pre></div> </td></tr></table> <table> <thead> <tr> <th>Right to Left checking</th> <th>defaultProps</th> </tr> </thead> <tbody> <tr> <td>In case of <code>num</code>, <code>isRequired</code> is present. So first it check if value is <code>undefined</code> or <code>null</code>. If not then only it check if <code>num</code> is of type <code>number</code>.</td> <td><code>defaultProps</code> runs before <code>propTypes</code>, so type checking also works on default values.</td> </tr> <tr> <td><code>null</code> and <code>undefind</code> are allowed if <code>isRequired</code> is not present.</td> <td>If prop is missing or has a value <code>undefined</code> then default value does not change.</td> </tr> <tr> <td>-</td> <td>If prop has value <code>null</code> then default value is replaced with <code>null</code></td> </tr> </tbody> </table> <h2 id=centralize-proptypes>Centralize propTypes<a class=headerlink href=#centralize-proptypes title="Permanent link">&para;</a></h2> <p>In real apps with large objects, using PropTypes quickly leads to a lot of code. That’s a problem, because in React, you’ll often pass the same object to multiple components. Repeating these details in multiple component files breaks the DRY principle (don’t repeat yourself). Repeating yourself creates a maintenance problem. <strong>The solution? Centralize your PropTypes.</strong></p> <p>Using the <code>shape</code> function of the <code>prop-types</code> package it’s possible to define types yourself.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1>//# userTypes.js</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>shape</span><span class=p>,</span> <span class=nx>number</span><span class=p>,</span> <span class=nx>string</span><span class=p>,</span> <span class=nx>oneOf</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;prop-types&#39;</span><span class=p>;</span>

<span class=kr>export</span> <span class=kr>const</span> <span class=nx>addressType</span> <span class=o>=</span> <span class=nx>shape</span><span class=p>({</span>
    <span class=nx>id</span><span class=o>:</span> <span class=nx>number</span><span class=p>.</span><span class=nx>isRequired</span><span class=p>,</span>
    <span class=nx>street</span><span class=o>:</span> <span class=nx>string</span><span class=p>.</span><span class=nx>isRequired</span><span class=p>,</span>
    <span class=nx>street2</span><span class=o>:</span> <span class=nx>string</span><span class=p>,</span>
    <span class=nx>city</span><span class=o>:</span> <span class=nx>string</span><span class=p>.</span><span class=nx>isRequired</span><span class=p>,</span>
    <span class=nx>state</span><span class=o>:</span> <span class=nx>string</span><span class=p>.</span><span class=nx>isRequired</span><span class=p>,</span>
    <span class=nx>postal</span><span class=o>:</span> <span class=nx>number</span><span class=p>.</span><span class=nx>isRequired</span><span class=p>,</span>
<span class=p>});</span>

<span class=kr>export</span> <span class=kr>const</span> <span class=nx>userType</span> <span class=o>=</span> <span class=nx>shape</span><span class=p>({</span>
  <span class=nx>id</span><span class=o>:</span> <span class=nx>number</span><span class=p>,</span>
  <span class=nx>firstName</span><span class=o>:</span> <span class=nx>string</span><span class=p>.</span><span class=nx>isRequired</span><span class=p>,</span>
  <span class=nx>lastName</span><span class=o>:</span> <span class=nx>string</span><span class=p>.</span><span class=nx>isRequired</span><span class=p>,</span>
  <span class=nx>company</span><span class=o>:</span> <span class=nx>string</span><span class=p>,</span>
  <span class=nx>role</span><span class=o>:</span> <span class=nx>oneOf</span><span class=p>([</span><span class=s1>&#39;user&#39;</span><span class=p>,</span> <span class=s1>&#39;author&#39;</span><span class=p>]),</span>
  <span class=nx>address</span><span class=o>:</span> <span class=nx>addressType</span><span class=p>.</span><span class=nx>isRequired</span><span class=p>,</span>
<span class=p>});</span>
</pre></div> </td></tr></table> <p>and then imports them when needed:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kr>import</span> <span class=p>{</span><span class=nx>userType</span><span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;./userTypes&#39;</span><span class=p>;</span>

<span class=kr>export</span> <span class=k>default</span> <span class=kr>class</span> <span class=nx>User</span> <span class=kr>extends</span> <span class=nx>Component</span> <span class=p>{</span>
  <span class=kr>static</span> <span class=nx>propTypes</span> <span class=o>=</span> <span class=p>{</span>
    <span class=nx>user</span><span class=o>:</span> <span class=nx>userType</span><span class=p>.</span><span class=nx>isRequired</span><span class=p>,</span>
  <span class=p>};</span>
<span class=p>}</span>
</pre></div> </td></tr></table> <h3 id=how-to-define-props-using-proptypes-in-nested-comps>How to define props using PropTypes in nested comps<a class=headerlink href=#how-to-define-props-using-proptypes-in-nested-comps title="Permanent link">&para;</a></h3> <p>Let's have a purpose of <code>PropTypes</code> be clear in mind.</p> <blockquote> <p>Documentation and fascilitate development process. So we should choose the way which help us to achieve these two purposes.</p> </blockquote> <p>Two types of props in comp. And the approach for each type should be:</p> <ol> <li> <p>Own props.</p> <ul> <li>Do <code>isRequired</code>.</li> <li>Set default value, if neccessary.</li> </ul> </li> <li> <p>Child props - props which just recieved by comp and simply pass down to child.</p> <ul> <li>Do not do <code>isRequired</code> check. If prop is a required prop in child then you do not make it required in parent comp. Just define its type and let child handle the required check.</li> <li>Do not set default value on the behalf of child comp. Let it set by child comp.</li> </ul> </li> </ol> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Contextual props (props drilling): do not define the prop in intermeddiate comps. Define in the parent (index) comp which recieve the contexual prop and then define it in the child comp which uses it down in the hierarchy.</p> </div> <h4 id=benefits>Benefits<a class=headerlink href=#benefits title="Permanent link">&para;</a></h4> <ol> <li>If you open any comp file in hierarchy you will see all the props that comp is using. Own props and props that pass down to child. You need not to look into other files in hierarchy to have complete picture of all props. It serves the documentation purpose well. That is at one place you get all the information about props.</li> <li>Since we are handling <code>isRequired</code> check for own props. React will not warn multiple times for <code>isRequired</code> failure.</li> </ol> <h4 id=drawbacks>Drawbacks<a class=headerlink href=#drawbacks title="Permanent link">&para;</a></h4> <ol> <li>Multiple warnings on mismatch type. So basically, if some comp is down in the hierarchy has type mismatch then all parents from where the prop is being passed down will also complain about the mismatch type. So you will see multiple warm messages on your screen. <strong>This is a trade-off you get when you want to achive the documentation benefit.</strong></li> <li>Props boilerplate.</li> </ol> <div class="admonition note"> <p class=admonition-title>Multiple mismatch warnings</p> <p>We can make use of the multiple mismatch warnings drawback in a situation where we want to know the hierarchical path of prop from top to down. We can track the prop path and know all the comps from where the prop is being passed down. All we need to do is to change the prop type in root comp (index) and you will see the multiple mismatch type warnings from all the comps in the hierarchy from where the prop is being passed down.</p> </div> <h2 id=can-i-not-use-proptypes>Can I not use PropTypes?<a class=headerlink href=#can-i-not-use-proptypes title="Permanent link">&para;</a></h2> <p>Yes, it is not neccessary to use PropTypes. The only thing that you miss is comp documentation and developer may have hard time figuring out the props that comp is using and their types.</p> <p>If you do the check for props that can cause WSOD then we do not need it. Because this is what matters in production.</p> <h2 id=proptypes-vs-typescript>PropTypes vs Typescript<a class=headerlink href=#proptypes-vs-typescript title="Permanent link">&para;</a></h2> <p>PropTypes help to check props at the runtime when you have data coming from API or other source and there is a possibility that data from API can have different types as compare to props type in comp.</p> <p>Typescript does not do the runtime check. It helps the developer by checking the props at compile time.</p> <h3 id=which-one-to-use>Which one to use<a class=headerlink href=#which-one-to-use title="Permanent link">&para;</a></h3> <p>Again - the purpose - documentation and early warning system for developer.</p> <p><strong>If you are not using Typescript</strong> in your app then you should use PropTypes. So you, when later visit your comp and other developer when look into your comp then you and other developer can know about comp props and their types quickly and without a hasssle.</p> <p><strong>If you are using Typescript</strong> in your app then do not use PropTypes. Use Typescript instead, because in Typescript you create a type definition file for your comp which tells you and other developer about the props and their types. It serves the purpose of documentation and warn developer about mismatch at compile time too.</p> <div class="admonition question"> <p class=admonition-title>What about runtime check (API data) when we use Typescript</p> <ol> <li>You do type checking for those props at the comp level which can cause WSOD or other errors. So there is no need to have another layer of PropTypes to check the types.</li> <li>You can create a transform function (Adapter) which check and transform the data to match your props type.</li> </ol> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Abhay Garg </div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/application.c648116f.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>